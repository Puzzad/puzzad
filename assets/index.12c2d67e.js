function Fs(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in n)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(n,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerpolicy&&(s.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?s.credentials="include":i.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();const Hs="modulepreload",zs=function(n){return"/"+n},Pr={},X=function(e,t,r){if(!t||t.length===0)return e();const i=document.getElementsByTagName("link");return Promise.all(t.map(s=>{if(s=zs(s),s in Pr)return;Pr[s]=!0;const o=s.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!r)for(let l=i.length-1;l>=0;l--){const d=i[l];if(d.href===s&&(!o||d.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${a}`))return;const u=document.createElement("link");if(u.rel=o?"stylesheet":Hs,o||(u.as="script",u.crossOrigin=""),u.href=s,document.head.appendChild(u),o)return new Promise((l,d)=>{u.addEventListener("load",l),u.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>e())};function Y(){}const Zn=n=>n;function er(n,e){for(const t in e)n[t]=e[t];return n}function qs(n){return n&&typeof n=="object"&&typeof n.then=="function"}function ki(n){return n()}function Br(){return Object.create(null)}function Oe(n){n.forEach(ki)}function Ot(n){return typeof n=="function"}function cn(n,e){return n!=n?e==e:n!==e||n&&typeof n=="object"||typeof n=="function"}let $t;function Cr(n,e){return $t||($t=document.createElement("a")),$t.href=e,n===$t.href}function Js(n){return Object.keys(n).length===0}function tr(n,...e){if(n==null)return Y;const t=n.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function Xd(n){let e;return tr(n,t=>e=t)(),e}function Ri(n,e,t){n.$$.on_destroy.push(tr(e,t))}function Qd(n,e,t,r){if(n){const i=xi(n,e,t,r);return n[0](i)}}function xi(n,e,t,r){return n[1]&&r?er(t.ctx.slice(),n[1](r(e))):t.ctx}function Zd(n,e,t,r){if(n[2]&&r){const i=n[2](r(t));if(e.dirty===void 0)return i;if(typeof i=="object"){const s=[],o=Math.max(e.dirty.length,i.length);for(let a=0;a<o;a+=1)s[a]=e.dirty[a]|i[a];return s}return e.dirty|i}return e.dirty}function eh(n,e,t,r,i,s){if(i){const o=xi(e,t,r,s);n.p(o,i)}}function th(n){if(n.ctx.length>32){const e=[],t=n.ctx.length/32;for(let r=0;r<t;r++)e[r]=-1;return e}return-1}function Jt(n){return n==null?"":n}const Oi=typeof window<"u";let nr=Oi?()=>window.performance.now():()=>Date.now(),rr=Oi?n=>requestAnimationFrame(n):Y;const Je=new Set;function Ii(n){Je.forEach(e=>{e.c(n)||(Je.delete(e),e.f())}),Je.size!==0&&rr(Ii)}function ir(n){let e;return Je.size===0&&rr(Ii),{promise:new Promise(t=>{Je.add(e={c:n,f:t})}),abort(){Je.delete(e)}}}function ee(n,e){n.appendChild(e)}function Di(n){if(!n)return document;const e=n.getRootNode?n.getRootNode():n.ownerDocument;return e&&e.host?e:n.ownerDocument}function Ws(n){const e=C("style");return Vs(Di(n),e),e.sheet}function Vs(n,e){return ee(n.head||n,e),e.sheet}function M(n,e,t){n.insertBefore(e,t||null)}function P(n){n.parentNode.removeChild(n)}function nh(n,e){for(let t=0;t<n.length;t+=1)n[t]&&n[t].d(e)}function C(n){return document.createElement(n)}function Ks(n){return document.createElementNS("http://www.w3.org/2000/svg",n)}function Ni(n){return document.createTextNode(n)}function ge(){return Ni(" ")}function sr(){return Ni("")}function Wt(n,e,t,r){return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t,r)}function Xs(n){return function(e){return e.preventDefault(),n.call(this,e)}}function I(n,e,t){t==null?n.removeAttribute(e):n.getAttribute(e)!==t&&n.setAttribute(e,t)}function Qs(n){return Array.from(n.childNodes)}function rh(n,e){e=""+e,n.wholeText!==e&&(n.data=e)}function ih(n,e){n.value=e==null?"":e}function sh(n,e,t,r){t===null?n.style.removeProperty(e):n.style.setProperty(e,t,r?"important":"")}function oh(n,e,t){n.classList[t?"add":"remove"](e)}function Ai(n,e,{bubbles:t=!1,cancelable:r=!1}={}){const i=document.createEvent("CustomEvent");return i.initCustomEvent(n,t,r,e),i}class ah{constructor(e=!1){this.is_svg=!1,this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,t,r=null){this.e||(this.is_svg?this.e=Ks(t.nodeName):this.e=C(t.nodeName),this.t=t,this.c(e)),this.i(r)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.childNodes)}i(e){for(let t=0;t<this.n.length;t+=1)M(this.t,this.n[t],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(P)}}function Vt(n,e){return new n(e)}const Kt=new Map;let Xt=0;function Zs(n){let e=5381,t=n.length;for(;t--;)e=(e<<5)-e^n.charCodeAt(t);return e>>>0}function eo(n,e){const t={stylesheet:Ws(e),rules:{}};return Kt.set(n,t),t}function or(n,e,t,r,i,s,o,a=0){const c=16.666/r;let u=`{
`;for(let y=0;y<=1;y+=c){const S=e+(t-e)*s(y);u+=y*100+`%{${o(S,1-S)}}
`}const l=u+`100% {${o(t,1-t)}}
}`,d=`__svelte_${Zs(l)}_${a}`,_=Di(n),{stylesheet:f,rules:p}=Kt.get(_)||eo(_,n);p[d]||(p[d]=!0,f.insertRule(`@keyframes ${d} ${l}`,f.cssRules.length));const b=n.style.animation||"";return n.style.animation=`${b?`${b}, `:""}${d} ${r}ms linear ${i}ms 1 both`,Xt+=1,d}function Qt(n,e){const t=(n.style.animation||"").split(", "),r=t.filter(e?s=>s.indexOf(e)<0:s=>s.indexOf("__svelte")===-1),i=t.length-r.length;i&&(n.style.animation=r.join(", "),Xt-=i,Xt||to())}function to(){rr(()=>{Xt||(Kt.forEach(n=>{const{ownerNode:e}=n.stylesheet;e&&P(e)}),Kt.clear())})}function ch(n,e,t,r){if(!e)return Y;const i=n.getBoundingClientRect();if(e.left===i.left&&e.right===i.right&&e.top===i.top&&e.bottom===i.bottom)return Y;const{delay:s=0,duration:o=300,easing:a=Zn,start:c=nr()+s,end:u=c+o,tick:l=Y,css:d}=t(n,{from:e,to:i},r);let _=!0,f=!1,p;function b(){d&&(p=or(n,0,1,o,s,a,d)),s||(f=!0)}function y(){d&&Qt(n,p),_=!1}return ir(S=>{if(!f&&S>=c&&(f=!0),f&&S>=u&&(l(1,0),y()),!_)return!1;if(f){const G=S-c,F=0+1*a(G/o);l(F,1-F)}return!0}),b(),l(0,1),y}function uh(n){const e=getComputedStyle(n);if(e.position!=="absolute"&&e.position!=="fixed"){const{width:t,height:r}=e,i=n.getBoundingClientRect();n.style.position="absolute",n.style.width=t,n.style.height=r,no(n,i)}}function no(n,e){const t=n.getBoundingClientRect();if(e.left!==t.left||e.top!==t.top){const r=getComputedStyle(n),i=r.transform==="none"?"":r.transform;n.style.transform=`${i} translate(${e.left-t.left}px, ${e.top-t.top}px)`}}let mt;function me(n){mt=n}function It(){if(!mt)throw new Error("Function called outside component initialization");return mt}function lh(n){It().$$.on_mount.push(n)}function ro(n){It().$$.after_update.push(n)}function io(n){It().$$.on_destroy.push(n)}function so(){const n=It();return(e,t,{cancelable:r=!1}={})=>{const i=n.$$.callbacks[e];if(i){const s=Ai(e,t,{cancelable:r});return i.slice().forEach(o=>{o.call(n,s)}),!s.defaultPrevented}return!0}}function Lr(n,e){const t=n.$$.callbacks[e.type];t&&t.slice().forEach(r=>r.call(this,e))}const ut=[],Gr=[],Ft=[],Ln=[],$i=Promise.resolve();let Gn=!1;function ji(){Gn||(Gn=!0,$i.then(cr))}function ar(){return ji(),$i}function gt(n){Ft.push(n)}function dh(n){Ln.push(n)}const On=new Set;let jt=0;function cr(){const n=mt;do{for(;jt<ut.length;){const e=ut[jt];jt++,me(e),oo(e.$$)}for(me(null),ut.length=0,jt=0;Gr.length;)Gr.pop()();for(let e=0;e<Ft.length;e+=1){const t=Ft[e];On.has(t)||(On.add(t),t())}Ft.length=0}while(ut.length);for(;Ln.length;)Ln.pop()();Gn=!1,On.clear(),me(n)}function oo(n){if(n.fragment!==null){n.update(),Oe(n.before_update);const e=n.dirty;n.dirty=[-1],n.fragment&&n.fragment.p(n.ctx,e),n.after_update.forEach(gt)}}let at;function Ui(){return at||(at=Promise.resolve(),at.then(()=>{at=null})),at}function Zt(n,e,t){n.dispatchEvent(Ai(`${e?"intro":"outro"}${t}`))}const Ht=new Set;let Ee;function un(){Ee={r:0,c:[],p:Ee}}function ln(){Ee.r||Oe(Ee.c),Ee=Ee.p}function oe(n,e){n&&n.i&&(Ht.delete(n),n.i(e))}function he(n,e,t,r){if(n&&n.o){if(Ht.has(n))return;Ht.add(n),Ee.c.push(()=>{Ht.delete(n),r&&(t&&n.d(1),r())}),n.o(e)}else r&&r()}const Pi={duration:0};function hh(n,e,t){let r=e(n,t),i=!1,s,o,a=0;function c(){s&&Qt(n,s)}function u(){const{delay:d=0,duration:_=300,easing:f=Zn,tick:p=Y,css:b}=r||Pi;b&&(s=or(n,0,1,_,d,f,b,a++)),p(0,1);const y=nr()+d,S=y+_;o&&o.abort(),i=!0,gt(()=>Zt(n,!0,"start")),o=ir(G=>{if(i){if(G>=S)return p(1,0),Zt(n,!0,"end"),c(),i=!1;if(G>=y){const F=f((G-y)/_);p(F,1-F)}}return i})}let l=!1;return{start(){l||(l=!0,Qt(n),Ot(r)?(r=r(),Ui().then(u)):u())},invalidate(){l=!1},end(){i&&(c(),i=!1)}}}function fh(n,e,t){let r=e(n,t),i=!0,s;const o=Ee;o.r+=1;function a(){const{delay:c=0,duration:u=300,easing:l=Zn,tick:d=Y,css:_}=r||Pi;_&&(s=or(n,1,0,u,c,l,_));const f=nr()+c,p=f+u;gt(()=>Zt(n,!1,"start")),ir(b=>{if(i){if(b>=p)return d(0,1),Zt(n,!1,"end"),--o.r||Oe(o.c),!1;if(b>=f){const y=l((b-f)/u);d(1-y,y)}}return i})}return Ot(r)?Ui().then(()=>{r=r(),a()}):a(),{end(c){c&&r.tick&&r.tick(1,0),i&&(s&&Qt(n,s),i=!1)}}}function ph(n,e){const t=e.token={};function r(i,s,o,a){if(e.token!==t)return;e.resolved=a;let c=e.ctx;o!==void 0&&(c=c.slice(),c[o]=a);const u=i&&(e.current=i)(c);let l=!1;e.block&&(e.blocks?e.blocks.forEach((d,_)=>{_!==s&&d&&(un(),he(d,1,1,()=>{e.blocks[_]===d&&(e.blocks[_]=null)}),ln())}):e.block.d(1),u.c(),oe(u,1),u.m(e.mount(),e.anchor),l=!0),e.block=u,e.blocks&&(e.blocks[s]=u),l&&cr()}if(qs(n)){const i=It();if(n.then(s=>{me(i),r(e.then,1,e.value,s),me(null)},s=>{if(me(i),r(e.catch,2,e.error,s),me(null),!e.hasCatch)throw s}),e.current!==e.pending)return r(e.pending,0),!0}else{if(e.current!==e.then)return r(e.then,1,e.value,n),!0;e.resolved=n}}function _h(n,e,t){const r=e.slice(),{resolved:i}=n;n.current===n.then&&(r[n.value]=i),n.current===n.catch&&(r[n.error]=i),n.block.p(r,t)}function mh(n,e){n.d(1),e.delete(n.key)}function ao(n,e){he(n,1,1,()=>{e.delete(n.key)})}function gh(n,e){n.f(),ao(n,e)}function yh(n,e,t,r,i,s,o,a,c,u,l,d){let _=n.length,f=s.length,p=_;const b={};for(;p--;)b[n[p].key]=p;const y=[],S=new Map,G=new Map;for(p=f;p--;){const v=d(i,s,p),$=t(v);let k=o.get($);k?r&&k.p(v,e):(k=u($,v),k.c()),S.set($,y[p]=k),$ in b&&G.set($,Math.abs(p-b[$]))}const F=new Set,E=new Set;function T(v){oe(v,1),v.m(a,l),o.set(v.key,v),l=v.first,f--}for(;_&&f;){const v=y[f-1],$=n[_-1],k=v.key,V=$.key;v===$?(l=v.first,_--,f--):S.has(V)?!o.has(k)||F.has(k)?T(v):E.has(V)?_--:G.get(k)>G.get(V)?(E.add(k),T(v)):(F.add(V),_--):(c($,o),_--)}for(;_--;){const v=n[_];S.has(v.key)||c(v,o)}for(;f;)T(y[f-1]);return y}function Bi(n,e){const t={},r={},i={$$scope:1};let s=n.length;for(;s--;){const o=n[s],a=e[s];if(a){for(const c in o)c in a||(r[c]=1);for(const c in a)i[c]||(t[c]=a[c],i[c]=1);n[s]=a}else for(const c in o)i[c]=1}for(const o in r)o in t||(t[o]=void 0);return t}function Ci(n){return typeof n=="object"&&n!==null?n:{}}function bh(n,e,t){const r=n.$$.props[e];r!==void 0&&(n.$$.bound[r]=t,t(n.$$.ctx[r]))}function Qe(n){n&&n.c()}function Be(n,e,t,r){const{fragment:i,after_update:s}=n.$$;i&&i.m(e,t),r||gt(()=>{const o=n.$$.on_mount.map(ki).filter(Ot);n.$$.on_destroy?n.$$.on_destroy.push(...o):Oe(o),n.$$.on_mount=[]}),s.forEach(gt)}function Ce(n,e){const t=n.$$;t.fragment!==null&&(Oe(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function co(n,e){n.$$.dirty[0]===-1&&(ut.push(n),ji(),n.$$.dirty.fill(0)),n.$$.dirty[e/31|0]|=1<<e%31}function ur(n,e,t,r,i,s,o,a=[-1]){const c=mt;me(n);const u=n.$$={fragment:null,ctx:[],props:s,update:Y,not_equal:i,bound:Br(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(c?c.$$.context:[])),callbacks:Br(),dirty:a,skip_bound:!1,root:e.target||c.$$.root};o&&o(u.root);let l=!1;if(u.ctx=t?t(n,e.props||{},(d,_,...f)=>{const p=f.length?f[0]:_;return u.ctx&&i(u.ctx[d],u.ctx[d]=p)&&(!u.skip_bound&&u.bound[d]&&u.bound[d](p),l&&co(n,d)),_}):[],u.update(),l=!0,Oe(u.before_update),u.fragment=r?r(u.ctx):!1,e.target){if(e.hydrate){const d=Qs(e.target);u.fragment&&u.fragment.l(d),d.forEach(P)}else u.fragment&&u.fragment.c();e.intro&&oe(n.$$.fragment),Be(n,e.target,e.anchor,e.customElement),cr()}me(c)}class lr{$destroy(){Ce(this,1),this.$destroy=Y}$on(e,t){if(!Ot(t))return Y;const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(t),()=>{const i=r.indexOf(t);i!==-1&&r.splice(i,1)}}$set(e){this.$$set&&!Js(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const uo="/assets/logo.de2ae63a.png";function ce(n){if(!n)throw Error("Parameter args is required");if(!n.component==!n.asyncComponent)throw Error("One and only one of component and asyncComponent is required");if(n.component&&(n.asyncComponent=()=>Promise.resolve(n.component)),typeof n.asyncComponent!="function")throw Error("Parameter asyncComponent must be a function");if(n.conditions){Array.isArray(n.conditions)||(n.conditions=[n.conditions]);for(let t=0;t<n.conditions.length;t++)if(!n.conditions[t]||typeof n.conditions[t]!="function")throw Error("Invalid parameter conditions["+t+"]")}return n.loadingComponent&&(n.asyncComponent.loading=n.loadingComponent,n.asyncComponent.loadingParams=n.loadingParams||void 0),{component:n.asyncComponent,userData:n.userData,conditions:n.conditions&&n.conditions.length?n.conditions:void 0,props:n.props&&Object.keys(n.props).length?n.props:{},_sveltesparouter:!0}}const Ye=[];function dr(n,e){return{subscribe:hr(n,e).subscribe}}function hr(n,e=Y){let t;const r=new Set;function i(a){if(cn(n,a)&&(n=a,t)){const c=!Ye.length;for(const u of r)u[1](),Ye.push(u,n);if(c){for(let u=0;u<Ye.length;u+=2)Ye[u][0](Ye[u+1]);Ye.length=0}}}function s(a){i(a(n))}function o(a,c=Y){const u=[a,c];return r.add(u),r.size===1&&(t=e(i)||Y),a(n),()=>{r.delete(u),r.size===0&&(t(),t=null)}}return{set:i,update:s,subscribe:o}}function Li(n,e,t){const r=!Array.isArray(n),i=r?[n]:n,s=e.length<2;return dr(t,o=>{let a=!1;const c=[];let u=0,l=Y;const d=()=>{if(u)return;l();const f=e(r?c[0]:c,o);s?o(f):l=Ot(f)?f:Y},_=i.map((f,p)=>tr(f,b=>{c[p]=b,u&=~(1<<p),a&&d()},()=>{u|=1<<p}));return a=!0,d(),function(){Oe(_),l()}})}function lo(n,e){if(n instanceof RegExp)return{keys:!1,pattern:n};var t,r,i,s,o=[],a="",c=n.split("/");for(c[0]||c.shift();i=c.shift();)t=i[0],t==="*"?(o.push("wild"),a+="/(.*)"):t===":"?(r=i.indexOf("?",1),s=i.indexOf(".",1),o.push(i.substring(1,~r?r:~s?s:i.length)),a+=!!~r&&!~s?"(?:/([^/]+?))?":"/([^/]+?)",~s&&(a+=(~r?"?":"")+"\\"+i.substring(s))):a+="/"+i;return{keys:o,pattern:new RegExp("^"+a+(e?"(?=$|/)":"/?$"),"i")}}function ho(n){let e,t,r;const i=[n[2]];var s=n[0];function o(a){let c={};for(let u=0;u<i.length;u+=1)c=er(c,i[u]);return{props:c}}return s&&(e=Vt(s,o()),e.$on("routeEvent",n[7])),{c(){e&&Qe(e.$$.fragment),t=sr()},m(a,c){e&&Be(e,a,c),M(a,t,c),r=!0},p(a,c){const u=c&4?Bi(i,[Ci(a[2])]):{};if(s!==(s=a[0])){if(e){un();const l=e;he(l.$$.fragment,1,0,()=>{Ce(l,1)}),ln()}s?(e=Vt(s,o()),e.$on("routeEvent",a[7]),Qe(e.$$.fragment),oe(e.$$.fragment,1),Be(e,t.parentNode,t)):e=null}else s&&e.$set(u)},i(a){r||(e&&oe(e.$$.fragment,a),r=!0)},o(a){e&&he(e.$$.fragment,a),r=!1},d(a){a&&P(t),e&&Ce(e,a)}}}function fo(n){let e,t,r;const i=[{params:n[1]},n[2]];var s=n[0];function o(a){let c={};for(let u=0;u<i.length;u+=1)c=er(c,i[u]);return{props:c}}return s&&(e=Vt(s,o()),e.$on("routeEvent",n[6])),{c(){e&&Qe(e.$$.fragment),t=sr()},m(a,c){e&&Be(e,a,c),M(a,t,c),r=!0},p(a,c){const u=c&6?Bi(i,[c&2&&{params:a[1]},c&4&&Ci(a[2])]):{};if(s!==(s=a[0])){if(e){un();const l=e;he(l.$$.fragment,1,0,()=>{Ce(l,1)}),ln()}s?(e=Vt(s,o()),e.$on("routeEvent",a[6]),Qe(e.$$.fragment),oe(e.$$.fragment,1),Be(e,t.parentNode,t)):e=null}else s&&e.$set(u)},i(a){r||(e&&oe(e.$$.fragment,a),r=!0)},o(a){e&&he(e.$$.fragment,a),r=!1},d(a){a&&P(t),e&&Ce(e,a)}}}function po(n){let e,t,r,i;const s=[fo,ho],o=[];function a(c,u){return c[1]?0:1}return e=a(n),t=o[e]=s[e](n),{c(){t.c(),r=sr()},m(c,u){o[e].m(c,u),M(c,r,u),i=!0},p(c,[u]){let l=e;e=a(c),e===l?o[e].p(c,u):(un(),he(o[l],1,1,()=>{o[l]=null}),ln(),t=o[e],t?t.p(c,u):(t=o[e]=s[e](c),t.c()),oe(t,1),t.m(r.parentNode,r))},i(c){i||(oe(t),i=!0)},o(c){he(t),i=!1},d(c){o[e].d(c),c&&P(r)}}}function Yr(){const n=window.location.href.indexOf("#/");let e=n>-1?window.location.href.substr(n+1):"/";const t=e.indexOf("?");let r="";return t>-1&&(r=e.substr(t+1),e=e.substr(0,t)),{location:e,querystring:r}}const fr=dr(null,function(e){e(Yr());const t=()=>{e(Yr())};return window.addEventListener("hashchange",t,!1),function(){window.removeEventListener("hashchange",t,!1)}});Li(fr,n=>n.location);Li(fr,n=>n.querystring);const Mr=hr(void 0);async function vh(n){if(!n||n.length<1||n.charAt(0)!="/"&&n.indexOf("#/")!==0)throw Error("Invalid parameter location");await ar(),history.replaceState({...history.state,__svelte_spa_router_scrollX:window.scrollX,__svelte_spa_router_scrollY:window.scrollY},void 0),window.location.hash=(n.charAt(0)=="#"?"":"#")+n}async function _o(n){if(!n||n.length<1||n.charAt(0)!="/"&&n.indexOf("#/")!==0)throw Error("Invalid parameter location");await ar();const e=(n.charAt(0)=="#"?"":"#")+n;try{const t={...history.state};delete t.__svelte_spa_router_scrollX,delete t.__svelte_spa_router_scrollY,window.history.replaceState(t,void 0,e)}catch{console.warn("Caught exception while replacing the current page. If you're running this in the Svelte REPL, please note that the `replace` method might not work in this environment.")}window.dispatchEvent(new Event("hashchange"))}function mo(n){n?window.scrollTo(n.__svelte_spa_router_scrollX,n.__svelte_spa_router_scrollY):window.scrollTo(0,0)}function go(n,e,t){let{routes:r={}}=e,{prefix:i=""}=e,{restoreScrollState:s=!1}=e;class o{constructor(T,v){if(!v||typeof v!="function"&&(typeof v!="object"||v._sveltesparouter!==!0))throw Error("Invalid component object");if(!T||typeof T=="string"&&(T.length<1||T.charAt(0)!="/"&&T.charAt(0)!="*")||typeof T=="object"&&!(T instanceof RegExp))throw Error('Invalid value for "path" argument - strings must start with / or *');const{pattern:$,keys:k}=lo(T);this.path=T,typeof v=="object"&&v._sveltesparouter===!0?(this.component=v.component,this.conditions=v.conditions||[],this.userData=v.userData,this.props=v.props||{}):(this.component=()=>Promise.resolve(v),this.conditions=[],this.props={}),this._pattern=$,this._keys=k}match(T){if(i){if(typeof i=="string")if(T.startsWith(i))T=T.substr(i.length)||"/";else return null;else if(i instanceof RegExp){const V=T.match(i);if(V&&V[0])T=T.substr(V[0].length)||"/";else return null}}const v=this._pattern.exec(T);if(v===null)return null;if(this._keys===!1)return v;const $={};let k=0;for(;k<this._keys.length;){try{$[this._keys[k]]=decodeURIComponent(v[k+1]||"")||null}catch{$[this._keys[k]]=null}k++}return $}async checkConditions(T){for(let v=0;v<this.conditions.length;v++)if(!await this.conditions[v](T))return!1;return!0}}const a=[];r instanceof Map?r.forEach((E,T)=>{a.push(new o(T,E))}):Object.keys(r).forEach(E=>{a.push(new o(E,r[E]))});let c=null,u=null,l={};const d=so();async function _(E,T){await ar(),d(E,T)}let f=null,p=null;s&&(p=E=>{E.state&&(E.state.__svelte_spa_router_scrollY||E.state.__svelte_spa_router_scrollX)?f=E.state:f=null},window.addEventListener("popstate",p),ro(()=>{mo(f)}));let b=null,y=null;const S=fr.subscribe(async E=>{b=E;let T=0;for(;T<a.length;){const v=a[T].match(E.location);if(!v){T++;continue}const $={route:a[T].path,location:E.location,querystring:E.querystring,userData:a[T].userData,params:v&&typeof v=="object"&&Object.keys(v).length?v:null};if(!await a[T].checkConditions($)){t(0,c=null),y=null,_("conditionsFailed",$);return}_("routeLoading",Object.assign({},$));const k=a[T].component;if(y!=k){k.loading?(t(0,c=k.loading),y=k,t(1,u=k.loadingParams),t(2,l={}),_("routeLoaded",Object.assign({},$,{component:c,name:c.name,params:u}))):(t(0,c=null),y=null);const V=await k();if(E!=b)return;t(0,c=V&&V.default||V),y=k}v&&typeof v=="object"&&Object.keys(v).length?t(1,u=v):t(1,u=null),t(2,l=a[T].props),_("routeLoaded",Object.assign({},$,{component:c,name:c.name,params:u})).then(()=>{Mr.set(u)});return}t(0,c=null),y=null,Mr.set(void 0)});io(()=>{S(),p&&window.removeEventListener("popstate",p)});function G(E){Lr.call(this,n,E)}function F(E){Lr.call(this,n,E)}return n.$$set=E=>{"routes"in E&&t(3,r=E.routes),"prefix"in E&&t(4,i=E.prefix),"restoreScrollState"in E&&t(5,s=E.restoreScrollState)},n.$$.update=()=>{n.$$.dirty&32&&(history.scrollRestoration=s?"manual":"auto")},[c,u,l,r,i,s,G,F]}class yo extends lr{constructor(e){super(),ur(this,e,go,po,cn,{routes:3,prefix:4,restoreScrollState:5})}}var bo=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(l){try{u(r.next(l))}catch(d){o(d)}}function c(l){try{u(r.throw(l))}catch(d){o(d)}}function u(l){l.done?s(l.value):i(l.value).then(a,c)}u((r=r.apply(n,e||[])).next())})};const vo=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>bo(void 0,void 0,void 0,function*(){return yield(yield X(()=>Promise.resolve().then(()=>dn),void 0)).fetch(...t)}):e=fetch,(...t)=>e(...t)};class pr extends Error{constructor(e,t="FunctionsError",r){super(e),super.name=t,this.context=r}}class Eo extends pr{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class To extends pr{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class wo extends pr{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var So=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(l){try{u(r.next(l))}catch(d){o(d)}}function c(l){try{u(r.throw(l))}catch(d){o(d)}}function u(l){l.done?s(l.value):i(l.value).then(a,c)}u((r=r.apply(n,e||[])).next())})};class ko{constructor(e,{headers:t={},customFetch:r}={}){this.url=e,this.headers=t,this.fetch=vo(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var r;return So(this,void 0,void 0,function*(){try{const{headers:i,body:s}=t;let o={},a;s&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&s instanceof Blob||s instanceof ArrayBuffer?(o["Content-Type"]="application/octet-stream",a=s):typeof s=="string"?(o["Content-Type"]="text/plain",a=s):typeof FormData<"u"&&s instanceof FormData?a=s:(o["Content-Type"]="application/json",a=JSON.stringify(s)));const c=yield this.fetch(`${this.url}/${e}`,{method:"POST",headers:Object.assign(Object.assign(Object.assign({},o),this.headers),i),body:a}).catch(_=>{throw new Eo(_)}),u=c.headers.get("x-relay-error");if(u&&u==="true")throw new To(c);if(!c.ok)throw new wo(c);let l=((r=c.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),d;return l==="application/json"?d=yield c.json():l==="application/octet-stream"?d=yield c.blob():l==="multipart/form-data"?d=yield c.formData():d=yield c.text(),{data:d,error:null}}catch(i){return{data:null,error:i}}})}}var Ro=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function xo(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var yt={exports:{}};(function(n,e){var t=typeof self<"u"?self:Ro,r=function(){function s(){this.fetch=!1,this.DOMException=t.DOMException}return s.prototype=t,new s}();(function(s){(function(o){var a={searchParams:"URLSearchParams"in s,iterable:"Symbol"in s&&"iterator"in Symbol,blob:"FileReader"in s&&"Blob"in s&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in s,arrayBuffer:"ArrayBuffer"in s};function c(h){return h&&DataView.prototype.isPrototypeOf(h)}if(a.arrayBuffer)var u=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],l=ArrayBuffer.isView||function(h){return h&&u.indexOf(Object.prototype.toString.call(h))>-1};function d(h){if(typeof h!="string"&&(h=String(h)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(h))throw new TypeError("Invalid character in header field name");return h.toLowerCase()}function _(h){return typeof h!="string"&&(h=String(h)),h}function f(h){var g={next:function(){var w=h.shift();return{done:w===void 0,value:w}}};return a.iterable&&(g[Symbol.iterator]=function(){return g}),g}function p(h){this.map={},h instanceof p?h.forEach(function(g,w){this.append(w,g)},this):Array.isArray(h)?h.forEach(function(g){this.append(g[0],g[1])},this):h&&Object.getOwnPropertyNames(h).forEach(function(g){this.append(g,h[g])},this)}p.prototype.append=function(h,g){h=d(h),g=_(g);var w=this.map[h];this.map[h]=w?w+", "+g:g},p.prototype.delete=function(h){delete this.map[d(h)]},p.prototype.get=function(h){return h=d(h),this.has(h)?this.map[h]:null},p.prototype.has=function(h){return this.map.hasOwnProperty(d(h))},p.prototype.set=function(h,g){this.map[d(h)]=_(g)},p.prototype.forEach=function(h,g){for(var w in this.map)this.map.hasOwnProperty(w)&&h.call(g,this.map[w],w,this)},p.prototype.keys=function(){var h=[];return this.forEach(function(g,w){h.push(w)}),f(h)},p.prototype.values=function(){var h=[];return this.forEach(function(g){h.push(g)}),f(h)},p.prototype.entries=function(){var h=[];return this.forEach(function(g,w){h.push([w,g])}),f(h)},a.iterable&&(p.prototype[Symbol.iterator]=p.prototype.entries);function b(h){if(h.bodyUsed)return Promise.reject(new TypeError("Already read"));h.bodyUsed=!0}function y(h){return new Promise(function(g,w){h.onload=function(){g(h.result)},h.onerror=function(){w(h.error)}})}function S(h){var g=new FileReader,w=y(g);return g.readAsArrayBuffer(h),w}function G(h){var g=new FileReader,w=y(g);return g.readAsText(h),w}function F(h){for(var g=new Uint8Array(h),w=new Array(g.length),q=0;q<g.length;q++)w[q]=String.fromCharCode(g[q]);return w.join("")}function E(h){if(h.slice)return h.slice(0);var g=new Uint8Array(h.byteLength);return g.set(new Uint8Array(h)),g.buffer}function T(){return this.bodyUsed=!1,this._initBody=function(h){this._bodyInit=h,h?typeof h=="string"?this._bodyText=h:a.blob&&Blob.prototype.isPrototypeOf(h)?this._bodyBlob=h:a.formData&&FormData.prototype.isPrototypeOf(h)?this._bodyFormData=h:a.searchParams&&URLSearchParams.prototype.isPrototypeOf(h)?this._bodyText=h.toString():a.arrayBuffer&&a.blob&&c(h)?(this._bodyArrayBuffer=E(h.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):a.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(h)||l(h))?this._bodyArrayBuffer=E(h):this._bodyText=h=Object.prototype.toString.call(h):this._bodyText="",this.headers.get("content-type")||(typeof h=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):a.searchParams&&URLSearchParams.prototype.isPrototypeOf(h)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},a.blob&&(this.blob=function(){var h=b(this);if(h)return h;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?b(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(S)}),this.text=function(){var h=b(this);if(h)return h;if(this._bodyBlob)return G(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(F(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},a.formData&&(this.formData=function(){return this.text().then(V)}),this.json=function(){return this.text().then(JSON.parse)},this}var v=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function $(h){var g=h.toUpperCase();return v.indexOf(g)>-1?g:h}function k(h,g){g=g||{};var w=g.body;if(h instanceof k){if(h.bodyUsed)throw new TypeError("Already read");this.url=h.url,this.credentials=h.credentials,g.headers||(this.headers=new p(h.headers)),this.method=h.method,this.mode=h.mode,this.signal=h.signal,!w&&h._bodyInit!=null&&(w=h._bodyInit,h.bodyUsed=!0)}else this.url=String(h);if(this.credentials=g.credentials||this.credentials||"same-origin",(g.headers||!this.headers)&&(this.headers=new p(g.headers)),this.method=$(g.method||this.method||"GET"),this.mode=g.mode||this.mode||null,this.signal=g.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&w)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(w)}k.prototype.clone=function(){return new k(this,{body:this._bodyInit})};function V(h){var g=new FormData;return h.trim().split("&").forEach(function(w){if(w){var q=w.split("="),H=q.shift().replace(/\+/g," "),O=q.join("=").replace(/\+/g," ");g.append(decodeURIComponent(H),decodeURIComponent(O))}}),g}function Ys(h){var g=new p,w=h.replace(/\r?\n[\t ]+/g," ");return w.split(/\r?\n/).forEach(function(q){var H=q.split(":"),O=H.shift().trim();if(O){var At=H.join(":").trim();g.append(O,At)}}),g}T.call(k.prototype);function ae(h,g){g||(g={}),this.type="default",this.status=g.status===void 0?200:g.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in g?g.statusText:"OK",this.headers=new p(g.headers),this.url=g.url||"",this._initBody(h)}T.call(ae.prototype),ae.prototype.clone=function(){return new ae(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new p(this.headers),url:this.url})},ae.error=function(){var h=new ae(null,{status:0,statusText:""});return h.type="error",h};var Ms=[301,302,303,307,308];ae.redirect=function(h,g){if(Ms.indexOf(g)===-1)throw new RangeError("Invalid status code");return new ae(null,{status:g,headers:{location:h}})},o.DOMException=s.DOMException;try{new o.DOMException}catch{o.DOMException=function(g,w){this.message=g,this.name=w;var q=Error(g);this.stack=q.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function Rn(h,g){return new Promise(function(w,q){var H=new k(h,g);if(H.signal&&H.signal.aborted)return q(new o.DOMException("Aborted","AbortError"));var O=new XMLHttpRequest;function At(){O.abort()}O.onload=function(){var ot={status:O.status,statusText:O.statusText,headers:Ys(O.getAllResponseHeaders()||"")};ot.url="responseURL"in O?O.responseURL:ot.headers.get("X-Request-URL");var xn="response"in O?O.response:O.responseText;w(new ae(xn,ot))},O.onerror=function(){q(new TypeError("Network request failed"))},O.ontimeout=function(){q(new TypeError("Network request failed"))},O.onabort=function(){q(new o.DOMException("Aborted","AbortError"))},O.open(H.method,H.url,!0),H.credentials==="include"?O.withCredentials=!0:H.credentials==="omit"&&(O.withCredentials=!1),"responseType"in O&&a.blob&&(O.responseType="blob"),H.headers.forEach(function(ot,xn){O.setRequestHeader(xn,ot)}),H.signal&&(H.signal.addEventListener("abort",At),O.onreadystatechange=function(){O.readyState===4&&H.signal.removeEventListener("abort",At)}),O.send(typeof H._bodyInit>"u"?null:H._bodyInit)})}return Rn.polyfill=!0,s.fetch||(s.fetch=Rn,s.Headers=p,s.Request=k,s.Response=ae),o.Headers=p,o.Request=k,o.Response=ae,o.fetch=Rn,Object.defineProperty(o,"__esModule",{value:!0}),o})({})})(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var i=r;e=i.fetch,e.default=i.fetch,e.fetch=i.fetch,e.Headers=i.Headers,e.Request=i.Request,e.Response=i.Response,n.exports=e})(yt,yt.exports);const _r=xo(yt.exports),dn=Fs({__proto__:null,default:_r},[yt.exports]);var Oo=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(l){try{u(r.next(l))}catch(d){o(d)}}function c(l){try{u(r.throw(l))}catch(d){o(d)}}function u(l){l.done?s(l.value):i(l.value).then(a,c)}u((r=r.apply(n,e||[])).next())})};class Io{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.allowEmpty=e.allowEmpty,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=_r:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}then(e,t){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const r=this.fetch;let i=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(s=>Oo(this,void 0,void 0,function*(){var o,a,c;let u=null,l=null,d=null,_=s.status,f=s.statusText;if(s.ok){if(this.method!=="HEAD"){const S=yield s.text();S===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?l=S:l=JSON.parse(S))}const b=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),y=(a=s.headers.get("content-range"))===null||a===void 0?void 0:a.split("/");b&&y&&y.length>1&&(d=parseInt(y[1]))}else{const b=yield s.text();try{u=JSON.parse(b)}catch{u={message:b}}if(u&&this.allowEmpty&&((c=u==null?void 0:u.details)===null||c===void 0?void 0:c.includes("Results contain 0 rows"))&&(u=null,_=200,f="OK"),u&&this.shouldThrowOnError)throw u}return{error:u,data:l,count:d,status:_,statusText:f}}));return this.shouldThrowOnError||(i=i.catch(s=>({error:{message:`FetchError: ${s.message}`,details:"",hint:"",code:s.code||""},data:null,count:null,status:0,statusText:""}))),i.then(e,t)}}class Do extends Io{select(e){let t=!1;const r=(e!=null?e:"*").split("").map(i=>/\s/.test(i)&&!t?"":(i==='"'&&(t=!t),i)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:t=!0,nullsFirst:r,foreignTable:i}={}){const s=i?`${i}.order`:"order",o=this.url.searchParams.get(s);return this.url.searchParams.set(s,`${o?`${o},`:""}${e}.${t?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t}={}){const r=typeof t>"u"?"limit":`${t}.limit`;return this.url.searchParams.set(r,`${e}`),this}range(e,t,{foreignTable:r}={}){const i=typeof r>"u"?"offset":`${r}.offset`,s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(s,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.headers.Accept="application/vnd.pgrst.object+json",this.allowEmpty=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:i=!1,wal:s=!1,format:o="text"}={}){const a=[e?"analyze":null,t?"verbose":null,r?"settings":null,i?"buffers":null,s?"wal":null].filter(Boolean).join("|"),c=this.headers.Accept;return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${c}"; options=${a};`,o==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}class He extends Do{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const r=t.map(i=>typeof i=="string"&&new RegExp("[,()]").test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:r,type:i}={}){let s="";i==="plain"?s="pl":i==="phrase"?s="ph":i==="websearch"&&(s="w");const o=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${s}fts${o}.${t}`),this}match(e){return Object.entries(e).forEach(([t,r])=>{this.url.searchParams.append(t,`eq.${r}`)}),this}not(e,t,r){return this.url.searchParams.append(e,`not.${t}.${r}`),this}or(e,{foreignTable:t}={}){const r=t?`${t}.or`:"or";return this.url.searchParams.append(r,`(${e})`),this}filter(e,t,r){return this.url.searchParams.append(e,`${t}.${r}`),this}}class No{constructor(e,{headers:t={},schema:r,fetch:i}){this.url=e,this.headers=t,this.schema=r,this.fetch=i}select(e,{head:t=!1,count:r}={}){const i=t?"HEAD":"GET";let s=!1;const o=(e!=null?e:"*").split("").map(a=>/\s/.test(a)&&!s?"":(a==='"'&&(s=!s),a)).join("");return this.url.searchParams.set("select",o),r&&(this.headers.Prefer=`count=${r}`),new He({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:t}={}){const r="POST",i=[],s=e;if(t&&i.push(`count=${t}`),this.headers.Prefer&&i.unshift(this.headers.Prefer),this.headers.Prefer=i.join(","),Array.isArray(e)){const o=e.reduce((a,c)=>a.concat(Object.keys(c)),[]);if(o.length>0){const a=[...new Set(o)].map(c=>`"${c}"`);this.url.searchParams.set("columns",a.join(","))}}return new He({method:r,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:t,ignoreDuplicates:r=!1,count:i}={}){const s="POST",o=[`resolution=${r?"ignore":"merge"}-duplicates`];t!==void 0&&this.url.searchParams.set("on_conflict",t);const a=e;return i&&o.push(`count=${i}`),this.headers.Prefer&&o.unshift(this.headers.Prefer),this.headers.Prefer=o.join(","),new He({method:s,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:this.fetch,allowEmpty:!1})}update(e,{count:t}={}){const r="PATCH",i=[],s=e;return t&&i.push(`count=${t}`),this.headers.Prefer&&i.unshift(this.headers.Prefer),this.headers.Prefer=i.join(","),new He({method:r,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const t="DELETE",r=[];return e&&r.push(`count=${e}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new He({method:t,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}const Ao="1.1.0",$o={"X-Client-Info":`postgrest-js/${Ao}`};class jo{constructor(e,{headers:t={},schema:r,fetch:i}={}){this.url=e,this.headers=Object.assign(Object.assign({},$o),t),this.schema=r,this.fetch=i}from(e){const t=new URL(`${this.url}/${e}`);return new No(t,{headers:Object.assign({},this.headers),schema:this.schema,fetch:this.fetch})}rpc(e,t={},{head:r=!1,count:i}={}){let s;const o=new URL(`${this.url}/rpc/${e}`);let a;r?(s="HEAD",Object.entries(t).forEach(([u,l])=>{o.searchParams.append(u,`${l}`)})):(s="POST",a=t);const c=Object.assign({},this.headers);return i&&(c.Prefer=`count=${i}`),new He({method:s,url:o,headers:c,schema:this.schema,body:a,fetch:this.fetch,allowEmpty:!1})}}var In,Fr;function Uo(){if(Fr)return In;Fr=1;var n=function(){if(typeof self=="object"&&self)return self;if(typeof window=="object"&&window)return window;throw new Error("Unable to resolve global `this`")};return In=function(){if(this)return this;if(typeof globalThis=="object"&&globalThis)return globalThis;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch{return n()}try{return __global__||n()}finally{delete Object.prototype.__global__}}(),In}const Po="websocket",Bo="Websocket Client & Server Library implementing the WebSocket protocol as specified in RFC 6455.",Co=["websocket","websockets","socket","networking","comet","push","RFC-6455","realtime","server","client"],Lo="Brian McKelvey <theturtle32@gmail.com> (https://github.com/theturtle32)",Go=["I\xF1aki Baz Castillo <ibc@aliax.net> (http://dev.sipdoc.net)"],Yo="1.0.34",Mo={type:"git",url:"https://github.com/theturtle32/WebSocket-Node.git"},Fo="https://github.com/theturtle32/WebSocket-Node",Ho={node:">=4.0.0"},zo={bufferutil:"^4.0.1",debug:"^2.2.0","es5-ext":"^0.10.50","typedarray-to-buffer":"^3.1.5","utf-8-validate":"^5.0.2",yaeti:"^0.0.6"},qo={"buffer-equal":"^1.0.0",gulp:"^4.0.2","gulp-jshint":"^2.0.4","jshint-stylish":"^2.2.1",jshint:"^2.0.0",tape:"^4.9.1"},Jo={verbose:!1},Wo={test:"tape test/unit/*.js",gulp:"gulp"},Vo="index",Ko={lib:"./lib"},Xo="lib/browser.js",Qo="Apache-2.0",Zo={name:Po,description:Bo,keywords:Co,author:Lo,contributors:Go,version:Yo,repository:Mo,homepage:Fo,engines:Ho,dependencies:zo,devDependencies:qo,config:Jo,scripts:Wo,main:Vo,directories:Ko,browser:Xo,license:Qo};var ea=Zo.version,Ie;if(typeof globalThis=="object")Ie=globalThis;else try{Ie=Uo()}catch{}finally{if(!Ie&&typeof window<"u"&&(Ie=window),!Ie)throw new Error("Could not determine global this")}var bt=Ie.WebSocket||Ie.MozWebSocket,ta=ea;function Gi(n,e){var t;return e?t=new bt(n,e):t=new bt(n),t}bt&&["CONNECTING","OPEN","CLOSING","CLOSED"].forEach(function(n){Object.defineProperty(Gi,n,{get:function(){return bt[n]}})});var na={w3cwebsocket:bt?Gi:null,version:ta};const ra="2.1.0",ia={"X-Client-Info":`realtime-js/${ra}`},sa="1.0.0",Yi=1e4,oa=1e3;var dt;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(dt||(dt={}));var Z;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(Z||(Z={}));var ie;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(ie||(ie={}));var Yn;(function(n){n.websocket="websocket"})(Yn||(Yn={}));var De;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(De||(De={}));class Mi{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}class aa{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,t,r)}_decodeBroadcast(e,t,r){const i=t.getUint8(1),s=t.getUint8(2);let o=this.HEADER_LENGTH+2;const a=r.decode(e.slice(o,o+i));o=o+i;const c=r.decode(e.slice(o,o+s));o=o+s;const u=JSON.parse(r.decode(e.slice(o,e.byteLength)));return{ref:null,topic:a,event:c,payload:u}}}class Dn{constructor(e,t,r={},i=Yi){this.channel=e,this.event=t,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null,this.rateLimited=!1}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){if(this._hasReceived("timeout"))return;this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()})==="rate limited"&&(this.rateLimited=!0)}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){!this.refEvent||this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Hr;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(Hr||(Hr={}));class ht{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:s,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=ht.syncState(this.state,i,s,o),this.pendingDiffs.forEach(c=>{this.state=ht.syncDiff(this.state,c,s,o)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},i=>{const{onJoin:s,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=ht.syncDiff(this.state,i,s,o),a())}),this.onJoin((i,s,o)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:s,newPresences:o})}),this.onLeave((i,s,o)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:s,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,r,i){const s=this.cloneDeep(e),o=this.transformState(t),a={},c={};return this.map(s,(u,l)=>{o[u]||(c[u]=l)}),this.map(o,(u,l)=>{const d=s[u];if(d){const _=l.map(y=>y.presence_ref),f=d.map(y=>y.presence_ref),p=l.filter(y=>f.indexOf(y.presence_ref)<0),b=d.filter(y=>_.indexOf(y.presence_ref)<0);p.length>0&&(a[u]=p),b.length>0&&(c[u]=b)}else a[u]=l}),this.syncDiff(s,{joins:a,leaves:c},r,i)}static syncDiff(e,t,r,i){const{joins:s,leaves:o}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(s,(a,c)=>{var u;const l=(u=e[a])!==null&&u!==void 0?u:[];if(e[a]=this.cloneDeep(c),l.length>0){const d=e[a].map(f=>f.presence_ref),_=l.filter(f=>d.indexOf(f.presence_ref)<0);e[a].unshift(..._)}r(a,l,c)}),this.map(o,(a,c)=>{let u=e[a];if(!u)return;const l=c.map(d=>d.presence_ref);u=u.filter(d=>l.indexOf(d.presence_ref)<0),e[a]=u,i(a,u,c),u.length===0&&delete e[a]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,r)=>{const i=e[r];return"metas"in i?t[r]=i.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):t[r]=i,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var D;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(D||(D={}));const zr=(n,e,t={})=>{var r;const i=(r=t.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((s,o)=>(s[o]=ca(o,n,e,i),s),{})},ca=(n,e,t,r)=>{const i=e.find(a=>a.name===n),s=i==null?void 0:i.type,o=t[n];return s&&!r.includes(s)?Fi(s,o):Mn(o)},Fi=(n,e)=>{if(n.charAt(0)==="_"){const t=n.slice(1,n.length);return ha(e,t)}switch(n){case D.bool:return ua(e);case D.float4:case D.float8:case D.int2:case D.int4:case D.int8:case D.numeric:case D.oid:return la(e);case D.json:case D.jsonb:return da(e);case D.timestamp:return fa(e);case D.abstime:case D.date:case D.daterange:case D.int4range:case D.int8range:case D.money:case D.reltime:case D.text:case D.time:case D.timestamptz:case D.timetz:case D.tsrange:case D.tstzrange:return Mn(e);default:return Mn(e)}},Mn=n=>n,ua=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},la=n=>{if(typeof n=="string"){const e=parseFloat(n);if(!Number.isNaN(e))return e}return n},da=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(e){return console.log(`JSON parse error: ${e}`),n}return n},ha=(n,e)=>{if(typeof n!="string")return n;const t=n.length-1,r=n[t];if(n[0]==="{"&&r==="}"){let s;const o=n.slice(1,t);try{s=JSON.parse("["+o+"]")}catch{s=o?o.split(","):[]}return s.map(a=>Fi(e,a))}return n},fa=n=>typeof n=="string"?n.replace(" ","T"):n;var qr=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(l){try{u(r.next(l))}catch(d){o(d)}}function c(l){try{u(r.throw(l))}catch(d){o(d)}}function u(l){l.done?s(l.value):i(l.value).then(a,c)}u((r=r.apply(n,e||[])).next())})},Jr;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(Jr||(Jr={}));var Wr;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes"})(Wr||(Wr={}));var Vr;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(Vr||(Vr={}));class mr{constructor(e,t={config:{}},r){this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=Z.closed,this.joinedOnce=!1,this.pushBuffer=[],this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""}},t.config),this.timeout=this.socket.timeout,this.joinPush=new Dn(this,ie.join,this.params,this.timeout),this.rejoinTimer=new Mi(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Z.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Z.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=Z.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{!this._isJoining()||(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Z.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ie.reply,{},(i,s)=>{this._trigger(this._replyEventName(s),i)}),this.presence=new ht(this)}subscribe(e,t=this.timeout){var r,i;if(this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:s,presence:o}}=this.params;this._onError(u=>e&&e("CHANNEL_ERROR",u)),this._onClose(()=>e&&e("CLOSED"));const a={},c={broadcast:s,presence:o,postgres_changes:(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(u=>u.filter))!==null&&i!==void 0?i:[]};this.socket.accessToken&&(a.access_token=this.socket.accessToken),this.updateJoinPayload(Object.assign({config:c},a)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",({postgres_changes:u})=>{var l;if(this.socket.accessToken&&this.socket.setAuth(this.socket.accessToken),u===void 0){e&&e("SUBSCRIBED");return}else{const d=this.bindings.postgres_changes,_=(l=d==null?void 0:d.length)!==null&&l!==void 0?l:0,f=[];for(let p=0;p<_;p++){const b=d[p],{filter:{event:y,schema:S,table:G,filter:F}}=b,E=u&&u[p];if(E&&E.event===y&&E.schema===S&&E.table===G&&E.filter===F)f.push(Object.assign(Object.assign({},b),{id:E.id}));else{this.unsubscribe(),e&&e("CHANNEL_ERROR",new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=f,e&&e("SUBSCRIBED");return}}).receive("error",u=>{e&&e("CHANNEL_ERROR",new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{e&&e("TIMED_OUT")})}return this}presenceState(){return this.presence.state}track(e,t={}){return qr(this,void 0,void 0,function*(){return yield this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)})}untrack(e={}){return qr(this,void 0,void 0,function*(){return yield this.send({type:"presence",event:"untrack"},e)})}on(e,t,r){return this._on(e,t,r)}send(e,t={}){return new Promise(r=>{var i,s,o;const a=this._push(e.type,e,t.timeout||this.timeout);a.rateLimited&&r("rate limited"),e.type==="broadcast"&&!(!((o=(s=(i=this.params)===null||i===void 0?void 0:i.config)===null||s===void 0?void 0:s.broadcast)===null||o===void 0)&&o.ack)&&r("ok"),a.receive("ok",()=>r("ok")),a.receive("timeout",()=>r("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Z.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ie.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(r=>{const i=new Dn(this,ie.leave,{},e);i.receive("ok",()=>{t(),r("ok")}).receive("timeout",()=>{t(),r("timed out")}).receive("error",()=>{r("error")}),i.send(),this._canPush()||i.trigger("ok",{})})}_push(e,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new Dn(this,e,t,r);return this._canPush()?i.send():(i.startTimeout(),this.pushBuffer.push(i)),i}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var i,s;const o=e.toLocaleLowerCase(),{close:a,error:c,leave:u,join:l}=ie;if(r&&[a,c,u,l].indexOf(o)>=0&&r!==this._joinRef())return;let _=this._onMessage(o,t,r);if(t&&!_)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(f=>{var p,b,y;return((p=f.filter)===null||p===void 0?void 0:p.event)==="*"||((y=(b=f.filter)===null||b===void 0?void 0:b.event)===null||y===void 0?void 0:y.toLocaleLowerCase())===o}).map(f=>f.callback(_,r)):(s=this.bindings[o])===null||s===void 0||s.filter(f=>{var p,b,y,S,G,F;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in f){const E=f.id,T=(p=f.filter)===null||p===void 0?void 0:p.event;return E&&((b=t.ids)===null||b===void 0?void 0:b.includes(E))&&(T==="*"||(T==null?void 0:T.toLocaleLowerCase())===((y=t.data)===null||y===void 0?void 0:y.type.toLocaleLowerCase()))}else{const E=(G=(S=f==null?void 0:f.filter)===null||S===void 0?void 0:S.event)===null||G===void 0?void 0:G.toLocaleLowerCase();return E==="*"||E===((F=t==null?void 0:t.event)===null||F===void 0?void 0:F.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===o}).map(f=>{if(typeof _=="object"&&"ids"in _){const p=_.data,{schema:b,table:y,commit_timestamp:S,type:G,errors:F}=p;_=Object.assign(Object.assign({},{schema:b,table:y,commit_timestamp:S,eventType:G,new:{},old:{},errors:F}),this._getPayloadRecords(p))}f.callback(_,r)})}_isClosed(){return this.state===Z.closed}_isJoined(){return this.state===Z.joined}_isJoining(){return this.state===Z.joining}_isLeaving(){return this.state===Z.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,r){const i=e.toLocaleLowerCase(),s={type:i,filter:t,callback:r};return this.bindings[i]?this.bindings[i].push(s):this.bindings[i]=[s],this}_off(e,t){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(i=>{var s;return!(((s=i.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===r&&mr.isEqual(i.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(ie.close,{},e)}_onError(e){this._on(ie.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Z.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=zr(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=zr(e.columns,e.old_record)),t}}var pa=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(l){try{u(r.next(l))}catch(d){o(d)}}function c(l){try{u(r.throw(l))}catch(d){o(d)}}function u(l){l.done?s(l.value):i(l.value).then(a,c)}u((r=r.apply(n,e||[])).next())})};const _a=()=>{};class Hi{constructor(e,t){var r;this.accessToken=null,this.channels=[],this.endPoint="",this.headers=ia,this.params={},this.timeout=Yi,this.transport=na.w3cwebsocket,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=_a,this.conn=null,this.sendBuffer=[],this.serializer=new aa,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.eventsPerSecondLimitMs=100,this.inThrottle=!1,this.endPoint=`${e}/${Yn.websocket}`,t!=null&&t.params&&(this.params=t.params),t!=null&&t.headers&&(this.headers=Object.assign(Object.assign({},this.headers),t.headers)),t!=null&&t.timeout&&(this.timeout=t.timeout),t!=null&&t.logger&&(this.logger=t.logger),t!=null&&t.transport&&(this.transport=t.transport),t!=null&&t.heartbeatIntervalMs&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const i=(r=t==null?void 0:t.params)===null||r===void 0?void 0:r.eventsPerSecond;i&&(this.eventsPerSecondLimitMs=Math.floor(1e3/i)),this.reconnectAfterMs=t!=null&&t.reconnectAfterMs?t.reconnectAfterMs:s=>[1e3,2e3,5e3,1e4][s-1]||1e4,this.encode=t!=null&&t.encode?t.encode:(s,o)=>o(JSON.stringify(s)),this.decode=t!=null&&t.decode?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Mi(()=>pa(this,void 0,void 0,function*(){this.disconnect(),this.connect()}),this.reconnectAfterMs)}connect(){this.conn||(this.conn=new this.transport(this._endPointURL(),[],null,this.headers),this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e)))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,t!=null?t:""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}removeChannel(e){return e.unsubscribe().then(t=>(this.channels.length===0&&this.disconnect(),t))}removeAllChannels(){return Promise.all(this.channels.map(e=>e.unsubscribe())).then(e=>(this.disconnect(),e))}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case dt.connecting:return De.Connecting;case dt.open:return De.Open;case dt.closing:return De.Closing;default:return De.Closed}}isConnected(){return this.connectionState()===De.Open}channel(e,t={config:{}}){this.isConnected()||this.connect();const r=new mr(`realtime:${e}`,t,this);return this.channels.push(r),r}push(e){const{topic:t,event:r,payload:i,ref:s}=e;let o=()=>{this.encode(e,a=>{var c;(c=this.conn)===null||c===void 0||c.send(a)})};if(this.log("push",`${t} ${r} (${s})`,i),this.isConnected())if(["broadcast","presence","postgres_changes"].includes(r)){if(this._throttle(o)())return"rate limited"}else o();else this.sendBuffer.push(o)}setAuth(e){this.accessToken=e,this.channels.forEach(t=>{e&&t.updateJoinPayload({access_token:e}),t.joinedOnce&&t._isJoined()&&t._push(ie.access_token,{access_token:e})})}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t._joinRef()!==e._joinRef())}_endPointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:sa}))}_onConnMessage(e){this.decode(e.data,t=>{let{topic:r,event:i,payload:s,ref:o}=t;(o&&o===this.pendingHeartbeatRef||i===(s==null?void 0:s.type))&&(this.pendingHeartbeatRef=null),this.log("receive",`${s.status||""} ${r} ${i} ${o&&"("+o+")"||""}`,s),this.channels.filter(a=>a._isMember(r)).forEach(a=>a._trigger(i,s,o)),this.stateChangeCallbacks.message.forEach(a=>a(t))})}_onConnOpen(){this.log("transport",`connected to ${this._endPointURL()}`),this._flushSendBuffer(),this.reconnectTimer.reset(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this._sendHeartbeat(),this.heartbeatIntervalMs),this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(ie.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const r=e.match(/\?/)?"&":"?",i=new URLSearchParams(t);return`${e}${r}${i}`}_flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_sendHeartbeat(){var e;if(!!this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(oa,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth(this.accessToken)}}_throttle(e,t=this.eventsPerSecondLimitMs){return()=>this.inThrottle?!0:(e(),this.inThrottle=!0,setTimeout(()=>{this.inThrottle=!1},t),!1)}}class zi extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Q(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}class ma extends zi{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class ga extends zi{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var qi=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(l){try{u(r.next(l))}catch(d){o(d)}}function c(l){try{u(r.throw(l))}catch(d){o(d)}}function u(l){l.done?s(l.value):i(l.value).then(a,c)}u((r=r.apply(n,e||[])).next())})};const Ji=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>qi(void 0,void 0,void 0,function*(){return yield(yield X(()=>Promise.resolve().then(()=>dn),void 0)).fetch(...t)}):e=fetch,(...t)=>e(...t)},ya=()=>qi(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield X(()=>Promise.resolve().then(()=>dn),void 0)).Response:Response});var rt=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(l){try{u(r.next(l))}catch(d){o(d)}}function c(l){try{u(r.throw(l))}catch(d){o(d)}}function u(l){l.done?s(l.value):i(l.value).then(a,c)}u((r=r.apply(n,e||[])).next())})};const Kr=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),ba=(n,e)=>rt(void 0,void 0,void 0,function*(){const t=yield ya();n instanceof t?n.json().then(r=>{e(new ma(Kr(r),n.status||500))}):e(new ga(Kr(n),n))}),va=(n,e,t,r)=>{const i={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),t))};function hn(n,e,t,r,i,s){return rt(this,void 0,void 0,function*(){return new Promise((o,a)=>{n(t,va(e,r,i,s)).then(c=>{if(!c.ok)throw c;return r!=null&&r.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>ba(c,a))})})}function Fn(n,e,t,r){return rt(this,void 0,void 0,function*(){return hn(n,"GET",e,t,r)})}function Ne(n,e,t,r,i){return rt(this,void 0,void 0,function*(){return hn(n,"POST",e,r,i,t)})}function Ea(n,e,t,r,i){return rt(this,void 0,void 0,function*(){return hn(n,"PUT",e,r,i,t)})}function Wi(n,e,t,r,i){return rt(this,void 0,void 0,function*(){return hn(n,"DELETE",e,r,i,t)})}var ue=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(l){try{u(r.next(l))}catch(d){o(d)}}function c(l){try{u(r.throw(l))}catch(d){o(d)}}function u(l){l.done?s(l.value):i(l.value).then(a,c)}u((r=r.apply(n,e||[])).next())})};const Ta={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},wa={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Sa{constructor(e,t={},r,i){this.url=e,this.headers=t,this.bucketId=r,this.fetch=Ji(i)}uploadOrUpdate(e,t,r,i){return ue(this,void 0,void 0,function*(){try{let s;const o=Object.assign(Object.assign({},wa),i),a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});typeof Blob<"u"&&r instanceof Blob?(s=new FormData,s.append("cacheControl",o.cacheControl),s.append("",r)):typeof FormData<"u"&&r instanceof FormData?(s=r,s.append("cacheControl",o.cacheControl)):(s=r,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType);const c=this._removeEmptyFolders(t),u=this._getFinalPath(c),l=yield this.fetch(`${this.url}/object/${u}`,{method:e,body:s,headers:a});return l.ok?{data:{path:c},error:null}:{data:null,error:yield l.json()}}catch(s){if(Q(s))return{data:null,error:s};throw s}})}upload(e,t,r){return ue(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,r)})}update(e,t,r){return ue(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,r)})}move(e,t){return ue(this,void 0,void 0,function*(){try{return{data:yield Ne(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t},{headers:this.headers}),error:null}}catch(r){if(Q(r))return{data:null,error:r};throw r}})}copy(e,t){return ue(this,void 0,void 0,function*(){try{return{data:{path:(yield Ne(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t},{headers:this.headers})).Key},error:null}}catch(r){if(Q(r))return{data:null,error:r};throw r}})}createSignedUrl(e,t,r){return ue(this,void 0,void 0,function*(){try{const i=this._getFinalPath(e);let s=yield Ne(this.fetch,`${this.url}/object/sign/${i}`,{expiresIn:t},{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${o}`)},{data:s,error:null}}catch(i){if(Q(i))return{data:null,error:i};throw i}})}createSignedUrls(e,t,r){return ue(this,void 0,void 0,function*(){try{const i=yield Ne(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),s=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${s}`):null})),error:null}}catch(i){if(Q(i))return{data:null,error:i};throw i}})}download(e){return ue(this,void 0,void 0,function*(){try{const t=this._getFinalPath(e);return{data:yield(yield Fn(this.fetch,`${this.url}/object/${t}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(t){if(Q(t))return{data:null,error:t};throw t}})}getPublicUrl(e,t){const r=this._getFinalPath(e),i=t!=null&&t.download?`?download=${t.download===!0?"":t.download}`:"";return{data:{publicUrl:encodeURI(`${this.url}/object/public/${r}${i}`)}}}remove(e){return ue(this,void 0,void 0,function*(){try{return{data:yield Wi(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(Q(t))return{data:null,error:t};throw t}})}list(e,t,r){return ue(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},Ta),t),{prefix:e||""});return{data:yield Ne(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(Q(i))return{data:null,error:i};throw i}})}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}}const ka="2.0.0",Ra={"X-Client-Info":`storage-js/${ka}`};var Me=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(l){try{u(r.next(l))}catch(d){o(d)}}function c(l){try{u(r.throw(l))}catch(d){o(d)}}function u(l){l.done?s(l.value):i(l.value).then(a,c)}u((r=r.apply(n,e||[])).next())})};class xa{constructor(e,t={},r){this.url=e,this.headers=Object.assign(Object.assign({},Ra),t),this.fetch=Ji(r)}listBuckets(){return Me(this,void 0,void 0,function*(){try{return{data:yield Fn(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Q(e))return{data:null,error:e};throw e}})}getBucket(e){return Me(this,void 0,void 0,function*(){try{return{data:yield Fn(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(Q(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return Me(this,void 0,void 0,function*(){try{return{data:yield Ne(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public},{headers:this.headers}),error:null}}catch(r){if(Q(r))return{data:null,error:r};throw r}})}updateBucket(e,t){return Me(this,void 0,void 0,function*(){try{return{data:yield Ea(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public},{headers:this.headers}),error:null}}catch(r){if(Q(r))return{data:null,error:r};throw r}})}emptyBucket(e){return Me(this,void 0,void 0,function*(){try{return{data:yield Ne(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(Q(t))return{data:null,error:t};throw t}})}deleteBucket(e){return Me(this,void 0,void 0,function*(){try{return{data:yield Wi(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(Q(t))return{data:null,error:t};throw t}})}}class Oa extends xa{constructor(e,t={},r){super(e,t,r)}from(e){return new Sa(this.url,this.headers,e,this.fetch)}}const Ia="2.0.5",Da={"X-Client-Info":`supabase-js/${Ia}`};var Na=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(l){try{u(r.next(l))}catch(d){o(d)}}function c(l){try{u(r.throw(l))}catch(d){o(d)}}function u(l){l.done?s(l.value):i(l.value).then(a,c)}u((r=r.apply(n,e||[])).next())})};const Aa=n=>{let e;return n?e=n:typeof fetch>"u"?e=_r:e=fetch,(...t)=>e(...t)},$a=()=>typeof Headers>"u"?yt.exports.Headers:Headers,ja=(n,e,t)=>{const r=Aa(t),i=$a();return(s,o)=>Na(void 0,void 0,void 0,function*(){var a;const c=(a=yield e())!==null&&a!==void 0?a:n;let u=new i(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",n),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),r(s,Object.assign(Object.assign({},o),{headers:u}))})};function Ua(n){return n.replace(/\/$/,"")}function Pa(n,e){const{db:t,auth:r,realtime:i,global:s}=n,{db:o,auth:a,realtime:c,global:u}=e;return{db:Object.assign(Object.assign({},o),t),auth:Object.assign(Object.assign({},a),r),realtime:Object.assign(Object.assign({},c),i),global:Object.assign(Object.assign({},u),s)}}var fn=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(l){try{u(r.next(l))}catch(d){o(d)}}function c(l){try{u(r.throw(l))}catch(d){o(d)}}function u(l){l.done?s(l.value):i(l.value).then(a,c)}u((r=r.apply(n,e||[])).next())})};function Ba(n){return Math.round(Date.now()/1e3)+n}function Ca(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){const e=Math.random()*16|0;return(n=="x"?e:e&3|8).toString(16)})}const je=()=>typeof window<"u";function ne(n,e){var t;e||(e=((t=window==null?void 0:window.location)===null||t===void 0?void 0:t.href)||""),n=n.replace(/[\[\]]/g,"\\$&");const r=new RegExp("[?&#]"+n+"(=([^&#]*)|&|#|$)"),i=r.exec(e);return i?i[2]?decodeURIComponent(i[2].replace(/\+/g," ")):"":null}const Vi=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>fn(void 0,void 0,void 0,function*(){return yield(yield X(()=>Promise.resolve().then(()=>dn),void 0)).fetch(...t)}):e=fetch,(...t)=>e(...t)},La=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",Ga=(n,e,t)=>fn(void 0,void 0,void 0,function*(){yield n.setItem(e,JSON.stringify(t))}),Xr=(n,e)=>fn(void 0,void 0,void 0,function*(){const t=yield n.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}}),Ya=(n,e)=>fn(void 0,void 0,void 0,function*(){yield n.removeItem(e)}),Ma=n=>{try{return atob(n.replace(/[-]/g,"+").replace(/[_]/g,"/"))}catch(e){if(e instanceof ReferenceError)return Buffer.from(n,"base64").toString("utf-8");throw e}};class pn{constructor(){this.promise=new pn.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}pn.promiseConstructor=Promise;function Fa(n){const e=n.split(".");if(e.length!==3)throw new Error("JWT is not valid: not a JWT structure");const t=e[1];return JSON.parse(Ma(t))}class gr extends Error{constructor(e){super(e),this.__isAuthError=!0,this.name="AuthError"}}function U(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class Ha extends gr{constructor(e,t){super(e),this.name="AuthApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Ki extends gr{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class _n extends gr{constructor(e,t,r){super(e),this.name=t,this.status=r}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class ct extends _n{constructor(){super("Auth session missing!","AuthSessionMissingError",400)}}class Nn extends _n{constructor(e){super(e,"AuthInvalidCredentialsError",400)}}class pe extends _n{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class en extends _n{constructor(e,t){super(e,"AuthRetryableFetchError",t)}}var yr=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(l){try{u(r.next(l))}catch(d){o(d)}}function c(l){try{u(r.throw(l))}catch(d){o(d)}}function u(l){l.done?s(l.value):i(l.value).then(a,c)}u((r=r.apply(n,e||[])).next())})},za=globalThis&&globalThis.__rest||function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};const Ut=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),qa=(n,e)=>yr(void 0,void 0,void 0,function*(){const t=[502,503,504];La(n)?t.includes(n.status)?e(new en(Ut(n),n.status)):n.json().then(r=>{e(new Ha(Ut(r),n.status||500))}).catch(r=>{e(new Ki(Ut(r),r))}):e(new en(Ut(n),0))}),Ja=(n,e,t,r)=>{const i={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),t))};function A(n,e,t,r){var i,s;return yr(this,void 0,void 0,function*(){const o=(i=r==null?void 0:r.headers)!==null&&i!==void 0?i:{};r!=null&&r.jwt&&(o.Authorization=`Bearer ${r.jwt}`);const a=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(a.redirect_to=r.redirectTo);const c=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",u=yield Wa(n,e,t+c,{headers:o,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(u):{data:Object.assign({},u),error:null}})}function Wa(n,e,t,r,i,s){return yr(this,void 0,void 0,function*(){return new Promise((o,a)=>{n(t,Ja(e,r,i,s)).then(c=>{if(!c.ok)throw c;return r!=null&&r.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>qa(c,a))})})}function Fe(n){var e;let t=null;Ka(n)&&(t=Object.assign({},n),t.expires_at=Ba(n.expires_in));const r=(e=n.user)!==null&&e!==void 0?e:n;return{data:{session:t,user:r},error:null}}function Ae(n){var e;return{data:{user:(e=n.user)!==null&&e!==void 0?e:n},error:null}}function Va(n){const{action_link:e,email_otp:t,hashed_token:r,redirect_to:i,verification_type:s}=n,o=za(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:t,hashed_token:r,redirect_to:i,verification_type:s},c=Object.assign({},o);return{data:{properties:a,user:c},error:null}}function Ka(n){return n.access_token&&n.refresh_token&&n.expires_in}var le=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(l){try{u(r.next(l))}catch(d){o(d)}}function c(l){try{u(r.throw(l))}catch(d){o(d)}}function u(l){l.done?s(l.value):i(l.value).then(a,c)}u((r=r.apply(n,e||[])).next())})},Xa=globalThis&&globalThis.__rest||function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};class Qa{constructor({url:e="",headers:t={},fetch:r}){this.url=e,this.headers=t,this.fetch=Vi(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}signOut(e){return le(this,void 0,void 0,function*(){try{return yield A(this.fetch,"POST",`${this.url}/logout`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(t){if(U(t))return{data:null,error:t};throw t}})}inviteUserByEmail(e,t={}){return le(this,void 0,void 0,function*(){try{return yield A(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:Ae})}catch(r){if(U(r))return{data:{user:null},error:r};throw r}})}generateLink(e){return le(this,void 0,void 0,function*(){try{const{options:t}=e,r=Xa(e,["options"]),i=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(i.new_email=r==null?void 0:r.newEmail,delete i.newEmail),yield A(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:Va,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(U(t))return{data:{properties:null,user:null},error:t};throw t}})}createUser(e){return le(this,void 0,void 0,function*(){try{return yield A(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Ae})}catch(t){if(U(t))return{data:{user:null},error:t};throw t}})}listUsers(){return le(this,void 0,void 0,function*(){try{const{data:e,error:t}=yield A(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers});if(t)throw t;return{data:Object.assign({},e),error:null}}catch(e){if(U(e))return{data:{users:[]},error:e};throw e}})}getUserById(e){return le(this,void 0,void 0,function*(){try{return yield A(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Ae})}catch(t){if(U(t))return{data:{user:null},error:t};throw t}})}updateUserById(e,t){return le(this,void 0,void 0,function*(){try{return yield A(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:Ae})}catch(r){if(U(r))return{data:{user:null},error:r};throw r}})}deleteUser(e){return le(this,void 0,void 0,function*(){try{return yield A(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Ae})}catch(t){if(U(t))return{data:{user:null},error:t};throw t}})}_listFactors(e){return le(this,void 0,void 0,function*(){try{return{data:yield A(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers}),error:null}}catch(t){if(U(t))return{data:null,error:t};throw t}})}_deleteFactor(e){return le(this,void 0,void 0,function*(){try{return{data:yield A(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(U(t))return{data:null,error:t};throw t}})}}const Za="2.2.2",ec="http://localhost:9999",tc="supabase.auth.token",nc={"X-Client-Info":`gotrue-js/${Za}`},Pt=10,Bt={MAX_RETRIES:10,RETRY_INTERVAL:2},rc={getItem:n=>je()?globalThis.localStorage.getItem(n):null,setItem:(n,e)=>{!je()||globalThis.localStorage.setItem(n,e)},removeItem:n=>{!je()||globalThis.localStorage.removeItem(n)}};function ic(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}var x=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(l){try{u(r.next(l))}catch(d){o(d)}}function c(l){try{u(r.throw(l))}catch(d){o(d)}}function u(l){l.done?s(l.value):i(l.value).then(a,c)}u((r=r.apply(n,e||[])).next())})};ic();const sc={url:ec,storageKey:tc,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:nc};class oc{constructor(e){this.stateChangeEmitters=new Map,this.networkRetries=0,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0;const t=Object.assign(Object.assign({},sc),e);this.inMemorySession=null,this.storageKey=t.storageKey,this.autoRefreshToken=t.autoRefreshToken,this.persistSession=t.persistSession,this.storage=t.storage||rc,this.admin=new Qa({url:t.url,headers:t.headers,fetch:t.fetch}),this.url=t.url,this.headers=t.headers,this.fetch=Vi(t.fetch),this.detectSessionInUrl=t.detectSessionInUrl,this.initialize(),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)}}initialize(){return this.initializePromise||(this.initializePromise=this._initialize()),this.initializePromise}_initialize(){return x(this,void 0,void 0,function*(){if(this.initializePromise)return this.initializePromise;try{if(this.detectSessionInUrl&&this._isImplicitGrantFlow()){const{data:e,error:t}=yield this._getSessionFromUrl();if(t)return yield this._removeSession(),{error:t};const{session:r,redirectType:i}=e;return yield this._saveSession(r),this._notifyAllSubscribers("SIGNED_IN",r),i==="recovery"&&this._notifyAllSubscribers("PASSWORD_RECOVERY",r),{error:null}}return yield this._recoverAndRefresh(),{error:null}}catch(e){return U(e)?{error:e}:{error:new Ki("Unexpected error during initialization",e)}}finally{this._handleVisibilityChange()}})}signUp(e){var t,r;return x(this,void 0,void 0,function*(){try{yield this._removeSession();let i;if("email"in e){const{email:u,password:l,options:d}=e;i=yield A(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:d==null?void 0:d.emailRedirectTo,body:{email:u,password:l,data:(t=d==null?void 0:d.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}},xform:Fe})}else if("phone"in e){const{phone:u,password:l,options:d}=e;i=yield A(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:l,data:(r=d==null?void 0:d.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}},xform:Fe})}else throw new Nn("You must provide either an email or phone number and a password");const{data:s,error:o}=i;if(o||!s)return{data:{user:null,session:null},error:o};const a=s.session,c=s.user;return s.session&&(yield this._saveSession(s.session),this._notifyAllSubscribers("SIGNED_IN",a)),{data:{user:c,session:a},error:null}}catch(i){if(U(i))return{data:{user:null,session:null},error:i};throw i}})}signInWithPassword(e){var t,r;return x(this,void 0,void 0,function*(){try{yield this._removeSession();let i;if("email"in e){const{email:a,password:c,options:u}=e;i=yield A(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:c,data:(t=u==null?void 0:u.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:Fe})}else if("phone"in e){const{phone:a,password:c,options:u}=e;i=yield A(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:c,data:(r=u==null?void 0:u.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:Fe})}else throw new Nn("You must provide either an email or phone number and a password");const{data:s,error:o}=i;return o||!s?{data:{user:null,session:null},error:o}:(s.session&&(yield this._saveSession(s.session),this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:s,error:o})}catch(i){if(U(i))return{data:{user:null,session:null},error:i};throw i}})}signInWithOAuth(e){var t,r,i;return x(this,void 0,void 0,function*(){return yield this._removeSession(),this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams})})}signInWithOtp(e){var t,r,i,s;return x(this,void 0,void 0,function*(){try{if(yield this._removeSession(),"email"in e){const{email:o,options:a}=e,{error:c}=yield A(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:o,data:(t=a==null?void 0:a.data)!==null&&t!==void 0?t:{},create_user:(r=a==null?void 0:a.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:c}}if("phone"in e){const{phone:o,options:a}=e,{error:c}=yield A(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:o,data:(i=a==null?void 0:a.data)!==null&&i!==void 0?i:{},create_user:(s=a==null?void 0:a.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return{data:{user:null,session:null},error:c}}throw new Nn("You must provide either an email or phone number.")}catch(o){if(U(o))return{data:{user:null,session:null},error:o};throw o}})}verifyOtp(e){var t,r;return x(this,void 0,void 0,function*(){try{yield this._removeSession();const{data:i,error:s}=yield A(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:(t=e.options)===null||t===void 0?void 0:t.captchaToken}}),redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,xform:Fe});if(s)throw s;if(!i)throw"An error occurred on token verification.";const o=i.session,a=i.user;return o!=null&&o.access_token&&(yield this._saveSession(o),this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:a,session:o},error:null}}catch(i){if(U(i))return{data:{user:null,session:null},error:i};throw i}})}getSession(){return x(this,void 0,void 0,function*(){yield this.initializePromise;let e=null;if(this.persistSession){const o=yield Xr(this.storage,this.storageKey);o!==null&&(this._isValidSession(o)?e=o:yield this._removeSession())}else e=this.inMemorySession;if(!e)return{data:{session:null},error:null};const t=Math.round(Date.now()/1e3);if(!(e.expires_at?e.expires_at<=t+Pt:!1))return{data:{session:e},error:null};const{session:i,error:s}=yield this._callRefreshToken(e.refresh_token);return s?{data:{session:null},error:s}:{data:{session:i},error:null}})}getUser(e){var t,r;return x(this,void 0,void 0,function*(){try{if(!e){const{data:i,error:s}=yield this.getSession();if(s)throw s;e=(r=(t=i.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:void 0}return yield A(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Ae})}catch(i){if(U(i))return{data:{user:null},error:i};throw i}})}updateUser(e){return x(this,void 0,void 0,function*(){try{const{data:t,error:r}=yield this.getSession();if(r)throw r;if(!t.session)throw new ct;const i=t.session,{data:s,error:o}=yield A(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,body:e,jwt:i.access_token,xform:Ae});if(o)throw o;return i.user=s.user,yield this._saveSession(i),this._notifyAllSubscribers("USER_UPDATED",i),{data:{user:i.user},error:null}}catch(t){if(U(t))return{data:{user:null},error:t};throw t}})}_decodeJWT(e){return Fa(e)}setSession(e){return x(this,void 0,void 0,function*(){try{const t=Date.now()/1e3;let r=t,i=!0,s=null;if(e.access_token&&e.access_token.split(".")[1]){const o=this._decodeJWT(e.access_token);o.exp&&(r=o.exp,i=r<=t)}if(i){if(!e.refresh_token)throw new ct;const{data:o,error:a}=yield this._refreshAccessToken(e.refresh_token);if(a)return{data:{session:null,user:null},error:a};if(!o.session)return{data:{session:null,user:null},error:null};s=o.session}else{const{data:o,error:a}=yield this.getUser(e.access_token);if(a)throw a;s={access_token:e.access_token,refresh_token:e.refresh_token,user:o.user,token_type:"bearer",expires_in:r-t,expires_at:r}}return yield this._saveSession(s),this._notifyAllSubscribers("TOKEN_REFRESHED",s),{data:{session:s,user:s.user},error:null}}catch(t){if(U(t))return{data:{session:null,user:null},error:t};throw t}})}refreshSession(e){var t;return x(this,void 0,void 0,function*(){try{if(!e){const{data:s,error:o}=yield this.getSession();if(o)throw o;e=(t=s.session)!==null&&t!==void 0?t:void 0}if(!(e!=null&&e.refresh_token))throw new ct;const{session:r,error:i}=yield this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:r?{data:{user:r.user,session:r},error:null}:{data:{user:null,session:null},error:null}}catch(r){if(U(r))return{data:{user:null,session:null},error:r};throw r}})}_getSessionFromUrl(){return x(this,void 0,void 0,function*(){try{if(!je())throw new pe("No browser detected.");if(!this._isImplicitGrantFlow())throw new pe("Not a valid implicit grant flow url.");const e=ne("error_description");if(e){const b=ne("error_code");if(!b)throw new pe("No error_code detected.");const y=ne("error");throw y?new pe(e,{error:y,code:b}):new pe("No error detected.")}const t=ne("provider_token"),r=ne("provider_refresh_token"),i=ne("access_token");if(!i)throw new pe("No access_token detected.");const s=ne("expires_in");if(!s)throw new pe("No expires_in detected.");const o=ne("refresh_token");if(!o)throw new pe("No refresh_token detected.");const a=ne("token_type");if(!a)throw new pe("No token_type detected.");const u=Math.round(Date.now()/1e3)+parseInt(s),{data:l,error:d}=yield this.getUser(i);if(d)throw d;const _=l.user,f={provider_token:t,provider_refresh_token:r,access_token:i,expires_in:parseInt(s),expires_at:u,refresh_token:o,token_type:a,user:_},p=ne("type");return window.location.hash="",{data:{session:f,redirectType:p},error:null}}catch(e){if(U(e))return{data:{session:null,redirectType:null},error:e};throw e}})}_isImplicitGrantFlow(){return je()&&(Boolean(ne("access_token"))||Boolean(ne("error_description")))}signOut(){var e;return x(this,void 0,void 0,function*(){const{data:t,error:r}=yield this.getSession();if(r)return{error:r};const i=(e=t.session)===null||e===void 0?void 0:e.access_token;if(i){const{error:s}=yield this.admin.signOut(i);if(s)return{error:s}}return yield this._removeSession(),this._notifyAllSubscribers("SIGNED_OUT",null),{error:null}})}onAuthStateChange(e){const t=Ca(),r={id:t,callback:e,unsubscribe:()=>{this.stateChangeEmitters.delete(t)}};return this.stateChangeEmitters.set(t,r),{data:{subscription:r}}}resetPasswordForEmail(e,t={}){return x(this,void 0,void 0,function*(){try{return yield A(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(r){if(U(r))return{data:null,error:r};throw r}})}_refreshAccessToken(e){return x(this,void 0,void 0,function*(){try{return yield A(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Fe})}catch(t){if(U(t))return{data:{session:null,user:null},error:t};throw t}})}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}_handleProviderSignIn(e,t={}){const r=this._getUrlForProvider(e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return je()&&(window.location.href=r),{data:{provider:e,url:r},error:null}}_recoverAndRefresh(){var e;return x(this,void 0,void 0,function*(){try{const t=yield Xr(this.storage,this.storageKey);if(!this._isValidSession(t)){t!==null&&(yield this._removeSession());return}const r=Math.round(Date.now()/1e3);if(((e=t.expires_at)!==null&&e!==void 0?e:1/0)<r+Pt)if(this.autoRefreshToken&&t.refresh_token){this.networkRetries++;const{error:i}=yield this._callRefreshToken(t.refresh_token);if(i){if(console.log(i.message),i instanceof en&&this.networkRetries<Bt.MAX_RETRIES){this.refreshTokenTimer&&clearTimeout(this.refreshTokenTimer),this.refreshTokenTimer=setTimeout(()=>this._recoverAndRefresh(),Math.pow(Bt.RETRY_INTERVAL,this.networkRetries)*100);return}yield this._removeSession()}this.networkRetries=0}else yield this._removeSession();else this.persistSession&&(yield this._saveSession(t)),this._notifyAllSubscribers("SIGNED_IN",t)}catch(t){console.error(t);return}})}_callRefreshToken(e){var t,r;return x(this,void 0,void 0,function*(){if(this.refreshingDeferred)return this.refreshingDeferred.promise;try{if(this.refreshingDeferred=new pn,!e)throw new ct;const{data:i,error:s}=yield this._refreshAccessToken(e);if(s)throw s;if(!i.session)throw new ct;yield this._saveSession(i.session),this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const o={session:i.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(i){if(U(i)){const s={session:null,error:i};return(t=this.refreshingDeferred)===null||t===void 0||t.resolve(s),s}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null}})}_notifyAllSubscribers(e,t){this.stateChangeEmitters.forEach(r=>r.callback(e,t))}_saveSession(e){return x(this,void 0,void 0,function*(){this.persistSession||(this.inMemorySession=e);const t=e.expires_at;if(t){const r=Math.round(Date.now()/1e3),i=t-r,s=i>Pt?Pt:.5;this._startAutoRefreshToken((i-s)*1e3)}this.persistSession&&e.expires_at&&(yield this._persistSession(e))})}_persistSession(e){return Ga(this.storage,this.storageKey,e)}_removeSession(){return x(this,void 0,void 0,function*(){this.persistSession?yield Ya(this.storage,this.storageKey):this.inMemorySession=null,this.refreshTokenTimer&&clearTimeout(this.refreshTokenTimer)})}_startAutoRefreshToken(e){this.refreshTokenTimer&&clearTimeout(this.refreshTokenTimer),!(e<=0||!this.autoRefreshToken)&&(this.refreshTokenTimer=setTimeout(()=>x(this,void 0,void 0,function*(){this.networkRetries++;const{data:{session:t},error:r}=yield this.getSession();if(!r&&t){const{error:i}=yield this._callRefreshToken(t.refresh_token);i||(this.networkRetries=0),i instanceof en&&this.networkRetries<Bt.MAX_RETRIES&&this._startAutoRefreshToken(Math.pow(Bt.RETRY_INTERVAL,this.networkRetries)*100)}}),e),typeof this.refreshTokenTimer.unref=="function"&&this.refreshTokenTimer.unref())}_handleVisibilityChange(){if(!je()||!(window!=null&&window.addEventListener))return!1;try{window==null||window.addEventListener("visibilitychange",()=>x(this,void 0,void 0,function*(){document.visibilityState==="visible"&&(yield this.initializePromise,yield this._recoverAndRefresh())}))}catch(e){console.error("_handleVisibilityChange",e)}}_getUrlForProvider(e,t){const r=[`provider=${encodeURIComponent(e)}`];if(t!=null&&t.redirectTo&&r.push(`redirect_to=${encodeURIComponent(t.redirectTo)}`),t!=null&&t.scopes&&r.push(`scopes=${encodeURIComponent(t.scopes)}`),t!=null&&t.queryParams){const i=new URLSearchParams(t.queryParams);r.push(i.toString())}return`${this.url}/authorize?${r.join("&")}`}_unenroll(e){var t;return x(this,void 0,void 0,function*(){const{data:r,error:i}=yield this.getSession();return i?{data:null,error:i}:yield A(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(t=r==null?void 0:r.session)===null||t===void 0?void 0:t.access_token})})}_enroll(e){var t,r;return x(this,void 0,void 0,function*(){const{data:i,error:s}=yield this.getSession();if(s)return{data:null,error:s};const{data:o,error:a}=yield A(this.fetch,"POST",`${this.url}/factors`,{body:{friendly_name:e.friendlyName,factor_type:e.factorType,issuer:e.issuer},headers:this.headers,jwt:(t=i==null?void 0:i.session)===null||t===void 0?void 0:t.access_token});return a?{data:null,error:a}:(!((r=o==null?void 0:o.totp)===null||r===void 0)&&r.qr_code&&(o.totp.qr_code=`data:image/svg+xml;utf-8,${o.totp.qr_code}`),{data:o,error:null})})}_verify(e){var t;return x(this,void 0,void 0,function*(){const{data:r,error:i}=yield this.getSession();if(i)return{data:null,error:i};const{data:s,error:o}=yield A(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(t=r==null?void 0:r.session)===null||t===void 0?void 0:t.access_token});return o?{data:null,error:o}:(yield this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+s.expires_in},s)),this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",s),{data:s,error:o})})}_challenge(e){var t;return x(this,void 0,void 0,function*(){const{data:r,error:i}=yield this.getSession();return i?{data:null,error:i}:yield A(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{headers:this.headers,jwt:(t=r==null?void 0:r.session)===null||t===void 0?void 0:t.access_token})})}_challengeAndVerify(e){return x(this,void 0,void 0,function*(){const{data:t,error:r}=yield this._challenge({factorId:e.factorId});return r?{data:null,error:r}:yield this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})})}_listFactors(){return x(this,void 0,void 0,function*(){const{data:{user:e},error:t}=yield this.getUser();if(t)return{data:null,error:t};const r=(e==null?void 0:e.factors)||[],i=r.filter(s=>s.factor_type==="totp"&&s.status==="verified");return{data:{all:r,totp:i},error:null}})}_getAuthenticatorAssuranceLevel(){var e,t;return x(this,void 0,void 0,function*(){const{data:{session:r},error:i}=yield this.getSession();if(i)return{data:null,error:i};if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const s=this._decodeJWT(r.access_token);let o=null;s.aal&&(o=s.aal);let a=o;((t=(e=r.user.factors)===null||e===void 0?void 0:e.filter(l=>l.status==="verified"))!==null&&t!==void 0?t:[]).length>0&&(a="aal2");const u=s.amr||[];return{data:{currentLevel:o,nextLevel:a,currentAuthenticationMethods:u},error:null}})}}class ac extends oc{constructor(e){super(e)}}var cc=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(l){try{u(r.next(l))}catch(d){o(d)}}function c(l){try{u(r.throw(l))}catch(d){o(d)}}function u(l){l.done?s(l.value):i(l.value).then(a,c)}u((r=r.apply(n,e||[])).next())})};const uc={headers:Da},lc={schema:"public"},dc={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0},hc={};class fc{constructor(e,t,r){var i,s,o,a,c,u,l,d;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const _=Ua(e);if(this.realtimeUrl=`${_}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${_}/auth/v1`,this.storageUrl=`${_}/storage/v1`,_.match(/(supabase\.co)|(supabase\.in)/)){const S=_.split(".");this.functionsUrl=`${S[0]}.functions.${S[1]}.${S[2]}`}else this.functionsUrl=`${_}/functions/v1`;const p=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,b={db:lc,realtime:hc,auth:Object.assign(Object.assign({},dc),{storageKey:p}),global:uc},y=Pa(r!=null?r:{},b);this.storageKey=(s=(i=y.auth)===null||i===void 0?void 0:i.storageKey)!==null&&s!==void 0?s:"",this.headers=(a=(o=y.global)===null||o===void 0?void 0:o.headers)!==null&&a!==void 0?a:{},this.auth=this._initSupabaseAuthClient((c=y.auth)!==null&&c!==void 0?c:{},this.headers,(u=y.global)===null||u===void 0?void 0:u.fetch),this.fetch=ja(t,this._getAccessToken.bind(this),(l=y.global)===null||l===void 0?void 0:l.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers},y.realtime)),this.rest=new jo(`${_}/rest/v1`,{headers:this.headers,schema:(d=y.db)===null||d===void 0?void 0:d.schema,fetch:this.fetch}),this._listenForAuthEvents()}get functions(){return new ko(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Oa(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}rpc(e,t={},r){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return cc(this,void 0,void 0,function*(){const{data:r}=yield this.auth.getSession();return(t=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:i,storageKey:s},o,a){const c={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new ac({url:this.authUrl,headers:Object.assign(Object.assign({},c),o),storageKey:s,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:i,fetch:a})}_initRealtimeClient(e){return new Hi(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,r)=>{this._handleTokenChanged(t,r==null?void 0:r.access_token,"CLIENT")})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==t?(this.realtime.setAuth(t!=null?t:null),this.changedAccessToken=t):(e==="SIGNED_OUT"||e==="USER_DELETED")&&(this.realtime.setAuth(this.supabaseKey),r=="STORAGE"&&this.auth.signOut())}}const Xi=(n,e,t)=>new fc(n,e,t),pc=n=>{try{return atob(n.replace(/[-]/g,"+").replace(/[_]/g,"/"))}catch(e){if(e instanceof ReferenceError)return Buffer.from(n,"base64").toString("utf-8");throw e}};function _c(n){const e=n.split(".");if(e.length!==3)throw new Error("JWT is not valid: not a JWT structure");const t=e[1];return JSON.parse(pc(t))}const tn=Xi("https://api.dev.puzzad.com","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.ewogICAgInJvbGUiOiAiYW5vbiIsCiAgICAiaXNzIjogInN1cGFiYXNlIiwKICAgICJpYXQiOiAxNjY3NjA2NDAwLAogICAgImV4cCI6IDE4MjUzNzI4MDAKfQ.HUV6jIRiQTwDfVgPZQhC0Rb2u_YRNI5G3AA9jt5NWf0");async function Eh(n){return Xi("https://api.dev.puzzad.com","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.ewogICAgInJvbGUiOiAiYW5vbiIsCiAgICAiaXNzIjogInN1cGFiYXNlIiwKICAgICJpYXQiOiAxNjY3NjA2NDAwLAogICAgImV4cCI6IDE4MjUzNzI4MDAKfQ.HUV6jIRiQTwDfVgPZQhC0Rb2u_YRNI5G3AA9jt5NWf0",{global:{headers:{Authorization:`Bearer ${await Qi(n)}`}}})}async function Th(n){const e=new Hi("https://api.dev.puzzad.com/realtime/v1".replace(/^http/i,"ws"),{params:{apikey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.ewogICAgInJvbGUiOiAiYW5vbiIsCiAgICAiaXNzIjogInN1cGFiYXNlIiwKICAgICJpYXQiOiAxNjY3NjA2NDAwLAogICAgImV4cCI6IDE4MjUzNzI4MDAKfQ.HUV6jIRiQTwDfVgPZQhC0Rb2u_YRNI5G3AA9jt5NWf0"}});return e.setAuth(await Qi(n)),e}async function Qi(n){const e=localStorage.getItem("puzzad-game-token");return mc(e,n)?e:await tn.rpc("getteamcodejwt",{teamcode:n}).then(({data:t,error:r})=>{if(r)throw r;return t.toString()}).then(t=>(localStorage.setItem("puzzad-game-token",t),t))}function mc(n,e){if(!n)return!1;const t=_c(n);return t.exp>Date.now()/1e3+60*60&&t.code==e}const gc=dr(null,n=>(tn.auth.getSession().then(t=>{n(t.data.session)}),tn.auth.onAuthStateChange(async({},t)=>{n(t)}).data.subscription.unsubscribe)),Zi=async()=>{let{error:n}=await tn.auth.signOut();n||await _o("/")};function Qr(n){let e,t,r,i,s,o,a,c,u,l;function d(p,b){var y;return(y=p[3])!=null&&y.user?yc:bc}let _=d(n),f=_(n);return{c(){e=C("div"),e.innerHTML='<span class="hamburger svelte-1j4yrnd"></span>',t=ge(),r=C("dialog"),i=C("ul"),s=C("li"),s.innerHTML='<a href="/#/Adventures" class="svelte-1j4yrnd">Browse adventures</a>',a=ge(),c=C("ul"),f.c(),I(e,"class","hamburgercontainer svelte-1j4yrnd"),I(s,"class","svelte-1j4yrnd"),I(i,"class",o=Jt(n[2]?"dropdown":"")+" svelte-1j4yrnd"),I(c,"class","svelte-1j4yrnd"),r.open=n[2],I(r,"class","svelte-1j4yrnd")},m(p,b){M(p,e,b),M(p,t,b),M(p,r,b),ee(r,i),ee(i,s),ee(r,a),ee(r,c),f.m(c,null),u||(l=[Wt(e,"click",n[4]),Wt(r,"click",n[5])],u=!0)},p(p,b){b&4&&o!==(o=Jt(p[2]?"dropdown":"")+" svelte-1j4yrnd")&&I(i,"class",o),_===(_=d(p))&&f?f.p(p,b):(f.d(1),f=_(p),f&&(f.c(),f.m(c,null))),b&4&&(r.open=p[2])},d(p){p&&P(e),p&&P(t),p&&P(r),f.d(),u=!1,Oe(l)}}}function yc(n){let e,t,r,i,s,o;return{c(){e=C("li"),e.innerHTML='<a href="/#/games" class="svelte-1j4yrnd">My Games</a>',t=ge(),r=C("li"),i=C("a"),i.textContent="Logout",I(e,"class","svelte-1j4yrnd"),I(i,"class","svelte-1j4yrnd"),I(r,"class","svelte-1j4yrnd")},m(a,c){M(a,e,c),M(a,t,c),M(a,r,c),ee(r,i),s||(o=Wt(i,"click",Zi()),s=!0)},p:Y,d(a){a&&P(e),a&&P(t),a&&P(r),s=!1,o()}}}function bc(n){let e;return{c(){e=C("li"),e.innerHTML='<a href="#/login" class="svelte-1j4yrnd">Login</a>',I(e,"class","svelte-1j4yrnd")},m(t,r){M(t,e,r)},p:Y,d(t){t&&P(e)}}}function Zr(n){let e,t,r,i,s;function o(u,l){var d;return(d=u[3])!=null&&d.user?vc:Ec}let a=o(n),c=a(n);return{c(){e=C("ul"),t=C("li"),t.innerHTML='<a href="/#/Adventures" class="svelte-1j4yrnd">Browse adventures</a>',i=ge(),s=C("ul"),c.c(),I(t,"class","svelte-1j4yrnd"),I(e,"class",r=Jt(n[2]?"dropdown":"")+" svelte-1j4yrnd"),I(s,"class","svelte-1j4yrnd")},m(u,l){M(u,e,l),ee(e,t),M(u,i,l),M(u,s,l),c.m(s,null)},p(u,l){l&4&&r!==(r=Jt(u[2]?"dropdown":"")+" svelte-1j4yrnd")&&I(e,"class",r),a===(a=o(u))&&c?c.p(u,l):(c.d(1),c=a(u),c&&(c.c(),c.m(s,null)))},d(u){u&&P(e),u&&P(i),u&&P(s),c.d()}}}function vc(n){let e,t,r,i,s,o;return{c(){e=C("li"),e.innerHTML='<a href="/#/games" class="svelte-1j4yrnd">My Games</a>',t=ge(),r=C("li"),i=C("a"),i.textContent="Logout",I(e,"class","svelte-1j4yrnd"),I(i,"href",""),I(i,"class","svelte-1j4yrnd"),I(r,"class","svelte-1j4yrnd")},m(a,c){M(a,e,c),M(a,t,c),M(a,r,c),ee(r,i),s||(o=Wt(i,"click",Xs(Zi)),s=!0)},p:Y,d(a){a&&P(e),a&&P(t),a&&P(r),s=!1,o()}}}function Ec(n){let e;return{c(){e=C("li"),e.innerHTML='<a href="#/login" class="svelte-1j4yrnd">Login</a>',I(e,"class","svelte-1j4yrnd")},m(t,r){M(t,e,r)},p:Y,d(t){t&&P(e)}}}function Tc(n){let e,t,r,i,s,o,a,c=n[1]&&Qr(n),u=!n[1]&&Zr(n);return{c(){e=C("nav"),t=C("h1"),r=C("a"),i=C("img"),o=ge(),c&&c.c(),a=ge(),u&&u.c(),I(i,"alt","Puzzad"),Cr(i.src,s=n[0])||I(i,"src",s),I(i,"class","svelte-1j4yrnd"),I(r,"href","/#/"),I(r,"class","svelte-1j4yrnd"),I(t,"class","svelte-1j4yrnd"),I(e,"class","svelte-1j4yrnd")},m(l,d){M(l,e,d),ee(e,t),ee(t,r),ee(r,i),ee(e,o),c&&c.m(e,null),ee(e,a),u&&u.m(e,null)},p(l,[d]){d&1&&!Cr(i.src,s=l[0])&&I(i,"src",s),l[1]?c?c.p(l,d):(c=Qr(l),c.c(),c.m(e,a)):c&&(c.d(1),c=null),l[1]?u&&(u.d(1),u=null):u?u.p(l,d):(u=Zr(l),u.c(),u.m(e,null))},i:Y,o:Y,d(l){l&&P(e),c&&c.d(),u&&u.d()}}}function wc(n,e,t){let r;Ri(n,gc,u=>t(3,r=u));let{logo:i}=e,s=!1;s=window.matchMedia("(max-width: 480px)").matches,window.matchMedia("(max-width: 480px)").addEventListener("change",u=>t(1,s=u.matches));let o=!1;const a=()=>t(2,o=!o),c=()=>t(2,o=!1);return n.$$set=u=>{"logo"in u&&t(0,i=u.logo)},[i,s,o,r,a,c]}class Sc extends lr{constructor(e){super(),ur(this,e,wc,Tc,cn,{logo:0})}}const kc=hr("Puzzad: Home");function Rc(n){let e,t,r,i,s,o;return document.title=e=n[0],r=new Sc({props:{logo:uo}}),s=new yo({props:{routes:n[1]}}),{c(){t=ge(),Qe(r.$$.fragment),i=ge(),Qe(s.$$.fragment)},m(a,c){M(a,t,c),Be(r,a,c),M(a,i,c),Be(s,a,c),o=!0},p(a,[c]){(!o||c&1)&&e!==(e=a[0])&&(document.title=e)},i(a){o||(oe(r.$$.fragment,a),oe(s.$$.fragment,a),o=!0)},o(a){he(r.$$.fragment,a),he(s.$$.fragment,a),o=!1},d(a){a&&P(t),Ce(r,a),a&&P(i),Ce(s,a)}}}function xc(n,e,t){let r;Ri(n,kc,s=>t(0,r=s));const i={"/adventures":ce({asyncComponent:()=>X(()=>import("./Adventures.3b9b4675.js"),["assets/Adventures.3b9b4675.js","assets/AdventureBanner.937466e8.js","assets/AdventureLogo.2492d036.js","assets/AdventureBanner.9e611945.css","assets/Spinner.f8b392e5.js","assets/Spinner.35926623.css","assets/Error.32eefbd7.js","assets/Error.5a1be546.css"])}),"/adventure/:name":ce({asyncComponent:()=>X(()=>import("./Adventure.503463a6.js"),["assets/Adventure.503463a6.js","assets/Spinner.f8b392e5.js","assets/Spinner.35926623.css","assets/AdventureLogo.2492d036.js","assets/Error.32eefbd7.js","assets/Error.5a1be546.css"])}),"/games":ce({asyncComponent:()=>X(()=>import("./Games.9dfbefe0.js"),["assets/Games.9dfbefe0.js","assets/AdventureBanner.937466e8.js","assets/AdventureLogo.2492d036.js","assets/AdventureBanner.9e611945.css","assets/Spinner.f8b392e5.js","assets/Spinner.35926623.css","assets/RandomText.c5d920eb.js","assets/Error.32eefbd7.js","assets/Error.5a1be546.css","assets/Games.67733dea.css"])}),"/game/:code":ce({asyncComponent:()=>X(()=>import("./Game.0ff63609.js"),["assets/Game.0ff63609.js","assets/AdventureLogo.2492d036.js","assets/Spinner.f8b392e5.js","assets/Spinner.35926623.css","assets/Game.59f1822a.css"])}),"/game/:code/:puzzle":ce({asyncComponent:()=>X(()=>import("./Puzzle.44f8349c.js"),["assets/Puzzle.44f8349c.js","assets/RandomText.c5d920eb.js","assets/Spinner.f8b392e5.js","assets/Spinner.35926623.css","assets/FlatToast.580d3e3d.js","assets/FlatToast.1cb14486.css","assets/Error.32eefbd7.js","assets/Error.5a1be546.css","assets/Puzzle.38f2b4cb.css"])}),"/login":ce({props:{type:"login"},asyncComponent:()=>X(()=>import("./Auth.61b7f511.js"),["assets/Auth.61b7f511.js","assets/FlatToast.580d3e3d.js","assets/FlatToast.1cb14486.css"])}),"/logout":ce({props:{type:"logout"},asyncComponent:()=>X(()=>import("./Auth.61b7f511.js"),["assets/Auth.61b7f511.js","assets/FlatToast.580d3e3d.js","assets/FlatToast.1cb14486.css"])}),"/signup":ce({props:{type:"signup"},asyncComponent:()=>X(()=>import("./Auth.61b7f511.js"),["assets/Auth.61b7f511.js","assets/FlatToast.580d3e3d.js","assets/FlatToast.1cb14486.css"])}),"/":ce({asyncComponent:()=>X(()=>import("./Home.ce60d226.js"),["assets/Home.ce60d226.js","assets/Home.d44defa0.css"])}),"*":ce({asyncComponent:()=>X(()=>import("./NotFound.2f1777d3.js"),["assets/NotFound.2f1777d3.js","assets/NotFound.a3db53c1.css"])})};return[r,i]}class Oc extends lr{constructor(e){super(),ur(this,e,xc,Rc,cn,{})}}const es=Object.prototype.toString;function ts(n){switch(es.call(n)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return fe(n,Error)}}function it(n,e){return es.call(n)===`[object ${e}]`}function ns(n){return it(n,"ErrorEvent")}function ei(n){return it(n,"DOMError")}function Ic(n){return it(n,"DOMException")}function Le(n){return it(n,"String")}function rs(n){return n===null||typeof n!="object"&&typeof n!="function"}function Ze(n){return it(n,"Object")}function br(n){return typeof Event<"u"&&fe(n,Event)}function Dc(n){return typeof Element<"u"&&fe(n,Element)}function Nc(n){return it(n,"RegExp")}function vr(n){return Boolean(n&&n.then&&typeof n.then=="function")}function Ac(n){return Ze(n)&&"nativeEvent"in n&&"preventDefault"in n&&"stopPropagation"in n}function is(n){return typeof n=="number"&&n!==n}function fe(n,e){try{return n instanceof e}catch{return!1}}function Ct(n){return n&&n.Math==Math?n:void 0}const re=typeof globalThis=="object"&&Ct(globalThis)||typeof window=="object"&&Ct(window)||typeof self=="object"&&Ct(self)||typeof global=="object"&&Ct(global)||function(){return this}()||{};function mn(){return re}function Er(n,e,t){const r=t||re,i=r.__SENTRY__=r.__SENTRY__||{};return i[n]||(i[n]=e())}const zt=mn();function vt(n,e){try{let t=n;const r=5,i=80,s=[];let o=0,a=0;const c=" > ",u=c.length;let l;for(;t&&o++<r&&(l=$c(t,e),!(l==="html"||o>1&&a+s.length*u+l.length>=i));)s.push(l),a+=l.length,t=t.parentNode;return s.reverse().join(c)}catch{return"<unknown>"}}function $c(n,e){const t=n,r=[];let i,s,o,a,c;if(!t||!t.tagName)return"";r.push(t.tagName.toLowerCase());const u=e&&e.length?e.filter(d=>t.getAttribute(d)).map(d=>[d,t.getAttribute(d)]):null;if(u&&u.length)u.forEach(d=>{r.push(`[${d[0]}="${d[1]}"]`)});else if(t.id&&r.push(`#${t.id}`),i=t.className,i&&Le(i))for(s=i.split(/\s+/),c=0;c<s.length;c++)r.push(`.${s[c]}`);const l=["type","name","title","alt"];for(c=0;c<l.length;c++)o=l[c],a=t.getAttribute(o),a&&r.push(`[${o}="${a}"]`);return r.join("")}function jc(){try{return zt.document.location.href}catch{return""}}function ss(n){return zt.document&&zt.document.querySelector?zt.document.querySelector(n):null}class J extends Error{constructor(e,t="warn"){super(e),this.message=e,this.name=new.target.prototype.constructor.name,Object.setPrototypeOf(this,new.target.prototype),this.logLevel=t}}const Uc=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function Pc(n){return n==="http"||n==="https"}function Tr(n,e=!1){const{host:t,path:r,pass:i,port:s,projectId:o,protocol:a,publicKey:c}=n;return`${a}://${c}${e&&i?`:${i}`:""}@${t}${s?`:${s}`:""}/${r&&`${r}/`}${o}`}function Bc(n){const e=Uc.exec(n);if(!e)throw new J(`Invalid Sentry Dsn: ${n}`);const[t,r,i="",s,o="",a]=e.slice(1);let c="",u=a;const l=u.split("/");if(l.length>1&&(c=l.slice(0,-1).join("/"),u=l.pop()),u){const d=u.match(/^\d+/);d&&(u=d[0])}return os({host:s,pass:i,path:c,projectId:u,port:o,protocol:t,publicKey:r})}function os(n){return{protocol:n.protocol,publicKey:n.publicKey||"",pass:n.pass||"",host:n.host,port:n.port||"",path:n.path||"",projectId:n.projectId}}function Cc(n){if(!(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__))return;const{port:e,projectId:t,protocol:r}=n;if(["protocol","publicKey","host","projectId"].forEach(s=>{if(!n[s])throw new J(`Invalid Sentry Dsn: ${s} missing`)}),!t.match(/^\d+$/))throw new J(`Invalid Sentry Dsn: Invalid projectId ${t}`);if(!Pc(r))throw new J(`Invalid Sentry Dsn: Invalid protocol ${r}`);if(e&&isNaN(parseInt(e,10)))throw new J(`Invalid Sentry Dsn: Invalid port ${e}`);return!0}function Lc(n){const e=typeof n=="string"?Bc(n):os(n);return Cc(e),e}const Gc="Sentry Logger ",nn=["debug","info","warn","error","log","assert","trace"];function as(n){if(!("console"in re))return n();const e=re.console,t={};nn.forEach(r=>{const i=e[r]&&e[r].__sentry_original__;r in e&&i&&(t[r]=e[r],e[r]=i)});try{return n()}finally{Object.keys(t).forEach(r=>{e[r]=t[r]})}}function ti(){let n=!1;const e={enable:()=>{n=!0},disable:()=>{n=!1}};return typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__?nn.forEach(t=>{e[t]=(...r)=>{n&&as(()=>{re.console[t](`${Gc}[${t}]:`,...r)})}}):nn.forEach(t=>{e[t]=()=>{}}),e}let m;typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__?m=Er("logger",ti):m=ti();function ft(n,e=0){return typeof n!="string"||e===0||n.length<=e?n:`${n.substr(0,e)}...`}function ni(n,e){if(!Array.isArray(n))return"";const t=[];for(let r=0;r<n.length;r++){const i=n[r];try{t.push(String(i))}catch{t.push("[value cannot be serialized]")}}return t.join(e)}function gn(n,e){return Le(n)?Nc(e)?e.test(n):typeof e=="string"?n.indexOf(e)!==-1:!1:!1}function W(n,e,t){if(!(e in n))return;const r=n[e],i=t(r);if(typeof i=="function")try{cs(i,r)}catch{}n[e]=i}function wr(n,e,t){Object.defineProperty(n,e,{value:t,writable:!0,configurable:!0})}function cs(n,e){const t=e.prototype||{};n.prototype=e.prototype=t,wr(n,"__sentry_original__",e)}function Sr(n){return n.__sentry_original__}function Yc(n){return Object.keys(n).map(e=>`${encodeURIComponent(e)}=${encodeURIComponent(n[e])}`).join("&")}function us(n){if(ts(n))return{message:n.message,name:n.name,stack:n.stack,...ii(n)};if(br(n)){const e={type:n.type,target:ri(n.target),currentTarget:ri(n.currentTarget),...ii(n)};return typeof CustomEvent<"u"&&fe(n,CustomEvent)&&(e.detail=n.detail),e}else return n}function ri(n){try{return Dc(n)?vt(n):Object.prototype.toString.call(n)}catch{return"<unknown>"}}function ii(n){if(typeof n=="object"&&n!==null){const e={};for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e}else return{}}function Mc(n,e=40){const t=Object.keys(us(n));if(t.sort(),!t.length)return"[object has no keys]";if(t[0].length>=e)return ft(t[0],e);for(let r=t.length;r>0;r--){const i=t.slice(0,r).join(", ");if(!(i.length>e))return r===t.length?i:ft(i,e)}return""}function we(n){return Hn(n,new Map)}function Hn(n,e){if(Ze(n)){const t=e.get(n);if(t!==void 0)return t;const r={};e.set(n,r);for(const i of Object.keys(n))typeof n[i]<"u"&&(r[i]=Hn(n[i],e));return r}if(Array.isArray(n)){const t=e.get(n);if(t!==void 0)return t;const r=[];return e.set(n,r),n.forEach(i=>{r.push(Hn(i,e))}),r}return n}function $e(n,e){return n!=null?n:e()}function Fc(n){let e,t=n[0],r=1;for(;r<n.length;){const i=n[r],s=n[r+1];if(r+=2,(i==="optionalAccess"||i==="optionalCall")&&t==null)return;i==="access"||i==="optionalAccess"?(e=t,t=s(t)):(i==="call"||i==="optionalCall")&&(t=s((...o)=>t.call(e,...o)),e=void 0)}return t}const Hc=50;function ls(...n){const e=n.sort((t,r)=>t[0]-r[0]).map(t=>t[1]);return(t,r=0)=>{const i=[];for(const s of t.split(`
`).slice(r)){const o=s.replace(/\(error: (.*)\)/,"$1");for(const a of e){const c=a(o);if(c){i.push(c);break}}}return qc(i)}}function zc(n){return Array.isArray(n)?ls(...n):n}function qc(n){if(!n.length)return[];let e=n;const t=e[0].function||"",r=e[e.length-1].function||"";return(t.indexOf("captureMessage")!==-1||t.indexOf("captureException")!==-1)&&(e=e.slice(1)),r.indexOf("sentryWrapped")!==-1&&(e=e.slice(0,-1)),e.slice(0,Hc).map(i=>({...i,filename:i.filename||e[0].filename,function:i.function||"?"})).reverse()}const An="<anonymous>";function xe(n){try{return!n||typeof n!="function"?An:n.name||An}catch{return An}}const Ue=mn();function ds(){if(!("fetch"in Ue))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch{return!1}}function zn(n){return n&&/^function fetch\(\)\s+\{\s+\[native code\]\s+\}$/.test(n.toString())}function Jc(){if(!ds())return!1;if(zn(Ue.fetch))return!0;let n=!1;const e=Ue.document;if(e&&typeof e.createElement=="function")try{const t=e.createElement("iframe");t.hidden=!0,e.head.appendChild(t),t.contentWindow&&t.contentWindow.fetch&&(n=zn(t.contentWindow.fetch)),e.head.removeChild(t)}catch(t){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",t)}return n}function Wc(){const n=Ue.chrome,e=n&&n.app&&n.app.runtime,t="history"in Ue&&!!Ue.history.pushState&&!!Ue.history.replaceState;return!e&&t}const j=mn(),pt={},si={};function Vc(n){if(!si[n])switch(si[n]=!0,n){case"console":Kc();break;case"dom":su();break;case"xhr":eu();break;case"fetch":Xc();break;case"history":tu();break;case"error":ou();break;case"unhandledrejection":au();break;default:(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.warn("unknown instrumentation type:",n);return}}function te(n,e){pt[n]=pt[n]||[],pt[n].push(e),Vc(n)}function se(n,e){if(!(!n||!pt[n]))for(const t of pt[n]||[])try{t(e)}catch(r){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.error(`Error while triggering instrumentation handler.
Type: ${n}
Name: ${xe(t)}
Error:`,r)}}function Kc(){"console"in j&&nn.forEach(function(n){n in j.console&&W(j.console,n,function(e){return function(...t){se("console",{args:t,level:n}),e&&e.apply(j.console,t)}})})}function Xc(){!Jc()||W(j,"fetch",function(n){return function(...e){const t={args:e,fetchData:{method:Qc(e),url:Zc(e)},startTimestamp:Date.now()};return se("fetch",{...t}),n.apply(j,e).then(r=>(se("fetch",{...t,endTimestamp:Date.now(),response:r}),r),r=>{throw se("fetch",{...t,endTimestamp:Date.now(),error:r}),r})}})}function Qc(n=[]){return"Request"in j&&fe(n[0],Request)&&n[0].method?String(n[0].method).toUpperCase():n[1]&&n[1].method?String(n[1].method).toUpperCase():"GET"}function Zc(n=[]){return typeof n[0]=="string"?n[0]:"Request"in j&&fe(n[0],Request)?n[0].url:String(n[0])}function eu(){if(!("XMLHttpRequest"in j))return;const n=XMLHttpRequest.prototype;W(n,"open",function(e){return function(...t){const r=this,i=t[1],s=r.__sentry_xhr__={method:Le(t[0])?t[0].toUpperCase():t[0],url:t[1]};Le(i)&&s.method==="POST"&&i.match(/sentry_key/)&&(r.__sentry_own_request__=!0);const o=function(){if(r.readyState===4){try{s.status_code=r.status}catch{}se("xhr",{args:t,endTimestamp:Date.now(),startTimestamp:Date.now(),xhr:r})}};return"onreadystatechange"in r&&typeof r.onreadystatechange=="function"?W(r,"onreadystatechange",function(a){return function(...c){return o(),a.apply(r,c)}}):r.addEventListener("readystatechange",o),e.apply(r,t)}}),W(n,"send",function(e){return function(...t){return this.__sentry_xhr__&&t[0]!==void 0&&(this.__sentry_xhr__.body=t[0]),se("xhr",{args:t,startTimestamp:Date.now(),xhr:this}),e.apply(this,t)}})}let Lt;function tu(){if(!Wc())return;const n=j.onpopstate;j.onpopstate=function(...t){const r=j.location.href,i=Lt;if(Lt=r,se("history",{from:i,to:r}),n)try{return n.apply(this,t)}catch{}};function e(t){return function(...r){const i=r.length>2?r[2]:void 0;if(i){const s=Lt,o=String(i);Lt=o,se("history",{from:s,to:o})}return t.apply(this,r)}}W(j.history,"pushState",e),W(j.history,"replaceState",e)}const nu=1e3;let Gt,Yt;function ru(n,e){if(!n||n.type!==e.type)return!0;try{if(n.target!==e.target)return!0}catch{}return!1}function iu(n){if(n.type!=="keypress")return!1;try{const e=n.target;if(!e||!e.tagName)return!0;if(e.tagName==="INPUT"||e.tagName==="TEXTAREA"||e.isContentEditable)return!1}catch{}return!0}function oi(n,e=!1){return t=>{if(!t||Yt===t||iu(t))return;const r=t.type==="keypress"?"input":t.type;Gt===void 0?(n({event:t,name:r,global:e}),Yt=t):ru(Yt,t)&&(n({event:t,name:r,global:e}),Yt=t),clearTimeout(Gt),Gt=j.setTimeout(()=>{Gt=void 0},nu)}}function su(){if(!("document"in j))return;const n=se.bind(null,"dom"),e=oi(n,!0);j.document.addEventListener("click",e,!1),j.document.addEventListener("keypress",e,!1),["EventTarget","Node"].forEach(t=>{const r=j[t]&&j[t].prototype;!r||!r.hasOwnProperty||!r.hasOwnProperty("addEventListener")||(W(r,"addEventListener",function(i){return function(s,o,a){if(s==="click"||s=="keypress")try{const c=this,u=c.__sentry_instrumentation_handlers__=c.__sentry_instrumentation_handlers__||{},l=u[s]=u[s]||{refCount:0};if(!l.handler){const d=oi(n);l.handler=d,i.call(this,s,d,a)}l.refCount+=1}catch{}return i.call(this,s,o,a)}}),W(r,"removeEventListener",function(i){return function(s,o,a){if(s==="click"||s=="keypress")try{const c=this,u=c.__sentry_instrumentation_handlers__||{},l=u[s];l&&(l.refCount-=1,l.refCount<=0&&(i.call(this,s,l.handler,a),l.handler=void 0,delete u[s]),Object.keys(u).length===0&&delete c.__sentry_instrumentation_handlers__)}catch{}return i.call(this,s,o,a)}}))})}let $n=null;function ou(){$n=j.onerror,j.onerror=function(n,e,t,r,i){return se("error",{column:r,error:i,line:t,msg:n,url:e}),$n?$n.apply(this,arguments):!1}}let jn=null;function au(){jn=j.onunhandledrejection,j.onunhandledrejection=function(n){return se("unhandledrejection",n),jn?jn.apply(this,arguments):!0}}function cu(){const n=typeof WeakSet=="function",e=n?new WeakSet:[];function t(i){if(n)return e.has(i)?!0:(e.add(i),!1);for(let s=0;s<e.length;s++)if(e[s]===i)return!0;return e.push(i),!1}function r(i){if(n)e.delete(i);else for(let s=0;s<e.length;s++)if(e[s]===i){e.splice(s,1);break}}return[t,r]}function Se(){const n=re,e=n.crypto||n.msCrypto;if(e&&e.randomUUID)return e.randomUUID().replace(/-/g,"");const t=e&&e.getRandomValues?()=>e.getRandomValues(new Uint8Array(1))[0]:()=>Math.random()*16;return([1e7]+1e3+4e3+8e3+1e11).replace(/[018]/g,r=>(r^(t()&15)>>r/4).toString(16))}function hs(n){return n.exception&&n.exception.values?n.exception.values[0]:void 0}function Pe(n){const{message:e,event_id:t}=n;if(e)return e;const r=hs(n);return r?r.type&&r.value?`${r.type}: ${r.value}`:r.type||r.value||t||"<unknown>":t||"<unknown>"}function qn(n,e,t){const r=n.exception=n.exception||{},i=r.values=r.values||[],s=i[0]=i[0]||{};s.value||(s.value=e||""),s.type||(s.type=t||"Error")}function Et(n,e){const t=hs(n);if(!t)return;const r={type:"generic",handled:!0},i=t.mechanism;if(t.mechanism={...r,...i,...e},e&&"data"in e){const s={...i&&i.data,...e.data};t.mechanism.data=s}}function ai(n){if(n&&n.__sentry_captured__)return!0;try{wr(n,"__sentry_captured__",!0)}catch{}return!1}function fs(n){return Array.isArray(n)?n:[n]}function uu(){return typeof __SENTRY_BROWSER_BUNDLE__<"u"&&!!__SENTRY_BROWSER_BUNDLE__}function kr(){return!uu()&&Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]"}function Te(n,e){return n.require(e)}function lu(n){let e;try{e=Te(module,n)}catch{}try{const{cwd:t}=Te(module,"process");e=Te(module,`${t()}/node_modules/${n}`)}catch{}return e}function ye(n,e=1/0,t=1/0){try{return Jn("",n,e,t)}catch(r){return{ERROR:`**non-serializable** (${r})`}}}function ps(n,e=3,t=100*1024){const r=ye(n,e);return fu(r)>t?ps(n,e-1,t):r}function Jn(n,e,t=1/0,r=1/0,i=cu()){const[s,o]=i;if(e===null||["number","boolean","string"].includes(typeof e)&&!is(e))return e;const a=du(n,e);if(!a.startsWith("[object "))return a;if(e.__sentry_skip_normalization__)return e;if(t===0)return a.replace("object ","");if(s(e))return"[Circular ~]";const c=e;if(c&&typeof c.toJSON=="function")try{const _=c.toJSON();return Jn("",_,t-1,r,i)}catch{}const u=Array.isArray(e)?[]:{};let l=0;const d=us(e);for(const _ in d){if(!Object.prototype.hasOwnProperty.call(d,_))continue;if(l>=r){u[_]="[MaxProperties ~]";break}const f=d[_];u[_]=Jn(_,f,t-1,r,i),l+=1}return o(e),u}function du(n,e){try{return n==="domain"&&e&&typeof e=="object"&&e._events?"[Domain]":n==="domainEmitter"?"[DomainEmitter]":typeof global<"u"&&e===global?"[Global]":typeof window<"u"&&e===window?"[Window]":typeof document<"u"&&e===document?"[Document]":Ac(e)?"[SyntheticEvent]":typeof e=="number"&&e!==e?"[NaN]":e===void 0?"[undefined]":typeof e=="function"?`[Function: ${xe(e)}]`:typeof e=="symbol"?`[${String(e)}]`:typeof e=="bigint"?`[BigInt: ${String(e)}]`:`[object ${Object.getPrototypeOf(e).constructor.name}]`}catch(t){return`**non-serializable** (${t})`}}function hu(n){return~-encodeURI(n).split(/%..|./).length}function fu(n){return hu(JSON.stringify(n))}var _e;(function(n){n[n.PENDING=0]="PENDING";const t=1;n[n.RESOLVED=t]="RESOLVED";const r=2;n[n.REJECTED=r]="REJECTED"})(_e||(_e={}));function Ge(n){return new K(e=>{e(n)})}function rn(n){return new K((e,t)=>{t(n)})}class K{__init(){this._state=_e.PENDING}__init2(){this._handlers=[]}constructor(e){K.prototype.__init.call(this),K.prototype.__init2.call(this),K.prototype.__init3.call(this),K.prototype.__init4.call(this),K.prototype.__init5.call(this),K.prototype.__init6.call(this);try{e(this._resolve,this._reject)}catch(t){this._reject(t)}}then(e,t){return new K((r,i)=>{this._handlers.push([!1,s=>{if(!e)r(s);else try{r(e(s))}catch(o){i(o)}},s=>{if(!t)i(s);else try{r(t(s))}catch(o){i(o)}}]),this._executeHandlers()})}catch(e){return this.then(t=>t,e)}finally(e){return new K((t,r)=>{let i,s;return this.then(o=>{s=!1,i=o,e&&e()},o=>{s=!0,i=o,e&&e()}).then(()=>{if(s){r(i);return}t(i)})})}__init3(){this._resolve=e=>{this._setResult(_e.RESOLVED,e)}}__init4(){this._reject=e=>{this._setResult(_e.REJECTED,e)}}__init5(){this._setResult=(e,t)=>{if(this._state===_e.PENDING){if(vr(t)){t.then(this._resolve,this._reject);return}this._state=e,this._value=t,this._executeHandlers()}}}__init6(){this._executeHandlers=()=>{if(this._state===_e.PENDING)return;const e=this._handlers.slice();this._handlers=[],e.forEach(t=>{t[0]||(this._state===_e.RESOLVED&&t[1](this._value),this._state===_e.REJECTED&&t[2](this._value),t[0]=!0)})}}}function pu(n){const e=[];function t(){return n===void 0||e.length<n}function r(o){return e.splice(e.indexOf(o),1)[0]}function i(o){if(!t())return rn(new J("Not adding Promise because buffer limit was reached."));const a=o();return e.indexOf(a)===-1&&e.push(a),a.then(()=>r(a)).then(null,()=>r(a).then(null,()=>{})),a}function s(o){return new K((a,c)=>{let u=e.length;if(!u)return a(!0);const l=setTimeout(()=>{o&&o>0&&a(!1)},o);e.forEach(d=>{Ge(d).then(()=>{--u||(clearTimeout(l),a(!0))},c)})})}return{$:e,add:i,drain:s}}function Un(n){if(!n)return{};const e=n.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!e)return{};const t=e[6]||"",r=e[8]||"";return{host:e[4],path:e[5],protocol:e[2],relative:e[5]+t+r}}const _u=["fatal","error","warning","log","info","debug"];function mu(n){return n==="warn"?"warning":_u.includes(n)?n:"log"}const _s=mn(),Wn={nowSeconds:()=>Date.now()/1e3};function gu(){const{performance:n}=_s;if(!n||!n.now)return;const e=Date.now()-n.now();return{now:()=>n.now(),timeOrigin:e}}function yu(){try{return Te(module,"perf_hooks").performance}catch{return}}const Pn=kr()?yu():gu(),ci=Pn===void 0?Wn:{nowSeconds:()=>(Pn.timeOrigin+Pn.now())/1e3},yn=Wn.nowSeconds.bind(Wn),bn=ci.nowSeconds.bind(ci),Tt=bn,wt=(()=>{const{performance:n}=_s;if(!n||!n.now)return;const e=3600*1e3,t=n.now(),r=Date.now(),i=n.timeOrigin?Math.abs(n.timeOrigin+t-r):e,s=i<e,o=n.timing&&n.timing.navigationStart,c=typeof o=="number"?Math.abs(o+t-r):e,u=c<e;return s||u?i<=c?n.timeOrigin:o:r})(),bu=new RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$");function vu(n){const e=n.match(bu);if(!n||!e)return;let t;return e[3]==="1"?t=!0:e[3]==="0"&&(t=!1),{traceId:e[1],parentSampled:t,parentSpanId:e[2]}}function vn(n,e=[]){return[n,e]}function Eu(n,e){const[t,r]=n;return[t,[...r,e]]}function ui(n,e){n[1].forEach(r=>{const i=r[0].type;e(r,i)})}function Vn(n,e){return(e||new TextEncoder).encode(n)}function ms(n,e){const[t,r]=n;let i=JSON.stringify(t);function s(o){typeof i=="string"?i=typeof o=="string"?i+o:[Vn(i,e),o]:i.push(typeof o=="string"?Vn(o,e):o)}for(const o of r){const[a,c]=o;if(s(`
${JSON.stringify(a)}
`),typeof c=="string"||c instanceof Uint8Array)s(c);else{let u;try{u=JSON.stringify(c)}catch{u=JSON.stringify(ye(c))}s(u)}}return typeof i=="string"?i:Tu(i)}function Tu(n){const e=n.reduce((i,s)=>i+s.length,0),t=new Uint8Array(e);let r=0;for(const i of n)t.set(i,r),r+=i.length;return t}function wu(n,e){const t=typeof n.data=="string"?Vn(n.data,e):n.data;return[we({type:"attachment",length:t.length,filename:n.filename,content_type:n.contentType,attachment_type:n.attachmentType}),t]}const Su={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default"};function li(n){return Su[n]}function ku(n,e,t){const r=[{type:"client_report"},{timestamp:t||yn(),discarded_events:n}];return vn(e?{dsn:e}:{},[r])}const Ru=60*1e3;function xu(n,e=Date.now()){const t=parseInt(`${n}`,10);if(!isNaN(t))return t*1e3;const r=Date.parse(`${n}`);return isNaN(r)?Ru:r-e}function Ou(n,e){return n[e]||n.all||0}function Iu(n,e,t=Date.now()){return Ou(n,e)>t}function Du(n,{statusCode:e,headers:t},r=Date.now()){const i={...n},s=t&&t["x-sentry-rate-limits"],o=t&&t["retry-after"];if(s)for(const a of s.trim().split(",")){const[c,u]=a.split(":",2),l=parseInt(c,10),d=(isNaN(l)?60:l)*1e3;if(!u)i.all=r+d;else for(const _ of u.split(";"))i[_]=r+d}else o?i.all=r+xu(o,r):e===429&&(i.all=r+60*1e3);return i}const Kn="baggage",gs="sentry-",Nu=/^sentry-/,Au=8192;function $u(n){if(!Le(n)&&!Array.isArray(n))return;let e={};if(Array.isArray(n))e=n.reduce((r,i)=>{const s=di(i);return{...r,...s}},{});else{if(!n)return;e=di(n)}const t=Object.entries(e).reduce((r,[i,s])=>{if(i.match(Nu)){const o=i.slice(gs.length);r[o]=s}return r},{});if(Object.keys(t).length>0)return t}function ys(n){const e=Object.entries(n).reduce((t,[r,i])=>(i&&(t[`${gs}${r}`]=i),t),{});return ju(e)}function di(n){return n.split(",").map(e=>e.split("=").map(t=>decodeURIComponent(t.trim()))).reduce((e,[t,r])=>(e[t]=r,e),{})}function ju(n){if(Object.keys(n).length!==0)return Object.entries(n).reduce((e,[t,r],i)=>{const s=`${encodeURIComponent(t)}=${encodeURIComponent(r)}`,o=i===0?s:`${e},${s}`;return o.length>Au?((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.warn(`Not adding key: ${t} with val: ${r} to baggage header due to exceeding baggage size limits.`),e):o},"")}function Uu(n){const e=bn(),t={sid:Se(),init:!0,timestamp:e,started:e,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>Bu(t)};return n&&et(t,n),t}function et(n,e={}){if(e.user&&(!n.ipAddress&&e.user.ip_address&&(n.ipAddress=e.user.ip_address),!n.did&&!e.did&&(n.did=e.user.id||e.user.email||e.user.username)),n.timestamp=e.timestamp||bn(),e.ignoreDuration&&(n.ignoreDuration=e.ignoreDuration),e.sid&&(n.sid=e.sid.length===32?e.sid:Se()),e.init!==void 0&&(n.init=e.init),!n.did&&e.did&&(n.did=`${e.did}`),typeof e.started=="number"&&(n.started=e.started),n.ignoreDuration)n.duration=void 0;else if(typeof e.duration=="number")n.duration=e.duration;else{const t=n.timestamp-n.started;n.duration=t>=0?t:0}e.release&&(n.release=e.release),e.environment&&(n.environment=e.environment),!n.ipAddress&&e.ipAddress&&(n.ipAddress=e.ipAddress),!n.userAgent&&e.userAgent&&(n.userAgent=e.userAgent),typeof e.errors=="number"&&(n.errors=e.errors),e.status&&(n.status=e.status)}function Pu(n,e){let t={};e?t={status:e}:n.status==="ok"&&(t={status:"exited"}),et(n,t)}function Bu(n){return we({sid:`${n.sid}`,init:n.init,started:new Date(n.started*1e3).toISOString(),timestamp:new Date(n.timestamp*1e3).toISOString(),status:n.status,errors:n.errors,did:typeof n.did=="number"||typeof n.did=="string"?`${n.did}`:void 0,duration:n.duration,attrs:{release:n.release,environment:n.environment,ip_address:n.ipAddress,user_agent:n.userAgent}})}const Cu=100;class ke{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={}}static clone(e){const t=new ke;return e&&(t._breadcrumbs=[...e._breadcrumbs],t._tags={...e._tags},t._extra={...e._extra},t._contexts={...e._contexts},t._user=e._user,t._level=e._level,t._span=e._span,t._session=e._session,t._transactionName=e._transactionName,t._fingerprint=e._fingerprint,t._eventProcessors=[...e._eventProcessors],t._requestSession=e._requestSession,t._attachments=[...e._attachments]),t}addScopeListener(e){this._scopeListeners.push(e)}addEventProcessor(e){return this._eventProcessors.push(e),this}setUser(e){return this._user=e||{},this._session&&et(this._session,{user:e}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(e){return this._requestSession=e,this}setTags(e){return this._tags={...this._tags,...e},this._notifyScopeListeners(),this}setTag(e,t){return this._tags={...this._tags,[e]:t},this._notifyScopeListeners(),this}setExtras(e){return this._extra={...this._extra,...e},this._notifyScopeListeners(),this}setExtra(e,t){return this._extra={...this._extra,[e]:t},this._notifyScopeListeners(),this}setFingerprint(e){return this._fingerprint=e,this._notifyScopeListeners(),this}setLevel(e){return this._level=e,this._notifyScopeListeners(),this}setTransactionName(e){return this._transactionName=e,this._notifyScopeListeners(),this}setContext(e,t){return t===null?delete this._contexts[e]:this._contexts={...this._contexts,[e]:t},this._notifyScopeListeners(),this}setSpan(e){return this._span=e,this._notifyScopeListeners(),this}getSpan(){return this._span}getTransaction(){const e=this.getSpan();return e&&e.transaction}setSession(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(e){if(!e)return this;if(typeof e=="function"){const t=e(this);return t instanceof ke?t:this}return e instanceof ke?(this._tags={...this._tags,...e._tags},this._extra={...this._extra,...e._extra},this._contexts={...this._contexts,...e._contexts},e._user&&Object.keys(e._user).length&&(this._user=e._user),e._level&&(this._level=e._level),e._fingerprint&&(this._fingerprint=e._fingerprint),e._requestSession&&(this._requestSession=e._requestSession)):Ze(e)&&(e=e,this._tags={...this._tags,...e.tags},this._extra={...this._extra,...e.extra},this._contexts={...this._contexts,...e.contexts},e.user&&(this._user=e.user),e.level&&(this._level=e.level),e.fingerprint&&(this._fingerprint=e.fingerprint),e.requestSession&&(this._requestSession=e.requestSession)),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this._attachments=[],this}addBreadcrumb(e,t){const r=typeof t=="number"?t:Cu;if(r<=0)return this;const i={timestamp:yn(),...e};return this._breadcrumbs=[...this._breadcrumbs,i].slice(-r),this._notifyScopeListeners(),this}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(e){return this._attachments.push(e),this}getAttachments(){return this._attachments}clearAttachments(){return this._attachments=[],this}applyToEvent(e,t={}){if(this._extra&&Object.keys(this._extra).length&&(e.extra={...this._extra,...e.extra}),this._tags&&Object.keys(this._tags).length&&(e.tags={...this._tags,...e.tags}),this._user&&Object.keys(this._user).length&&(e.user={...this._user,...e.user}),this._contexts&&Object.keys(this._contexts).length&&(e.contexts={...this._contexts,...e.contexts}),this._level&&(e.level=this._level),this._transactionName&&(e.transaction=this._transactionName),this._span){e.contexts={trace:this._span.getTraceContext(),...e.contexts};const r=this._span.transaction&&this._span.transaction.name;r&&(e.tags={transaction:r,...e.tags})}return this._applyFingerprint(e),e.breadcrumbs=[...e.breadcrumbs||[],...this._breadcrumbs],e.breadcrumbs=e.breadcrumbs.length>0?e.breadcrumbs:void 0,e.sdkProcessingMetadata={...e.sdkProcessingMetadata,...this._sdkProcessingMetadata},this._notifyEventProcessors([...bs(),...this._eventProcessors],e,t)}setSDKProcessingMetadata(e){return this._sdkProcessingMetadata={...this._sdkProcessingMetadata,...e},this}_notifyEventProcessors(e,t,r,i=0){return new K((s,o)=>{const a=e[i];if(t===null||typeof a!="function")s(t);else{const c=a({...t},r);(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&a.id&&c===null&&m.log(`Event processor "${a.id}" dropped event`),vr(c)?c.then(u=>this._notifyEventProcessors(e,u,r,i+1).then(s)).then(null,o):this._notifyEventProcessors(e,c,r,i+1).then(s).then(null,o)}})}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(e=>{e(this)}),this._notifyingListeners=!1)}_applyFingerprint(e){e.fingerprint=e.fingerprint?fs(e.fingerprint):[],this._fingerprint&&(e.fingerprint=e.fingerprint.concat(this._fingerprint)),e.fingerprint&&!e.fingerprint.length&&delete e.fingerprint}}function bs(){return Er("globalEventProcessors",()=>[])}function En(n){bs().push(n)}const Rr=4,Lu=100;class Dt{__init(){this._stack=[{}]}constructor(e,t=new ke,r=Rr){this._version=r,Dt.prototype.__init.call(this),this.getStackTop().scope=t,e&&this.bindClient(e)}isOlderThan(e){return this._version<e}bindClient(e){const t=this.getStackTop();t.client=e,e&&e.setupIntegrations&&e.setupIntegrations()}pushScope(){const e=ke.clone(this.getScope());return this.getStack().push({client:this.getClient(),scope:e}),e}popScope(){return this.getStack().length<=1?!1:!!this.getStack().pop()}withScope(e){const t=this.pushScope();try{e(t)}finally{this.popScope()}}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getStack(){return this._stack}getStackTop(){return this._stack[this._stack.length-1]}captureException(e,t){const r=this._lastEventId=t&&t.event_id?t.event_id:Se(),i=new Error("Sentry syntheticException");return this._withClient((s,o)=>{s.captureException(e,{originalException:e,syntheticException:i,...t,event_id:r},o)}),r}captureMessage(e,t,r){const i=this._lastEventId=r&&r.event_id?r.event_id:Se(),s=new Error(e);return this._withClient((o,a)=>{o.captureMessage(e,t,{originalException:e,syntheticException:s,...r,event_id:i},a)}),i}captureEvent(e,t){const r=t&&t.event_id?t.event_id:Se();return e.type!=="transaction"&&(this._lastEventId=r),this._withClient((i,s)=>{i.captureEvent(e,{...t,event_id:r},s)}),r}lastEventId(){return this._lastEventId}addBreadcrumb(e,t){const{scope:r,client:i}=this.getStackTop();if(!r||!i)return;const{beforeBreadcrumb:s=null,maxBreadcrumbs:o=Lu}=i.getOptions&&i.getOptions()||{};if(o<=0)return;const c={timestamp:yn(),...e},u=s?as(()=>s(c,t)):c;u!==null&&r.addBreadcrumb(u,o)}setUser(e){const t=this.getScope();t&&t.setUser(e)}setTags(e){const t=this.getScope();t&&t.setTags(e)}setExtras(e){const t=this.getScope();t&&t.setExtras(e)}setTag(e,t){const r=this.getScope();r&&r.setTag(e,t)}setExtra(e,t){const r=this.getScope();r&&r.setExtra(e,t)}setContext(e,t){const r=this.getScope();r&&r.setContext(e,t)}configureScope(e){const{scope:t,client:r}=this.getStackTop();t&&r&&e(t)}run(e){const t=hi(this);try{e(this)}finally{hi(t)}}getIntegration(e){const t=this.getClient();if(!t)return null;try{return t.getIntegration(e)}catch{return(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.warn(`Cannot retrieve integration ${e.id} from the current Hub`),null}}startTransaction(e,t){return this._callExtensionMethod("startTransaction",e,t)}traceHeaders(){return this._callExtensionMethod("traceHeaders")}captureSession(e=!1){if(e)return this.endSession();this._sendSessionUpdate()}endSession(){const e=this.getStackTop(),t=e&&e.scope,r=t&&t.getSession();r&&Pu(r),this._sendSessionUpdate(),t&&t.setSession()}startSession(e){const{scope:t,client:r}=this.getStackTop(),{release:i,environment:s}=r&&r.getOptions()||{},{userAgent:o}=re.navigator||{},a=Uu({release:i,environment:s,...t&&{user:t.getUser()},...o&&{userAgent:o},...e});if(t){const c=t.getSession&&t.getSession();c&&c.status==="ok"&&et(c,{status:"exited"}),this.endSession(),t.setSession(a)}return a}shouldSendDefaultPii(){const e=this.getClient(),t=e&&e.getOptions();return Boolean(t&&t.sendDefaultPii)}_sendSessionUpdate(){const{scope:e,client:t}=this.getStackTop();if(!e)return;const r=e.getSession();r&&t&&t.captureSession&&t.captureSession(r)}_withClient(e){const{scope:t,client:r}=this.getStackTop();r&&e(r,t)}_callExtensionMethod(e,...t){const i=st().__SENTRY__;if(i&&i.extensions&&typeof i.extensions[e]=="function")return i.extensions[e].apply(this,t);(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.warn(`Extension method ${e} couldn't be found, doing nothing.`)}}function st(){return re.__SENTRY__=re.__SENTRY__||{extensions:{},hub:void 0},re}function hi(n){const e=st(),t=ve(e);return xr(e,n),t}function L(){const n=st();return(!vs(n)||ve(n).isOlderThan(Rr))&&xr(n,new Dt),kr()?Gu(n):ve(n)}function Gu(n){try{const e=st().__SENTRY__,t=e&&e.extensions&&e.extensions.domain&&e.extensions.domain.active;if(!t)return ve(n);if(!vs(t)||ve(t).isOlderThan(Rr)){const r=ve(n).getStackTop();xr(t,new Dt(r.client,ke.clone(r.scope)))}return ve(t)}catch{return ve(n)}}function vs(n){return!!(n&&n.__SENTRY__&&n.__SENTRY__.hub)}function ve(n){return Er("hub",()=>new Dt,n)}function xr(n,e){if(!n)return!1;const t=n.__SENTRY__=n.__SENTRY__||{};return t.hub=e,!0}function Yu(n,e){return L().captureException(n,{captureContext:e})}function Mu(n){L().withScope(n)}const Fu="7";function Hu(n){const e=n.protocol?`${n.protocol}:`:"",t=n.port?`:${n.port}`:"";return`${e}//${n.host}${t}${n.path?`/${n.path}`:""}/api/`}function zu(n){return`${Hu(n)}${n.projectId}/envelope/`}function qu(n,e){return Yc({sentry_key:n.publicKey,sentry_version:Fu,...e&&{sentry_client:`${e.name}/${e.version}`}})}function Es(n,e={}){const t=typeof e=="string"?e:e.tunnel,r=typeof e=="string"||!e._metadata?void 0:e._metadata.sdk;return t||`${zu(n)}?${qu(n,r)}`}function Ts(n){if(!n||!n.sdk)return;const{name:e,version:t}=n.sdk;return{name:e,version:t}}function Ju(n,e){return e&&(n.sdk=n.sdk||{},n.sdk.name=n.sdk.name||e.name,n.sdk.version=n.sdk.version||e.version,n.sdk.integrations=[...n.sdk.integrations||[],...e.integrations||[]],n.sdk.packages=[...n.sdk.packages||[],...e.packages||[]]),n}function Wu(n,e,t,r){const i=Ts(t),s={sent_at:new Date().toISOString(),...i&&{sdk:i},...!!r&&{dsn:Tr(e)}},o="aggregates"in n?[{type:"sessions"},n]:[{type:"session"},n];return vn(s,[o])}function Vu(n,e,t,r){const i=Ts(t),s=n.type||"event";Ju(n,t&&t.sdk);const o=Ku(n,i,r,e);return delete n.sdkProcessingMetadata,vn(o,[[{type:s},n]])}function Ku(n,e,t,r){const i=n.sdkProcessingMetadata&&n.sdkProcessingMetadata.dynamicSamplingContext;return{event_id:n.event_id,sent_at:new Date().toISOString(),...e&&{sdk:e},...!!t&&{dsn:Tr(r)},...n.type==="transaction"&&i&&{trace:we({...i})}}}const fi=[];function Xu(n){const e={};return n.forEach(t=>{const{name:r}=t,i=e[r];i&&!i.isDefaultInstance&&t.isDefaultInstance||(e[r]=t)}),Object.values(e)}function Qu(n){const e=n.defaultIntegrations||[],t=n.integrations;e.forEach(o=>{o.isDefaultInstance=!0});let r;Array.isArray(t)?r=[...e,...t]:typeof t=="function"?r=fs(t(e)):r=e;const i=Xu(r),s=i.findIndex(o=>o.name==="Debug");if(s!==-1){const[o]=i.splice(s,1);i.push(o)}return i}function Zu(n){const e={};return n.forEach(t=>{e[t.name]=t,fi.indexOf(t.name)===-1&&(t.setupOnce(En,L),fi.push(t.name),(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.log(`Integration installed: ${t.name}`))}),e}const pi="Not capturing exception because it's already been captured.";class ze{__init(){this._integrations={}}__init2(){this._integrationsInitialized=!1}__init3(){this._numProcessing=0}__init4(){this._outcomes={}}constructor(e){if(ze.prototype.__init.call(this),ze.prototype.__init2.call(this),ze.prototype.__init3.call(this),ze.prototype.__init4.call(this),this._options=e,e.dsn){this._dsn=Lc(e.dsn);const t=Es(this._dsn,e);this._transport=e.transport({recordDroppedEvent:this.recordDroppedEvent.bind(this),...e.transportOptions,url:t})}else(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.warn("No DSN provided, client will not do anything.")}captureException(e,t,r){if(ai(e)){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.log(pi);return}let i=t&&t.event_id;return this._process(this.eventFromException(e,t).then(s=>this._captureEvent(s,t,r)).then(s=>{i=s})),i}captureMessage(e,t,r,i){let s=r&&r.event_id;const o=rs(e)?this.eventFromMessage(String(e),t,r):this.eventFromException(e,r);return this._process(o.then(a=>this._captureEvent(a,r,i)).then(a=>{s=a})),s}captureEvent(e,t,r){if(t&&t.originalException&&ai(t.originalException)){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.log(pi);return}let i=t&&t.event_id;return this._process(this._captureEvent(e,t,r).then(s=>{i=s})),i}captureSession(e){if(!this._isEnabled()){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.warn("SDK not enabled, will not capture session.");return}typeof e.release!="string"?(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.warn("Discarded session because of missing or non-string release"):(this.sendSession(e),et(e,{init:!1}))}getDsn(){return this._dsn}getOptions(){return this._options}getTransport(){return this._transport}flush(e){const t=this._transport;return t?this._isClientDoneProcessing(e).then(r=>t.flush(e).then(i=>r&&i)):Ge(!0)}close(e){return this.flush(e).then(t=>(this.getOptions().enabled=!1,t))}setupIntegrations(){this._isEnabled()&&!this._integrationsInitialized&&(this._integrations=Zu(this._options.integrations),this._integrationsInitialized=!0)}getIntegrationById(e){return this._integrations[e]}getIntegration(e){try{return this._integrations[e.id]||null}catch{return(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.warn(`Cannot retrieve integration ${e.id} from the current Client`),null}}sendEvent(e,t={}){if(this._dsn){let r=Vu(e,this._dsn,this._options._metadata,this._options.tunnel);for(const i of t.attachments||[])r=Eu(r,wu(i,this._options.transportOptions&&this._options.transportOptions.textEncoder));this._sendEnvelope(r)}}sendSession(e){if(this._dsn){const t=Wu(e,this._dsn,this._options._metadata,this._options.tunnel);this._sendEnvelope(t)}}recordDroppedEvent(e,t){if(this._options.sendClientReports){const r=`${e}:${t}`;(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.log(`Adding outcome: "${r}"`),this._outcomes[r]=this._outcomes[r]+1||1}}_updateSessionFromEvent(e,t){let r=!1,i=!1;const s=t.exception&&t.exception.values;if(s){i=!0;for(const c of s){const u=c.mechanism;if(u&&u.handled===!1){r=!0;break}}}const o=e.status==="ok";(o&&e.errors===0||o&&r)&&(et(e,{...r&&{status:"crashed"},errors:e.errors||Number(i||r)}),this.captureSession(e))}_isClientDoneProcessing(e){return new K(t=>{let r=0;const i=1,s=setInterval(()=>{this._numProcessing==0?(clearInterval(s),t(!0)):(r+=i,e&&r>=e&&(clearInterval(s),t(!1)))},i)})}_isEnabled(){return this.getOptions().enabled!==!1&&this._dsn!==void 0}_prepareEvent(e,t,r){const{normalizeDepth:i=3,normalizeMaxBreadth:s=1e3}=this.getOptions(),o={...e,event_id:e.event_id||t.event_id||Se(),timestamp:e.timestamp||yn()};this._applyClientOptions(o),this._applyIntegrationsMetadata(o);let a=r;t.captureContext&&(a=ke.clone(a).update(t.captureContext));let c=Ge(o);if(a){const u=[...t.attachments||[],...a.getAttachments()];u.length&&(t.attachments=u),c=a.applyToEvent(o,t)}return c.then(u=>typeof i=="number"&&i>0?this._normalizeEvent(u,i,s):u)}_normalizeEvent(e,t,r){if(!e)return null;const i={...e,...e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map(s=>({...s,...s.data&&{data:ye(s.data,t,r)}}))},...e.user&&{user:ye(e.user,t,r)},...e.contexts&&{contexts:ye(e.contexts,t,r)},...e.extra&&{extra:ye(e.extra,t,r)}};return e.contexts&&e.contexts.trace&&i.contexts&&(i.contexts.trace=e.contexts.trace,e.contexts.trace.data&&(i.contexts.trace.data=ye(e.contexts.trace.data,t,r))),e.spans&&(i.spans=e.spans.map(s=>(s.data&&(s.data=ye(s.data,t,r)),s))),i}_applyClientOptions(e){const t=this.getOptions(),{environment:r,release:i,dist:s,maxValueLength:o=250}=t;"environment"in e||(e.environment="environment"in t?r:"production"),e.release===void 0&&i!==void 0&&(e.release=i),e.dist===void 0&&s!==void 0&&(e.dist=s),e.message&&(e.message=ft(e.message,o));const a=e.exception&&e.exception.values&&e.exception.values[0];a&&a.value&&(a.value=ft(a.value,o));const c=e.request;c&&c.url&&(c.url=ft(c.url,o))}_applyIntegrationsMetadata(e){const t=Object.keys(this._integrations);t.length>0&&(e.sdk=e.sdk||{},e.sdk.integrations=[...e.sdk.integrations||[],...t])}_captureEvent(e,t={},r){return this._processEvent(e,t,r).then(i=>i.event_id,i=>{if(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__){const s=i;s.logLevel==="log"?m.log(s.message):m.warn(s)}})}_processEvent(e,t,r){const{beforeSend:i,sampleRate:s}=this.getOptions();if(!this._isEnabled())return rn(new J("SDK not enabled, will not capture event.","log"));const o=e.type==="transaction";return!o&&typeof s=="number"&&Math.random()>s?(this.recordDroppedEvent("sample_rate","error"),rn(new J(`Discarding event because it's not included in the random sample (sampling rate = ${s})`,"log"))):this._prepareEvent(e,t,r).then(a=>{if(a===null)throw this.recordDroppedEvent("event_processor",e.type||"error"),new J("An event processor returned null, will not send event.","log");if(t.data&&t.data.__sentry__===!0||o||!i)return a;const u=i(a,t);return el(u)}).then(a=>{if(a===null)throw this.recordDroppedEvent("before_send",e.type||"error"),new J("`beforeSend` returned `null`, will not send event.","log");const c=r&&r.getSession();!o&&c&&this._updateSessionFromEvent(c,a);const u=a.transaction_info;if(o&&u&&a.transaction!==e.transaction){const l="custom";a.transaction_info={...u,source:l,changes:[...u.changes,{source:l,timestamp:a.timestamp,propagations:u.propagations}]}}return this.sendEvent(a,t),a}).then(null,a=>{throw a instanceof J?a:(this.captureException(a,{data:{__sentry__:!0},originalException:a}),new J(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.
Reason: ${a}`))})}_process(e){this._numProcessing+=1,e.then(t=>(this._numProcessing-=1,t),t=>(this._numProcessing-=1,t))}_sendEnvelope(e){this._transport&&this._dsn?this._transport.send(e).then(null,t=>{(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.error("Error while sending event:",t)}):(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.error("Transport disabled")}_clearOutcomes(){const e=this._outcomes;return this._outcomes={},Object.keys(e).map(t=>{const[r,i]=t.split(":");return{reason:r,category:i,quantity:e[t]}})}}function el(n){const e="`beforeSend` method has to return `null` or a valid event.";if(vr(n))return n.then(t=>{if(!(Ze(t)||t===null))throw new J(e);return t},t=>{throw new J(`beforeSend rejected with ${t}`)});if(!(Ze(n)||n===null))throw new J(e);return n}function tl(n,e){e.debug===!0&&(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__?m.enable():console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle."));const t=L(),r=t.getScope();r&&r.update(e.initialScope);const i=new n(e);t.bindClient(i)}const nl=30;function ws(n,e,t=pu(n.bufferSize||nl)){let r={};const i=o=>t.drain(o);function s(o){const a=[];if(ui(o,(d,_)=>{const f=li(_);Iu(r,f)?n.recordDroppedEvent("ratelimit_backoff",f):a.push(d)}),a.length===0)return Ge();const c=vn(o[0],a),u=d=>{ui(c,(_,f)=>{n.recordDroppedEvent(d,li(f))})},l=()=>e({body:ms(c,n.textEncoder)}).then(d=>{d.statusCode!==void 0&&(d.statusCode<200||d.statusCode>=300)&&(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.warn(`Sentry responded with status code ${d.statusCode} to sent event.`),r=Du(r,d)},d=>{(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.error("Failed while sending event:",d),u("network_error")});return t.add(l).then(d=>d,d=>{if(d instanceof J)return(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.error("Skipped sending event because buffer is full."),u("queue_overflow"),Ge();throw d})}return{send:s,flush:i}}const sn="7.17.4";let _i;class St{constructor(){St.prototype.__init.call(this)}static __initStatic(){this.id="FunctionToString"}__init(){this.name=St.id}setupOnce(){_i=Function.prototype.toString,Function.prototype.toString=function(...e){const t=Sr(this)||this;return _i.apply(t,e)}}}St.__initStatic();const rl=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/];class We{static __initStatic(){this.id="InboundFilters"}__init(){this.name=We.id}constructor(e={}){this._options=e,We.prototype.__init.call(this)}setupOnce(e,t){const r=i=>{const s=t();if(s){const o=s.getIntegration(We);if(o){const a=s.getClient(),c=a?a.getOptions():{},u=il(o._options,c);return sl(i,u)?null:i}}return i};r.id=this.name,e(r)}}We.__initStatic();function il(n={},e={}){return{allowUrls:[...n.allowUrls||[],...e.allowUrls||[]],denyUrls:[...n.denyUrls||[],...e.denyUrls||[]],ignoreErrors:[...n.ignoreErrors||[],...e.ignoreErrors||[],...rl],ignoreInternal:n.ignoreInternal!==void 0?n.ignoreInternal:!0}}function sl(n,e){return e.ignoreInternal&&ll(n)?((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.warn(`Event dropped due to being internal Sentry Error.
Event: ${Pe(n)}`),!0):ol(n,e.ignoreErrors)?((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.warn(`Event dropped due to being matched by \`ignoreErrors\` option.
Event: ${Pe(n)}`),!0):al(n,e.denyUrls)?((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.warn(`Event dropped due to being matched by \`denyUrls\` option.
Event: ${Pe(n)}.
Url: ${on(n)}`),!0):cl(n,e.allowUrls)?!1:((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.warn(`Event dropped due to not being matched by \`allowUrls\` option.
Event: ${Pe(n)}.
Url: ${on(n)}`),!0)}function ol(n,e){return!e||!e.length?!1:ul(n).some(t=>e.some(r=>gn(t,r)))}function al(n,e){if(!e||!e.length)return!1;const t=on(n);return t?e.some(r=>gn(t,r)):!1}function cl(n,e){if(!e||!e.length)return!0;const t=on(n);return t?e.some(r=>gn(t,r)):!0}function ul(n){if(n.message)return[n.message];if(n.exception)try{const{type:e="",value:t=""}=n.exception.values&&n.exception.values[0]||{};return[`${t}`,`${e}: ${t}`]}catch{return(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.error(`Cannot extract message for event ${Pe(n)}`),[]}return[]}function ll(n){try{return n.exception.values[0].type==="SentryError"}catch{}return!1}function dl(n=[]){for(let e=n.length-1;e>=0;e--){const t=n[e];if(t&&t.filename!=="<anonymous>"&&t.filename!=="[native code]")return t.filename||null}return null}function on(n){try{let e;try{e=n.exception.values[0].stacktrace.frames}catch{}return e?dl(e):null}catch{return(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.error(`Cannot extract url for event ${Pe(n)}`),null}}const R=re;let Xn=0;function Ss(){return Xn>0}function hl(){Xn+=1,setTimeout(()=>{Xn-=1})}function tt(n,e={},t){if(typeof n!="function")return n;try{const i=n.__sentry_wrapped__;if(i)return i;if(Sr(n))return n}catch{return n}const r=function(){const i=Array.prototype.slice.call(arguments);try{t&&typeof t=="function"&&t.apply(this,arguments);const s=i.map(o=>tt(o,e));return n.apply(this,s)}catch(s){throw hl(),Mu(o=>{o.addEventProcessor(a=>(e.mechanism&&(qn(a,void 0,void 0),Et(a,e.mechanism)),a.extra={...a.extra,arguments:i},a)),Yu(s)}),s}};try{for(const i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])}catch{}cs(r,n),wr(n,"__sentry_wrapped__",r);try{Object.getOwnPropertyDescriptor(r,"name").configurable&&Object.defineProperty(r,"name",{get(){return n.name}})}catch{}return r}function ks(n,e){const t=Or(n,e),r={type:e&&e.name,value:ml(e)};return t.length&&(r.stacktrace={frames:t}),r.type===void 0&&r.value===""&&(r.value="Unrecoverable error caught"),r}function fl(n,e,t,r){const s=L().getClient(),o=s&&s.getOptions().normalizeDepth,a={exception:{values:[{type:br(e)?e.constructor.name:r?"UnhandledRejection":"Error",value:`Non-Error ${r?"promise rejection":"exception"} captured with keys: ${Mc(e)}`}]},extra:{__serialized__:ps(e,o)}};if(t){const c=Or(n,t);c.length&&(a.exception.values[0].stacktrace={frames:c})}return a}function Bn(n,e){return{exception:{values:[ks(n,e)]}}}function Or(n,e){const t=e.stacktrace||e.stack||"",r=_l(e);try{return n(t,r)}catch{}return[]}const pl=/Minified React error #\d+;/i;function _l(n){if(n){if(typeof n.framesToPop=="number")return n.framesToPop;if(pl.test(n.message))return 1}return 0}function ml(n){const e=n&&n.message;return e?e.error&&typeof e.error.message=="string"?e.error.message:e:"No error message"}function gl(n,e,t,r){const i=t&&t.syntheticException||void 0,s=Ir(n,e,i,r);return Et(s),s.level="error",t&&t.event_id&&(s.event_id=t.event_id),Ge(s)}function yl(n,e,t="info",r,i){const s=r&&r.syntheticException||void 0,o=Qn(n,e,s,i);return o.level=t,r&&r.event_id&&(o.event_id=r.event_id),Ge(o)}function Ir(n,e,t,r,i){let s;if(ns(e)&&e.error)return Bn(n,e.error);if(ei(e)||Ic(e)){const o=e;if("stack"in e)s=Bn(n,e);else{const a=o.name||(ei(o)?"DOMError":"DOMException"),c=o.message?`${a}: ${o.message}`:a;s=Qn(n,c,t,r),qn(s,c)}return"code"in o&&(s.tags={...s.tags,"DOMException.code":`${o.code}`}),s}return ts(e)?Bn(n,e):Ze(e)||br(e)?(s=fl(n,e,t,i),Et(s,{synthetic:!0}),s):(s=Qn(n,e,t,r),qn(s,`${e}`,void 0),Et(s,{synthetic:!0}),s)}function Qn(n,e,t,r){const i={message:e};if(r&&t){const s=Or(n,t);s.length&&(i.exception={values:[{value:e,stacktrace:{frames:s}}]})}return i}const Rs="Breadcrumbs";class kt{static __initStatic(){this.id=Rs}__init(){this.name=kt.id}constructor(e){kt.prototype.__init.call(this),this.options={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...e}}setupOnce(){this.options.console&&te("console",vl),this.options.dom&&te("dom",bl(this.options.dom)),this.options.xhr&&te("xhr",El),this.options.fetch&&te("fetch",Tl),this.options.history&&te("history",wl)}}kt.__initStatic();function bl(n){function e(t){let r,i=typeof n=="object"?n.serializeAttribute:void 0;typeof i=="string"&&(i=[i]);try{r=t.event.target?vt(t.event.target,i):vt(t.event,i)}catch{r="<unknown>"}r.length!==0&&L().addBreadcrumb({category:`ui.${t.name}`,message:r},{event:t.event,name:t.name,global:t.global})}return e}function vl(n){for(let t=0;t<n.args.length;t++)if(n.args[t]==="ref=Ref<"){n.args[t+1]="viewRef";break}const e={category:"console",data:{arguments:n.args,logger:"console"},level:mu(n.level),message:ni(n.args," ")};if(n.level==="assert")if(n.args[0]===!1)e.message=`Assertion failed: ${ni(n.args.slice(1)," ")||"console.assert"}`,e.data.arguments=n.args.slice(1);else return;L().addBreadcrumb(e,{input:n.args,level:n.level})}function El(n){if(n.endTimestamp){if(n.xhr.__sentry_own_request__)return;const{method:e,url:t,status_code:r,body:i}=n.xhr.__sentry_xhr__||{};L().addBreadcrumb({category:"xhr",data:{method:e,url:t,status_code:r},type:"http"},{xhr:n.xhr,input:i});return}}function Tl(n){!n.endTimestamp||n.fetchData.url.match(/sentry_key/)&&n.fetchData.method==="POST"||(n.error?L().addBreadcrumb({category:"fetch",data:n.fetchData,level:"error",type:"http"},{data:n.error,input:n.args}):L().addBreadcrumb({category:"fetch",data:{...n.fetchData,status_code:n.response.status},type:"http"},{input:n.args,response:n.response}))}function wl(n){let e=n.from,t=n.to;const r=Un(R.location.href);let i=Un(e);const s=Un(t);i.path||(i=r),r.protocol===s.protocol&&r.host===s.host&&(t=s.relative),r.protocol===i.protocol&&r.host===i.host&&(e=i.relative),L().addBreadcrumb({category:"navigation",data:{from:e,to:t}})}class Sl extends ze{constructor(e){e._metadata=e._metadata||{},e._metadata.sdk=e._metadata.sdk||{name:"sentry.javascript.browser",packages:[{name:"npm:@sentry/browser",version:sn}],version:sn},super(e),e.sendClientReports&&R.document&&R.document.addEventListener("visibilitychange",()=>{R.document.visibilityState==="hidden"&&this._flushOutcomes()})}eventFromException(e,t){return gl(this._options.stackParser,e,t,this._options.attachStacktrace)}eventFromMessage(e,t="info",r){return yl(this._options.stackParser,e,t,r,this._options.attachStacktrace)}sendEvent(e,t){const r=this.getIntegrationById(Rs);r&&r.options&&r.options.sentry&&L().addBreadcrumb({category:`sentry.${e.type==="transaction"?"transaction":"event"}`,event_id:e.event_id,level:e.level,message:Pe(e)},{event:e}),super.sendEvent(e,t)}_prepareEvent(e,t,r){return e.platform=e.platform||"javascript",super._prepareEvent(e,t,r)}_flushOutcomes(){const e=this._clearOutcomes();if(e.length===0){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.log("No outcomes to send");return}if(!this._dsn){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.log("No dsn provided, will not send outcomes");return}(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.log("Sending outcomes:",e);const t=Es(this._dsn,this._options),r=ku(e,this._options.tunnel&&Tr(this._dsn));try{Object.prototype.toString.call(R&&R.navigator)==="[object Navigator]"&&typeof R.navigator.sendBeacon=="function"&&!this._options.transportOptions?R.navigator.sendBeacon.bind(R.navigator)(t,ms(r)):this._sendEnvelope(r)}catch(i){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.error(i)}}}let lt;function kl(){if(lt)return lt;if(zn(R.fetch))return lt=R.fetch.bind(R);const n=R.document;let e=R.fetch;if(n&&typeof n.createElement=="function")try{const t=n.createElement("iframe");t.hidden=!0,n.head.appendChild(t);const r=t.contentWindow;r&&r.fetch&&(e=r.fetch),n.head.removeChild(t)}catch(t){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",t)}return lt=e.bind(R)}function Rl(){lt=void 0}function xl(n,e=kl()){function t(r){const i={body:r.body,method:"POST",referrerPolicy:"origin",headers:n.headers,keepalive:r.body.length<=65536,...n.fetchOptions};try{return e(n.url,i).then(s=>({statusCode:s.status,headers:{"x-sentry-rate-limits":s.headers.get("X-Sentry-Rate-Limits"),"retry-after":s.headers.get("Retry-After")}}))}catch(s){return Rl(),rn(s)}}return ws(n,t)}const Ol=4;function Il(n){function e(t){return new K((r,i)=>{const s=new XMLHttpRequest;s.onerror=i,s.onreadystatechange=()=>{s.readyState===Ol&&r({statusCode:s.status,headers:{"x-sentry-rate-limits":s.getResponseHeader("X-Sentry-Rate-Limits"),"retry-after":s.getResponseHeader("Retry-After")}})},s.open("POST",n.url);for(const o in n.headers)Object.prototype.hasOwnProperty.call(n.headers,o)&&s.setRequestHeader(o,n.headers[o]);s.send(t.body)})}return ws(n,e)}const Tn="?",Dl=30,Nl=40,Al=50;function Dr(n,e,t,r){const i={filename:n,function:e,in_app:!0};return t!==void 0&&(i.lineno=t),r!==void 0&&(i.colno=r),i}const $l=/^\s*at (?:(.*\).*?|.*?) ?\((?:address at )?)?((?:file|https?|blob|chrome-extension|address|native|eval|webpack|<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,jl=/\((\S*)(?::(\d+))(?::(\d+))\)/,Ul=n=>{const e=$l.exec(n);if(e){if(e[2]&&e[2].indexOf("eval")===0){const s=jl.exec(e[2]);s&&(e[2]=s[1],e[3]=s[2],e[4]=s[3])}const[r,i]=xs(e[1]||Tn,e[2]);return Dr(i,r,e[3]?+e[3]:void 0,e[4]?+e[4]:void 0)}},Pl=[Dl,Ul],Bl=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:file|https?|blob|chrome|webpack|resource|moz-extension|safari-extension|safari-web-extension|capacitor)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,Cl=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,Ll=n=>{const e=Bl.exec(n);if(e){if(e[3]&&e[3].indexOf(" > eval")>-1){const s=Cl.exec(e[3]);s&&(e[1]=e[1]||"eval",e[3]=s[1],e[4]=s[2],e[5]="")}let r=e[3],i=e[1]||Tn;return[i,r]=xs(i,r),Dr(r,i,e[4]?+e[4]:void 0,e[5]?+e[5]:void 0)}},Gl=[Al,Ll],Yl=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,Ml=n=>{const e=Yl.exec(n);return e?Dr(e[2],e[1]||Tn,+e[3],e[4]?+e[4]:void 0):void 0},Fl=[Nl,Ml],Hl=[Pl,Gl,Fl],zl=ls(...Hl),xs=(n,e)=>{const t=n.indexOf("safari-extension")!==-1,r=n.indexOf("safari-web-extension")!==-1;return t||r?[n.indexOf("@")!==-1?n.split("@")[0]:Tn,t?`safari-extension:${e}`:`safari-web-extension:${e}`]:[n,e]};class Re{static __initStatic(){this.id="GlobalHandlers"}__init(){this.name=Re.id}__init2(){this._installFunc={onerror:ql,onunhandledrejection:Jl}}constructor(e){Re.prototype.__init.call(this),Re.prototype.__init2.call(this),this._options={onerror:!0,onunhandledrejection:!0,...e}}setupOnce(){Error.stackTraceLimit=50;const e=this._options;for(const t in e){const r=this._installFunc[t];r&&e[t]&&(Kl(t),r(),this._installFunc[t]=void 0)}}}Re.__initStatic();function ql(){te("error",n=>{const[e,t,r]=Ds();if(!e.getIntegration(Re))return;const{msg:i,url:s,line:o,column:a,error:c}=n;if(Ss()||c&&c.__sentry_own_request__)return;const u=c===void 0&&Le(i)?Vl(i,s,o,a):Os(Ir(t,c||i,void 0,r,!1),s,o,a);u.level="error",Is(e,c,u,"onerror")})}function Jl(){te("unhandledrejection",n=>{const[e,t,r]=Ds();if(!e.getIntegration(Re))return;let i=n;try{"reason"in n?i=n.reason:"detail"in n&&"reason"in n.detail&&(i=n.detail.reason)}catch{}if(Ss()||i&&i.__sentry_own_request__)return!0;const s=rs(i)?Wl(i):Ir(t,i,void 0,r,!0);s.level="error",Is(e,i,s,"onunhandledrejection")})}function Wl(n){return{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(n)}`}]}}}function Vl(n,e,t,r){const i=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i;let s=ns(n)?n.message:n,o="Error";const a=s.match(i);return a&&(o=a[1],s=a[2]),Os({exception:{values:[{type:o,value:s}]}},e,t,r)}function Os(n,e,t,r){const i=n.exception=n.exception||{},s=i.values=i.values||[],o=s[0]=s[0]||{},a=o.stacktrace=o.stacktrace||{},c=a.frames=a.frames||[],u=isNaN(parseInt(r,10))?void 0:r,l=isNaN(parseInt(t,10))?void 0:t,d=Le(e)&&e.length>0?e:jc();return c.length===0&&c.push({colno:u,filename:d,function:"?",in_app:!0,lineno:l}),n}function Kl(n){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.log(`Global Handler attached: ${n}`)}function Is(n,e,t,r){Et(t,{handled:!1,type:r}),n.captureEvent(t,{originalException:e})}function Ds(){const n=L(),e=n.getClient(),t=e&&e.getOptions()||{stackParser:()=>[],attachStacktrace:!1};return[n,t.stackParser,t.attachStacktrace]}const Xl=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"];class Rt{static __initStatic(){this.id="TryCatch"}__init(){this.name=Rt.id}constructor(e){Rt.prototype.__init.call(this),this._options={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,...e}}setupOnce(){this._options.setTimeout&&W(R,"setTimeout",mi),this._options.setInterval&&W(R,"setInterval",mi),this._options.requestAnimationFrame&&W(R,"requestAnimationFrame",Ql),this._options.XMLHttpRequest&&"XMLHttpRequest"in R&&W(XMLHttpRequest.prototype,"send",Zl);const e=this._options.eventTarget;e&&(Array.isArray(e)?e:Xl).forEach(ed)}}Rt.__initStatic();function mi(n){return function(...e){const t=e[0];return e[0]=tt(t,{mechanism:{data:{function:xe(n)},handled:!0,type:"instrument"}}),n.apply(this,e)}}function Ql(n){return function(e){return n.apply(this,[tt(e,{mechanism:{data:{function:"requestAnimationFrame",handler:xe(n)},handled:!0,type:"instrument"}})])}}function Zl(n){return function(...e){const t=this;return["onload","onerror","onprogress","onreadystatechange"].forEach(i=>{i in t&&typeof t[i]=="function"&&W(t,i,function(s){const o={mechanism:{data:{function:i,handler:xe(s)},handled:!0,type:"instrument"}},a=Sr(s);return a&&(o.mechanism.data.handler=xe(a)),tt(s,o)})}),n.apply(this,e)}}function ed(n){const e=R,t=e[n]&&e[n].prototype;!t||!t.hasOwnProperty||!t.hasOwnProperty("addEventListener")||(W(t,"addEventListener",function(r){return function(i,s,o){try{typeof s.handleEvent=="function"&&(s.handleEvent=tt(s.handleEvent,{mechanism:{data:{function:"handleEvent",handler:xe(s),target:n},handled:!0,type:"instrument"}}))}catch{}return r.apply(this,[i,tt(s,{mechanism:{data:{function:"addEventListener",handler:xe(s),target:n},handled:!0,type:"instrument"}}),o])}}),W(t,"removeEventListener",function(r){return function(i,s,o){const a=s;try{const c=a&&a.__sentry_wrapped__;c&&r.call(this,i,c,o)}catch{}return r.call(this,i,a,o)}}))}const td="cause",nd=5;class Ve{static __initStatic(){this.id="LinkedErrors"}__init(){this.name=Ve.id}constructor(e={}){Ve.prototype.__init.call(this),this._key=e.key||td,this._limit=e.limit||nd}setupOnce(){const e=L().getClient();!e||En((t,r)=>{const i=L().getIntegration(Ve);return i?rd(e.getOptions().stackParser,i._key,i._limit,t,r):t})}}Ve.__initStatic();function rd(n,e,t,r,i){if(!r.exception||!r.exception.values||!i||!fe(i.originalException,Error))return r;const s=Ns(n,t,i.originalException,e);return r.exception.values=[...s,...r.exception.values],r}function Ns(n,e,t,r,i=[]){if(!fe(t[r],Error)||i.length+1>=e)return i;const s=ks(n,t[r]);return Ns(n,e,t[r],r,[s,...i])}class Ke{constructor(){Ke.prototype.__init.call(this)}static __initStatic(){this.id="HttpContext"}__init(){this.name=Ke.id}setupOnce(){En(e=>{if(L().getIntegration(Ke)){if(!R.navigator&&!R.location&&!R.document)return e;const t=e.request&&e.request.url||R.location&&R.location.href,{referrer:r}=R.document||{},{userAgent:i}=R.navigator||{},s={...e.request&&e.request.headers,...r&&{Referer:r},...i&&{"User-Agent":i}},o={...t&&{url:t},headers:s};return{...e,request:o}}return e})}}Ke.__initStatic();class Xe{constructor(){Xe.prototype.__init.call(this)}static __initStatic(){this.id="Dedupe"}__init(){this.name=Xe.id}setupOnce(e,t){const r=i=>{const s=t().getIntegration(Xe);if(s){try{if(id(i,s._previousEvent))return(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.warn("Event dropped due to being a duplicate of previously captured event."),null}catch{return s._previousEvent=i}return s._previousEvent=i}return i};r.id=this.name,e(r)}}Xe.__initStatic();function id(n,e){return e?!!(sd(n,e)||od(n,e)):!1}function sd(n,e){const t=n.message,r=e.message;return!(!t&&!r||t&&!r||!t&&r||t!==r||!$s(n,e)||!As(n,e))}function od(n,e){const t=gi(e),r=gi(n);return!(!t||!r||t.type!==r.type||t.value!==r.value||!$s(n,e)||!As(n,e))}function As(n,e){let t=yi(n),r=yi(e);if(!t&&!r)return!0;if(t&&!r||!t&&r||(t=t,r=r,r.length!==t.length))return!1;for(let i=0;i<r.length;i++){const s=r[i],o=t[i];if(s.filename!==o.filename||s.lineno!==o.lineno||s.colno!==o.colno||s.function!==o.function)return!1}return!0}function $s(n,e){let t=n.fingerprint,r=e.fingerprint;if(!t&&!r)return!0;if(t&&!r||!t&&r)return!1;t=t,r=r;try{return t.join("")===r.join("")}catch{return!1}}function gi(n){return n.exception&&n.exception.values&&n.exception.values[0]}function yi(n){const e=n.exception;if(e)try{return e.values[0].stacktrace.frames}catch{return}}const ad=[new We,new St,new Rt,new kt,new Re,new Ve,new Xe,new Ke];function cd(n={}){n.defaultIntegrations===void 0&&(n.defaultIntegrations=ad),n.release===void 0&&R.SENTRY_RELEASE&&R.SENTRY_RELEASE.id&&(n.release=R.SENTRY_RELEASE.id),n.autoSessionTracking===void 0&&(n.autoSessionTracking=!0),n.sendClientReports===void 0&&(n.sendClientReports=!0);const e={...n,stackParser:zc(n.stackParser||zl),integrations:Qu(n),transport:n.transport||(ds()?xl:Il)};tl(Sl,e),n.autoSessionTracking&&ud()}function bi(n){n.startSession({ignoreDuration:!0}),n.captureSession()}function ud(){if(typeof R.document>"u"){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.warn("Session tracking in non-browser environment with @sentry/browser is not supported.");return}const n=L();!n.captureSession||(bi(n),te("history",({from:e,to:t})=>{e===void 0||e===t||bi(L())}))}function ld(n){n._metadata=n._metadata||{},n._metadata.sdk={name:"sentry.javascript.svelte",packages:[{name:"npm:@sentry/svelte",version:sn}],version:sn},cd(n),dd()}function dd(){let n;const e=t=>(n===void 0&&(n=hd()),n&&(t.modules={svelteKit:"latest",...t.modules}),t);e.id="svelteKitProcessor",En(e)}function hd(){return ss("div#svelte-announcer")!==null}function Nr(n){const e=L().getClient(),t=n||e&&e.getOptions();return!!t&&("tracesSampleRate"in t||"tracesSampler"in t)}function Nt(n){const t=(n||L()).getScope();return t&&t.getTransaction()}function z(n){return n/1e3}function fd(){te("error",vi),te("unhandledrejection",vi)}function vi(){const n=Nt();if(n){const e="internal_error";(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.log(`[Tracing] Transaction: ${e} -> Global error occured`),n.setStatus(e)}}class wn{__init(){this.spans=[]}constructor(e=1e3){wn.prototype.__init.call(this),this._maxlen=e}add(e){this.spans.length>this._maxlen?e.spanRecorder=void 0:this.spans.push(e)}}class be{__init2(){this.traceId=Se()}__init3(){this.spanId=Se().substring(16)}__init4(){this.startTimestamp=Tt()}__init5(){this.tags={}}__init6(){this.data={}}constructor(e){if(be.prototype.__init2.call(this),be.prototype.__init3.call(this),be.prototype.__init4.call(this),be.prototype.__init5.call(this),be.prototype.__init6.call(this),!e)return this;e.traceId&&(this.traceId=e.traceId),e.spanId&&(this.spanId=e.spanId),e.parentSpanId&&(this.parentSpanId=e.parentSpanId),"sampled"in e&&(this.sampled=e.sampled),e.op&&(this.op=e.op),e.description&&(this.description=e.description),e.data&&(this.data=e.data),e.tags&&(this.tags=e.tags),e.status&&(this.status=e.status),e.startTimestamp&&(this.startTimestamp=e.startTimestamp),e.endTimestamp&&(this.endTimestamp=e.endTimestamp)}startChild(e){const t=new be({...e,parentSpanId:this.spanId,sampled:this.sampled,traceId:this.traceId});if(t.spanRecorder=this.spanRecorder,t.spanRecorder&&t.spanRecorder.add(t),t.transaction=this.transaction,(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&t.transaction){const r=e&&e.op||"< unknown op >",i=t.transaction.name||"< unknown name >",s=t.transaction.spanId,o=`[Tracing] Starting '${r}' span on transaction '${i}' (${s}).`;t.transaction.metadata.spanMetadata[t.spanId]={logMessage:o},m.log(o)}return t}setTag(e,t){return this.tags={...this.tags,[e]:t},this}setData(e,t){return this.data={...this.data,[e]:t},this}setStatus(e){return this.status=e,this}setHttpStatus(e){this.setTag("http.status_code",String(e));const t=pd(e);return t!=="unknown_error"&&this.setStatus(t),this}isSuccess(){return this.status==="ok"}finish(e){if((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&this.transaction&&this.transaction.spanId!==this.spanId){const{logMessage:t}=this.transaction.metadata.spanMetadata[this.spanId];t&&m.log(t.replace("Starting","Finishing"))}this.endTimestamp=typeof e=="number"?e:Tt()}toTraceparent(){let e="";return this.sampled!==void 0&&(e=this.sampled?"-1":"-0"),`${this.traceId}-${this.spanId}${e}`}toContext(){return we({data:this.data,description:this.description,endTimestamp:this.endTimestamp,op:this.op,parentSpanId:this.parentSpanId,sampled:this.sampled,spanId:this.spanId,startTimestamp:this.startTimestamp,status:this.status,tags:this.tags,traceId:this.traceId})}updateWithContext(e){return this.data=$e(e.data,()=>({})),this.description=e.description,this.endTimestamp=e.endTimestamp,this.op=e.op,this.parentSpanId=e.parentSpanId,this.sampled=e.sampled,this.spanId=$e(e.spanId,()=>this.spanId),this.startTimestamp=$e(e.startTimestamp,()=>this.startTimestamp),this.status=e.status,this.tags=$e(e.tags,()=>({})),this.traceId=$e(e.traceId,()=>this.traceId),this}getTraceContext(){return we({data:Object.keys(this.data).length>0?this.data:void 0,description:this.description,op:this.op,parent_span_id:this.parentSpanId,span_id:this.spanId,status:this.status,tags:Object.keys(this.tags).length>0?this.tags:void 0,trace_id:this.traceId})}toJSON(){return we({data:Object.keys(this.data).length>0?this.data:void 0,description:this.description,op:this.op,parent_span_id:this.parentSpanId,span_id:this.spanId,start_timestamp:this.startTimestamp,status:this.status,tags:Object.keys(this.tags).length>0?this.tags:void 0,timestamp:this.endTimestamp,trace_id:this.traceId})}}function pd(n){if(n<400&&n>=100)return"ok";if(n>=400&&n<500)switch(n){case 401:return"unauthenticated";case 403:return"permission_denied";case 404:return"not_found";case 409:return"already_exists";case 413:return"failed_precondition";case 429:return"resource_exhausted";default:return"invalid_argument"}if(n>=500&&n<600)switch(n){case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline_exceeded";default:return"internal_error"}return"unknown_error"}class xt extends be{__init(){this._measurements={}}__init2(){this._frozenDynamicSamplingContext=void 0}constructor(e,t){super(e),xt.prototype.__init.call(this),xt.prototype.__init2.call(this),this._hub=t||L(),this._name=e.name||"",this.metadata={source:"custom",...e.metadata,spanMetadata:{},changes:[],propagations:0},this._trimEnd=e.trimEnd,this.transaction=this;const r=this.metadata.dynamicSamplingContext;r&&(this._frozenDynamicSamplingContext={...r})}get name(){return this._name}set name(e){this.setName(e)}setName(e,t="custom"){(e!==this.name||t!==this.metadata.source)&&this.metadata.changes.push({source:this.metadata.source,timestamp:bn(),propagations:this.metadata.propagations}),this._name=e,this.metadata.source=t}initSpanRecorder(e=1e3){this.spanRecorder||(this.spanRecorder=new wn(e)),this.spanRecorder.add(this)}setMeasurement(e,t,r=""){this._measurements[e]={value:t,unit:r}}setMetadata(e){this.metadata={...this.metadata,...e}}finish(e){if(this.endTimestamp!==void 0)return;if(this.name||((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this.name="<unlabeled transaction>"),super.finish(e),this.sampled!==!0){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.log("[Tracing] Discarding transaction because its trace was not chosen to be sampled.");const o=this._hub.getClient();o&&o.recordDroppedEvent("sample_rate","transaction");return}const t=this.spanRecorder?this.spanRecorder.spans.filter(o=>o!==this&&o.endTimestamp):[];this._trimEnd&&t.length>0&&(this.endTimestamp=t.reduce((o,a)=>o.endTimestamp&&a.endTimestamp?o.endTimestamp>a.endTimestamp?o:a:o).endTimestamp);const r=this.metadata,i={contexts:{trace:this.getTraceContext()},spans:t,start_timestamp:this.startTimestamp,tags:this.tags,timestamp:this.endTimestamp,transaction:this.name,type:"transaction",sdkProcessingMetadata:{...r,dynamicSamplingContext:this.getDynamicSamplingContext()},...r.source&&{transaction_info:{source:r.source,changes:r.changes,propagations:r.propagations}}};return Object.keys(this._measurements).length>0&&((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.log("[Measurements] Adding measurements to transaction",JSON.stringify(this._measurements,void 0,2)),i.measurements=this._measurements),(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.log(`[Tracing] Finishing ${this.op} transaction: ${this.name}.`),this._hub.captureEvent(i)}toContext(){const e=super.toContext();return we({...e,name:this.name,trimEnd:this._trimEnd})}updateWithContext(e){return super.updateWithContext(e),this.name=$e(e.name,()=>""),this._trimEnd=e.trimEnd,this}getDynamicSamplingContext(){if(this._frozenDynamicSamplingContext)return this._frozenDynamicSamplingContext;const e=this._hub||L(),t=e&&e.getClient();if(!t)return{};const{environment:r,release:i}=t.getOptions()||{},{publicKey:s}=t.getDsn()||{},o=this.metadata.sampleRate,a=o!==void 0?o.toString():void 0,c=e.getScope(),{segment:u}=c&&c.getUser()||{},l=this.metadata.source,d=l&&l!=="url"?this.name:void 0;return we({environment:r,release:i,transaction:d,user_segment:u,public_key:s,trace_id:this.traceId,sample_rate:a})}}const js=1e3,Us=3e4,Ps=5e3;class _d extends wn{constructor(e,t,r,i){super(i),this._pushActivity=e,this._popActivity=t,this.transactionSpanId=r}add(e){e.spanId!==this.transactionSpanId&&(e.finish=t=>{e.endTimestamp=typeof t=="number"?t:Tt(),this._popActivity(e.spanId)},e.endTimestamp===void 0&&this._pushActivity(e.spanId)),super.add(e)}}class qe extends xt{__init(){this.activities={}}__init2(){this._heartbeatCounter=0}__init3(){this._finished=!1}__init4(){this._beforeFinishCallbacks=[]}constructor(e,t,r=js,i=Us,s=Ps,o=!1){super(e,t),this._idleHub=t,this._idleTimeout=r,this._finalTimeout=i,this._heartbeatInterval=s,this._onScope=o,qe.prototype.__init.call(this),qe.prototype.__init2.call(this),qe.prototype.__init3.call(this),qe.prototype.__init4.call(this),o&&(Ei(t),(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.log(`Setting idle transaction on scope. Span ID: ${this.spanId}`),t.configureScope(a=>a.setSpan(this))),this._startIdleTimeout(),setTimeout(()=>{this._finished||(this.setStatus("deadline_exceeded"),this.finish())},this._finalTimeout)}finish(e=Tt()){if(this._finished=!0,this.activities={},this.spanRecorder){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.log("[Tracing] finishing IdleTransaction",new Date(e*1e3).toISOString(),this.op);for(const t of this._beforeFinishCallbacks)t(this,e);this.spanRecorder.spans=this.spanRecorder.spans.filter(t=>{if(t.spanId===this.spanId)return!0;t.endTimestamp||(t.endTimestamp=e,t.setStatus("cancelled"),(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.log("[Tracing] cancelling span since transaction ended early",JSON.stringify(t,void 0,2)));const r=t.startTimestamp<e;return r||(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.log("[Tracing] discarding Span since it happened after Transaction was finished",JSON.stringify(t,void 0,2)),r}),(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.log("[Tracing] flushing IdleTransaction")}else(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.log("[Tracing] No active IdleTransaction");return this._onScope&&Ei(this._idleHub),super.finish(e)}registerBeforeFinishCallback(e){this._beforeFinishCallbacks.push(e)}initSpanRecorder(e){if(!this.spanRecorder){const t=i=>{this._finished||this._pushActivity(i)},r=i=>{this._finished||this._popActivity(i)};this.spanRecorder=new _d(t,r,this.spanId,e),(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.log("Starting heartbeat"),this._pingHeartbeat()}this.spanRecorder.add(this)}_cancelIdleTimeout(){this._idleTimeoutID&&(clearTimeout(this._idleTimeoutID),this._idleTimeoutID=void 0)}_startIdleTimeout(e){this._cancelIdleTimeout(),this._idleTimeoutID=setTimeout(()=>{!this._finished&&Object.keys(this.activities).length===0&&this.finish(e)},this._idleTimeout)}_pushActivity(e){this._cancelIdleTimeout(),(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.log(`[Tracing] pushActivity: ${e}`),this.activities[e]=!0,(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.log("[Tracing] new activities count",Object.keys(this.activities).length)}_popActivity(e){if(this.activities[e]&&((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.log(`[Tracing] popActivity ${e}`),delete this.activities[e],(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.log("[Tracing] new activities count",Object.keys(this.activities).length)),Object.keys(this.activities).length===0){const t=Tt()+this._idleTimeout/1e3;this._startIdleTimeout(t)}}_beat(){if(this._finished)return;const e=Object.keys(this.activities).join("");e===this._prevHeartbeatString?this._heartbeatCounter+=1:this._heartbeatCounter=1,this._prevHeartbeatString=e,this._heartbeatCounter>=3?((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.log("[Tracing] Transaction finished because of no change for 3 heart beats"),this.setStatus("deadline_exceeded"),this.finish()):this._pingHeartbeat()}_pingHeartbeat(){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.log(`pinging Heartbeat -> current counter: ${this._heartbeatCounter}`),setTimeout(()=>{this._beat()},this._heartbeatInterval)}}function Ei(n){const e=n.getScope();e&&e.getTransaction()&&e.setSpan(void 0)}function md(){const n=this.getScope();if(n){const e=n.getSpan();if(e)return{"sentry-trace":e.toTraceparent()}}return{}}function Bs(n,e,t){if(!Nr(e))return n.sampled=!1,n;if(n.sampled!==void 0)return n.setMetadata({sampleRate:Number(n.sampled)}),n;let r;return typeof e.tracesSampler=="function"?(r=e.tracesSampler(t),n.setMetadata({sampleRate:Number(r)})):t.parentSampled!==void 0?r=t.parentSampled:(r=e.tracesSampleRate,n.setMetadata({sampleRate:Number(r)})),gd(r)?r?(n.sampled=Math.random()<r,n.sampled?((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.log(`[Tracing] starting ${n.op} transaction - ${n.name}`),n):((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.log(`[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ${Number(r)})`),n)):((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.log(`[Tracing] Discarding transaction because ${typeof e.tracesSampler=="function"?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0"}`),n.sampled=!1,n):((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.warn("[Tracing] Discarding transaction because of invalid sample rate."),n.sampled=!1,n)}function gd(n){return is(n)||!(typeof n=="number"||typeof n=="boolean")?((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.warn(`[Tracing] Given sample rate is invalid. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(n)} of type ${JSON.stringify(typeof n)}.`),!1):n<0||n>1?((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.warn(`[Tracing] Given sample rate is invalid. Sample rate must be between 0 and 1. Got ${n}.`),!1):!0}function yd(n,e){const t=this.getClient(),r=t&&t.getOptions()||{};let i=new xt(n,this);return i=Bs(i,r,{parentSampled:n.parentSampled,transactionContext:n,...e}),i.sampled&&i.initSpanRecorder(r._experiments&&r._experiments.maxSpans),i}function bd(n,e,t,r,i,s,o){const a=n.getClient(),c=a&&a.getOptions()||{};let u=new qe(e,n,t,r,o,i);return u=Bs(u,c,{parentSampled:e.parentSampled,transactionContext:e,...s}),u.sampled&&u.initSpanRecorder(c._experiments&&c._experiments.maxSpans),u}function vd(){const n=st();!n.__SENTRY__||(n.__SENTRY__.extensions=n.__SENTRY__.extensions||{},n.__SENTRY__.extensions.startTransaction||(n.__SENTRY__.extensions.startTransaction=yd),n.__SENTRY__.extensions.traceHeaders||(n.__SENTRY__.extensions.traceHeaders=md))}function Ed(){const n=st();if(!n.__SENTRY__)return;const e={mongodb(){const r=Te(module,"./integrations/node/mongo");return new r.Mongo},mongoose(){const r=Te(module,"./integrations/node/mongo");return new r.Mongo({mongoose:!0})},mysql(){const r=Te(module,"./integrations/node/mysql");return new r.Mysql},pg(){const r=Te(module,"./integrations/node/postgres");return new r.Postgres}},t=Object.keys(e).filter(r=>!!lu(r)).map(r=>{try{return e[r]()}catch{return}}).filter(r=>r);t.length>0&&(n.__SENTRY__.integrations=[...n.__SENTRY__.integrations||[],...t])}function Td(){vd(),kr()&&Ed(),fd()}const N=re;function wd(){N&&N.document?N.document.addEventListener("visibilitychange",()=>{const n=Nt();if(N.document.hidden&&n){const e="cancelled";(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.log(`[Tracing] Transaction: ${e} -> since tab moved to the background, op: ${n.op}`),n.status||n.setStatus(e),n.setTag("visibilitychange","document.hidden"),n.finish()}}):(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.warn("[Tracing] Could not set up background tab detection due to lack of global document")}const Ar=(n,e,t)=>{let r,i;return s=>{e.value>=0&&(s||t)&&(i=e.value-(r||0),(i||r===void 0)&&(r=e.value,e.delta=i,n(e)))}},Sd=()=>`v3-${Date.now()}-${Math.floor(Math.random()*(9e12-1))+1e12}`,kd=()=>{const n=N.performance.timing,e=N.performance.navigation.type,t={entryType:"navigation",startTime:0,type:e==2?"back_forward":e===1?"reload":"navigate"};for(const r in n)r!=="navigationStart"&&r!=="toJSON"&&(t[r]=Math.max(n[r]-n.navigationStart,0));return t},Cs=()=>N.__WEB_VITALS_POLYFILL__?N.performance&&(performance.getEntriesByType&&performance.getEntriesByType("navigation")[0]||kd()):N.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0],Ls=()=>{const n=Cs();return n&&n.activationStart||0},$r=(n,e)=>{const t=Cs();let r="navigate";return t&&(N.document.prerendering||Ls()>0?r="prerender":r=t.type.replace(/_/g,"-")),{name:n,value:typeof e>"u"?-1:e,rating:"good",delta:0,entries:[],id:Sd(),navigationType:r}},Sn=(n,e,t)=>{try{if(PerformanceObserver.supportedEntryTypes.includes(n)){const r=new PerformanceObserver(i=>{e(i.getEntries())});return r.observe(Object.assign({type:n,buffered:!0},t||{})),r}}catch{}},kn=(n,e)=>{const t=r=>{(r.type==="pagehide"||N.document.visibilityState==="hidden")&&(n(r),e&&(removeEventListener("visibilitychange",t,!0),removeEventListener("pagehide",t,!0)))};addEventListener("visibilitychange",t,!0),addEventListener("pagehide",t,!0)},Rd=(n,e={})=>{const t=$r("CLS",0);let r,i=0,s=[];const o=c=>{c.forEach(u=>{if(!u.hadRecentInput){const l=s[0],d=s[s.length-1];i&&s.length!==0&&u.startTime-d.startTime<1e3&&u.startTime-l.startTime<5e3?(i+=u.value,s.push(u)):(i=u.value,s=[u]),i>t.value&&(t.value=i,t.entries=s,r&&r())}})},a=Sn("layout-shift",o);a&&(r=Ar(n,t,e.reportAllChanges),kn(()=>{o(a.takeRecords()),r(!0)}))};let qt=-1;const xd=()=>N.document.visibilityState==="hidden"&&!N.document.prerendering?0:1/0,Od=()=>{kn(({timeStamp:n})=>{qt=n},!0)},jr=()=>(qt<0&&(qt=xd(),Od()),{get firstHiddenTime(){return qt}}),Id=(n,e={})=>{const t=jr(),r=$r("FID");let i;const s=c=>{c.startTime<t.firstHiddenTime&&(r.value=c.processingStart-c.startTime,r.entries.push(c),i(!0))},o=c=>{c.forEach(s)},a=Sn("first-input",o);i=Ar(n,r,e.reportAllChanges),a&&kn(()=>{o(a.takeRecords()),a.disconnect()},!0)},Ti={},Dd=(n,e={})=>{const t=jr(),r=$r("LCP");let i;const s=a=>{const c=a[a.length-1];if(c){const u=Math.max(c.startTime-Ls(),0);u<t.firstHiddenTime&&(r.value=u,r.entries=[c],i())}},o=Sn("largest-contentful-paint",s);if(o){i=Ar(n,r,e.reportAllChanges);const a=()=>{Ti[r.id]||(s(o.takeRecords()),o.disconnect(),Ti[r.id]=!0,i(!0))};["keydown","click"].forEach(c=>{addEventListener(c,a,{once:!0,capture:!0})}),kn(a,!0)}};function Cn(n){return typeof n=="number"&&isFinite(n)}function nt(n,{startTimestamp:e,...t}){return e&&n.startTimestamp>e&&(n.startTimestamp=e),n.startChild({startTimestamp:e,...t})}function Gs(){return N&&N.addEventListener&&N.performance}let wi=0,B={},de,_t;function Nd(n=!1){const e=Gs();e&&wt&&(e.mark&&N.performance.mark("sentry-tracing-init"),$d(),jd(n),Ud())}function Ad(){Sn("longtask",e=>{for(const t of e){const r=Nt();if(!r)return;const i=z(wt+t.startTime),s=z(t.duration);r.startChild({description:"Main UI thread blocked",op:"ui.long-task",startTimestamp:i,endTimestamp:i+s})}})}function $d(){Rd(n=>{const e=n.entries.pop();!e||((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.log("[Measurements] Adding CLS"),B.cls={value:n.value,unit:""},_t=e)})}function jd(n){Dd(e=>{const t=e.entries.pop();!t||((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.log("[Measurements] Adding LCP"),B.lcp={value:e.value,unit:"millisecond"},de=t)},{reportAllChanges:n})}function Ud(){Id(n=>{const e=n.entries.pop();if(!e)return;const t=z(wt),r=z(e.startTime);(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.log("[Measurements] Adding FID"),B.fid={value:n.value,unit:"millisecond"},B["mark.fid"]={value:t+r,unit:"second"}})}function Pd(n){const e=Gs();if(!e||!N.performance.getEntries||!wt)return;(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.log("[Tracing] Adding & adjusting spans using Performance API");const t=z(wt),r=e.getEntries();let i,s;if(r.slice(wi).forEach(o=>{const a=z(o.startTime),c=z(o.duration);if(!(n.op==="navigation"&&t+a<n.startTimestamp))switch(o.entryType){case"navigation":{Cd(n,o,t),i=t+z(o.responseStart),s=t+z(o.requestStart);break}case"mark":case"paint":case"measure":{Bd(n,o,a,c,t);const u=jr(),l=o.startTime<u.firstHiddenTime;o.name==="first-paint"&&l&&((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.log("[Measurements] Adding FP"),B.fp={value:o.startTime,unit:"millisecond"}),o.name==="first-contentful-paint"&&l&&((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.log("[Measurements] Adding FCP"),B.fcp={value:o.startTime,unit:"millisecond"});break}case"resource":{const u=o.name.replace(N.location.origin,"");Gd(n,o,u,a,c,t);break}}}),wi=Math.max(r.length-1,0),Yd(n),n.op==="pageload"){typeof i=="number"&&((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.log("[Measurements] Adding TTFB"),B.ttfb={value:(i-n.startTimestamp)*1e3,unit:"millisecond"},typeof s=="number"&&s<=i&&(B["ttfb.requestTime"]={value:(i-s)*1e3,unit:"millisecond"})),["fcp","fp","lcp"].forEach(a=>{if(!B[a]||t>=n.startTimestamp)return;const c=B[a].value,u=t+z(c),l=Math.abs((u-n.startTimestamp)*1e3),d=l-c;(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.log(`[Measurements] Normalized ${a} from ${c} to ${l} (${d})`),B[a].value=l});const o=B["mark.fid"];o&&B.fid&&(nt(n,{description:"first input delay",endTimestamp:o.value+z(B.fid.value),op:"ui.action",startTimestamp:o.value}),delete B["mark.fid"]),"fcp"in B||delete B.cls,Object.keys(B).forEach(a=>{n.setMeasurement(a,B[a].value,B[a].unit)}),Md(n)}de=void 0,_t=void 0,B={}}function Bd(n,e,t,r,i){const s=i+t,o=s+r;return nt(n,{description:e.name,endTimestamp:o,op:e.entryType,startTimestamp:s}),s}function Cd(n,e,t){["unloadEvent","redirect","domContentLoadedEvent","loadEvent","connect"].forEach(r=>{Mt(n,e,r,t)}),Mt(n,e,"secureConnection",t,"TLS/SSL","connectEnd"),Mt(n,e,"fetch",t,"cache","domainLookupStart"),Mt(n,e,"domainLookup",t,"DNS"),Ld(n,e,t)}function Mt(n,e,t,r,i,s){const o=s?e[s]:e[`${t}End`],a=e[`${t}Start`];!a||!o||nt(n,{op:"browser",description:$e(i,()=>t),startTimestamp:r+z(a),endTimestamp:r+z(o)})}function Ld(n,e,t){nt(n,{op:"browser",description:"request",startTimestamp:t+z(e.requestStart),endTimestamp:t+z(e.responseEnd)}),nt(n,{op:"browser",description:"response",startTimestamp:t+z(e.responseStart),endTimestamp:t+z(e.responseEnd)})}function Gd(n,e,t,r,i,s){if(e.initiatorType==="xmlhttprequest"||e.initiatorType==="fetch")return;const o={};"transferSize"in e&&(o["Transfer Size"]=e.transferSize),"encodedBodySize"in e&&(o["Encoded Body Size"]=e.encodedBodySize),"decodedBodySize"in e&&(o["Decoded Body Size"]=e.decodedBodySize);const a=s+r,c=a+i;nt(n,{description:t,endTimestamp:c,op:e.initiatorType?`resource.${e.initiatorType}`:"resource.other",startTimestamp:a,data:o})}function Yd(n){const e=N.navigator;if(!e)return;const t=e.connection;t&&(t.effectiveType&&n.setTag("effectiveConnectionType",t.effectiveType),t.type&&n.setTag("connectionType",t.type),Cn(t.rtt)&&(B["connection.rtt"]={value:t.rtt,unit:"millisecond"})),Cn(e.deviceMemory)&&n.setTag("deviceMemory",`${e.deviceMemory} GB`),Cn(e.hardwareConcurrency)&&n.setTag("hardwareConcurrency",String(e.hardwareConcurrency))}function Md(n){de&&((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.log("[Measurements] Adding LCP Data"),de.element&&n.setTag("lcp.element",vt(de.element)),de.id&&n.setTag("lcp.id",de.id),de.url&&n.setTag("lcp.url",de.url.trim().slice(0,200)),n.setTag("lcp.size",de.size)),_t&&_t.sources&&((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.log("[Measurements] Adding CLS Data"),_t.sources.forEach((e,t)=>n.setTag(`cls.source.${t+1}`,vt(e.node))))}const Fd=["localhost",/^\//],an={traceFetch:!0,traceXHR:!0,tracingOrigins:Fd};function Hd(n){const{traceFetch:e,traceXHR:t,tracingOrigins:r,shouldCreateSpanForRequest:i}={...an,...n},s=typeof i=="function"?i:c=>!0,o=c=>r.some(u=>gn(c,u)),a={};e&&te("fetch",c=>{zd(c,s,o,a)}),t&&te("xhr",c=>{Jd(c,s,o,a)})}function zd(n,e,t,r){if(!Nr()||!(n.fetchData&&e(n.fetchData.url)))return;if(n.endTimestamp){const s=n.fetchData.__span;if(!s)return;const o=r[s];o&&(n.response?o.setHttpStatus(n.response.status):n.error&&o.setStatus("internal_error"),o.finish(),delete r[s]);return}const i=Nt();if(i){const s=i.startChild({data:{...n.fetchData,type:"fetch"},description:`${n.fetchData.method} ${n.fetchData.url}`,op:"http.client"});n.fetchData.__span=s.spanId,r[s.spanId]=s;const o=n.args[0];n.args[1]=n.args[1]||{};const a=n.args[1];t(n.fetchData.url)&&(a.headers=qd(o,i.getDynamicSamplingContext(),s,a),i.metadata.propagations+=1)}}function qd(n,e,t,r){const i=ys(e),s=t.toTraceparent(),o=typeof Request<"u"&&fe(n,Request)?n.headers:r.headers;if(o)if(typeof Headers<"u"&&fe(o,Headers)){const a=new Headers(o);return a.append("sentry-trace",s),i&&a.append(Kn,i),a}else if(Array.isArray(o)){const a=[...o,["sentry-trace",s]];return i&&a.push([Kn,i]),a}else{const a="baggage"in o?o.baggage:void 0,c=[];return Array.isArray(a)?c.push(...a):a&&c.push(a),i&&c.push(i),{...o,"sentry-trace":s,baggage:c.length>0?c.join(","):void 0}}else return{"sentry-trace":s,baggage:i}}function Jd(n,e,t,r){if(!Nr()||n.xhr&&n.xhr.__sentry_own_request__||!(n.xhr&&n.xhr.__sentry_xhr__&&e(n.xhr.__sentry_xhr__.url)))return;const i=n.xhr.__sentry_xhr__;if(n.endTimestamp){const o=n.xhr.__sentry_xhr_span_id__;if(!o)return;const a=r[o];a&&(a.setHttpStatus(i.status_code),a.finish(),delete r[o]);return}const s=Nt();if(s){const o=s.startChild({data:{...i.data,type:"xhr",method:i.method,url:i.url},description:`${i.method} ${i.url}`,op:"http.client"});if(n.xhr.__sentry_xhr_span_id__=o.spanId,r[n.xhr.__sentry_xhr_span_id__]=o,n.xhr.setRequestHeader&&t(n.xhr.__sentry_xhr__.url))try{n.xhr.setRequestHeader("sentry-trace",o.toTraceparent());const a=s.getDynamicSamplingContext(),c=ys(a);c&&n.xhr.setRequestHeader(Kn,c),s.metadata.propagations+=1}catch{}}}function Wd(n,e=!0,t=!0){if(!N||!N.location){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.warn("Could not initialize routing instrumentation due to invalid location");return}let r=N.location.href,i;e&&(i=n({name:N.location.pathname,op:"pageload",metadata:{source:"url"}})),t&&te("history",({to:s,from:o})=>{if(o===void 0&&r&&r.indexOf(s)!==-1){r=void 0;return}o!==s&&(r=void 0,i&&((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.log(`[Tracing] Finishing current transaction with op: ${i.op}`),i.finish()),i=n({name:N.location.pathname,op:"navigation",metadata:{source:"url"}}))})}const Vd="BrowserTracing",Kd={idleTimeout:js,finalTimeout:Us,heartbeatInterval:Ps,markBackgroundTransactions:!0,routingInstrumentation:Wd,startTransactionOnLocationChange:!0,startTransactionOnPageLoad:!0,_experiments:{enableLongTask:!0},...an};class Ur{__init(){this.name=Vd}constructor(e){Ur.prototype.__init.call(this);let t=an.tracingOrigins;e&&(e.tracingOrigins&&Array.isArray(e.tracingOrigins)?t=e.tracingOrigins:(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&(this._emitOptionsWarning=!0)),this.options={...Kd,...e,tracingOrigins:t};const{_metricOptions:r}=this.options;Nd(r&&r._reportAllChanges),Fc([this,"access",i=>i.options,"access",i=>i._experiments,"optionalAccess",i=>i.enableLongTask])&&Ad()}setupOnce(e,t){this._getCurrentHub=t,this._emitOptionsWarning&&((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.warn("[Tracing] You need to define `tracingOrigins` in the options. Set an array of urls or patterns to trace."),(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.warn(`[Tracing] We added a reasonable default for you: ${an.tracingOrigins}`));const{routingInstrumentation:r,startTransactionOnLocationChange:i,startTransactionOnPageLoad:s,markBackgroundTransactions:o,traceFetch:a,traceXHR:c,tracingOrigins:u,shouldCreateSpanForRequest:l}=this.options;r(d=>this._createRouteTransaction(d),s,i),o&&wd(),Hd({traceFetch:a,traceXHR:c,tracingOrigins:u,shouldCreateSpanForRequest:l})}_createRouteTransaction(e){if(!this._getCurrentHub){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.warn(`[Tracing] Did not create ${e.op} transaction because _getCurrentHub is invalid.`);return}const{beforeNavigate:t,idleTimeout:r,finalTimeout:i,heartbeatInterval:s}=this.options,o=e.op==="pageload",a=o?Si("sentry-trace"):null,c=o?Si("baggage"):null,u=a?vu(a):void 0,l=c?$u(c):void 0,d={...e,...u,metadata:{...e.metadata,dynamicSamplingContext:u&&!l?{}:l},trimEnd:!0},_=typeof t=="function"?t(d):d,f=_===void 0?{...d,sampled:!1}:_;f.metadata=f.name!==d.name?{...f.metadata,source:"custom"}:f.metadata,f.sampled===!1&&(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.log(`[Tracing] Will not send ${f.op} transaction because of beforeNavigate.`),(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.log(`[Tracing] Starting ${f.op} transaction on scope`);const p=this._getCurrentHub(),{location:b}=N,y=bd(p,f,r,i,!0,{location:b},s);return y.registerBeforeFinishCallback(S=>{Pd(S),S.setTag("sentry_reportAllChanges",Boolean(this.options._metricOptions&&this.options._metricOptions._reportAllChanges))}),y}}function Si(n){const e=ss(`meta[name=${n}]`);return e?e.getAttribute("content"):null}(typeof __SENTRY_TRACING__>"u"||__SENTRY_TRACING__)&&Td();ld({dsn:"https://8d95b82da5804fdcaf8cbbeb7132edeb@glitch.puzzad.com/2",integrations:[new Ur],tracesSampleRate:.01,environment:"production"});new Oc({target:document.getElementById("app")});export{ch as $,Ni as A,rh as B,Wt as C,Xs as D,Yu as E,Cr as F,vh as G,lh as H,Eh as I,oh as J,yh as K,mh as L,Jt as M,ah as N,io as O,_o as P,Th as Q,ih as R,lr as S,Oe as T,Xd as U,hr as V,Zn as W,Ot as X,Ri as Y,uh as Z,no as _,ge as a,gt as a0,hh as a1,fh as a2,gh as a3,Qd as a4,eh as a5,th as a6,Zd as a7,Vt as a8,er as a9,nr as aa,ir as ab,Ks as ac,gc as ad,Zi as ae,sr as b,M as c,he as d,C as e,P as f,tn as g,ph as h,ur as i,kc as j,Qe as k,Ce as l,Be as m,Y as n,un as o,ln as p,nh as q,Gr as r,cn as s,oe as t,_h as u,bh as v,I as w,sh as x,ee as y,dh as z};
