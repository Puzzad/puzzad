function _o(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in n)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(n,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerpolicy&&(s.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?s.credentials="include":i.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();const mo="modulepreload",go=function(n){return"/"+n},Wr={},ie=function(e,t,r){if(!t||t.length===0)return e();const i=document.getElementsByTagName("link");return Promise.all(t.map(s=>{if(s=go(s),s in Wr)return;Wr[s]=!0;const o=s.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!r)for(let u=i.length-1;u>=0;u--){const d=i[u];if(d.href===s&&(!o||d.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${a}`))return;const l=document.createElement("link");if(l.rel=o?"stylesheet":mo,o||(l.as="script",l.crossOrigin=""),l.href=s,document.head.appendChild(l),o)return new Promise((u,d)=>{l.addEventListener("load",u),l.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>e())};function z(){}const dt=n=>n;function Ot(n,e){for(const t in e)n[t]=e[t];return n}function yo(n){return n&&typeof n=="object"&&typeof n.then=="function"}function Ki(n){return n()}function Vr(){return Object.create(null)}function Se(n){n.forEach(Ki)}function ft(n){return typeof n=="function"}function ht(n,e){return n!=n?e==e:n!==e||n&&typeof n=="object"||typeof n=="function"}let Jt;function Kr(n,e){return Jt||(Jt=document.createElement("a")),Jt.href=e,n===Jt.href}function bo(n){return Object.keys(n).length===0}function br(n,...e){if(n==null)return z;const t=n.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function Xr(n){let e;return br(n,t=>e=t)(),e}function Rn(n,e,t){n.$$.on_destroy.push(br(e,t))}function sn(n,e,t,r){if(n){const i=Xi(n,e,t,r);return n[0](i)}}function Xi(n,e,t,r){return n[1]&&r?Ot(t.ctx.slice(),n[1](r(e))):t.ctx}function on(n,e,t,r){if(n[2]&&r){const i=n[2](r(t));if(e.dirty===void 0)return i;if(typeof i=="object"){const s=[],o=Math.max(e.dirty.length,i.length);for(let a=0;a<o;a+=1)s[a]=e.dirty[a]|i[a];return s}return e.dirty|i}return e.dirty}function an(n,e,t,r,i,s){if(i){const o=Xi(e,t,r,s);n.p(o,i)}}function cn(n){if(n.ctx.length>32){const e=[],t=n.ctx.length/32;for(let r=0;r<t;r++)e[r]=-1;return e}return-1}function hn(n){return n==null?"":n}const Qi=typeof window<"u";let xn=Qi?()=>window.performance.now():()=>Date.now(),vr=Qi?n=>requestAnimationFrame(n):z;const Ze=new Set;function Zi(n){Ze.forEach(e=>{e.c(n)||(Ze.delete(e),e.f())}),Ze.size!==0&&vr(Zi)}function On(n){let e;return Ze.size===0&&vr(Zi),{promise:new Promise(t=>{Ze.add(e={c:n,f:t})}),abort(){Ze.delete(e)}}}function D(n,e){n.appendChild(e)}function es(n){if(!n)return document;const e=n.getRootNode?n.getRootNode():n.ownerDocument;return e&&e.host?e:n.ownerDocument}function vo(n){const e=$("style");return Eo(es(n),e),e.sheet}function Eo(n,e){return D(n.head||n,e),e.sheet}function N(n,e,t){n.insertBefore(e,t||null)}function I(n){n.parentNode.removeChild(n)}function wo(n,e){for(let t=0;t<n.length;t+=1)n[t]&&n[t].d(e)}function $(n){return document.createElement(n)}function oe(n){return document.createElementNS("http://www.w3.org/2000/svg",n)}function In(n){return document.createTextNode(n)}function X(){return In(" ")}function pt(){return In("")}function it(n,e,t,r){return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t,r)}function To(n){return function(e){return e.preventDefault(),n.call(this,e)}}function g(n,e,t){t==null?n.removeAttribute(e):n.getAttribute(e)!==t&&n.setAttribute(e,t)}function So(n){return Array.from(n.childNodes)}function ts(n,e){e=""+e,n.wholeText!==e&&(n.data=e)}function Qf(n,e){n.value=e==null?"":e}function pn(n,e,t,r){t===null?n.style.removeProperty(e):n.style.setProperty(e,t,r?"important":"")}function Zf(n,e,t){n.classList[t?"add":"remove"](e)}function ns(n,e,{bubbles:t=!1,cancelable:r=!1}={}){const i=document.createEvent("CustomEvent");return i.initCustomEvent(n,t,r,e),i}class eh{constructor(e=!1){this.is_svg=!1,this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,t,r=null){this.e||(this.is_svg?this.e=oe(t.nodeName):this.e=$(t.nodeName),this.t=t,this.c(e)),this.i(r)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.childNodes)}i(e){for(let t=0;t<this.n.length;t+=1)N(this.t,this.n[t],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(I)}}function st(n,e){return new n(e)}const _n=new Map;let mn=0;function ko(n){let e=5381,t=n.length;for(;t--;)e=(e<<5)-e^n.charCodeAt(t);return e>>>0}function Ro(n,e){const t={stylesheet:vo(e),rules:{}};return _n.set(n,t),t}function Er(n,e,t,r,i,s,o,a=0){const c=16.666/r;let l=`{
`;for(let y=0;y<=1;y+=c){const S=e+(t-e)*s(y);l+=y*100+`%{${o(S,1-S)}}
`}const u=l+`100% {${o(t,1-t)}}
}`,d=`__svelte_${ko(u)}_${a}`,f=es(n),{stylesheet:_,rules:h}=_n.get(f)||Ro(f,n);h[d]||(h[d]=!0,_.insertRule(`@keyframes ${d} ${u}`,_.cssRules.length));const m=n.style.animation||"";return n.style.animation=`${m?`${m}, `:""}${d} ${r}ms linear ${i}ms 1 both`,mn+=1,d}function gn(n,e){const t=(n.style.animation||"").split(", "),r=t.filter(e?s=>s.indexOf(e)<0:s=>s.indexOf("__svelte")===-1),i=t.length-r.length;i&&(n.style.animation=r.join(", "),mn-=i,mn||xo())}function xo(){vr(()=>{mn||(_n.forEach(n=>{const{ownerNode:e}=n.stylesheet;e&&I(e)}),_n.clear())})}function Oo(n,e,t,r){if(!e)return z;const i=n.getBoundingClientRect();if(e.left===i.left&&e.right===i.right&&e.top===i.top&&e.bottom===i.bottom)return z;const{delay:s=0,duration:o=300,easing:a=dt,start:c=xn()+s,end:l=c+o,tick:u=z,css:d}=t(n,{from:e,to:i},r);let f=!0,_=!1,h;function m(){d&&(h=Er(n,0,1,o,s,a,d)),s||(_=!0)}function y(){d&&gn(n,h),f=!1}return On(S=>{if(!_&&S>=c&&(_=!0),_&&S>=l&&(u(1,0),y()),!f)return!1;if(_){const A=S-c,R=0+1*a(A/o);u(R,1-R)}return!0}),m(),u(0,1),y}function Io(n){const e=getComputedStyle(n);if(e.position!=="absolute"&&e.position!=="fixed"){const{width:t,height:r}=e,i=n.getBoundingClientRect();n.style.position="absolute",n.style.width=t,n.style.height=r,rs(n,i)}}function rs(n,e){const t=n.getBoundingClientRect();if(e.left!==t.left||e.top!==t.top){const r=getComputedStyle(n),i=r.transform==="none"?"":r.transform;n.style.transform=`${i} translate(${e.left-t.left}px, ${e.top-t.top}px)`}}let It;function Te(n){It=n}function Gt(){if(!It)throw new Error("Function called outside component initialization");return It}function is(n){Gt().$$.on_mount.push(n)}function Do(n){Gt().$$.after_update.push(n)}function No(n){Gt().$$.on_destroy.push(n)}function Ao(){const n=Gt();return(e,t,{cancelable:r=!1}={})=>{const i=n.$$.callbacks[e];if(i){const s=ns(e,t,{cancelable:r});return i.slice().forEach(o=>{o.call(n,s)}),!s.defaultPrevented}return!0}}function Qr(n,e){const t=n.$$.callbacks[e.type];t&&t.slice().forEach(r=>r.call(this,e))}const Et=[],Zr=[],ln=[],ir=[],ss=Promise.resolve();let sr=!1;function os(){sr||(sr=!0,ss.then(Tr))}function wr(){return os(),ss}function ot(n){ln.push(n)}function th(n){ir.push(n)}const Jn=new Set;let Wt=0;function Tr(){const n=It;do{for(;Wt<Et.length;){const e=Et[Wt];Wt++,Te(e),$o(e.$$)}for(Te(null),Et.length=0,Wt=0;Zr.length;)Zr.pop()();for(let e=0;e<ln.length;e+=1){const t=ln[e];Jn.has(t)||(Jn.add(t),t())}ln.length=0}while(Et.length);for(;ir.length;)ir.pop()();sr=!1,Jn.clear(),Te(n)}function $o(n){if(n.fragment!==null){n.update(),Se(n.before_update);const e=n.dirty;n.dirty=[-1],n.fragment&&n.fragment.p(n.ctx,e),n.after_update.forEach(ot)}}let bt;function as(){return bt||(bt=Promise.resolve(),bt.then(()=>{bt=null})),bt}function yn(n,e,t){n.dispatchEvent(ns(`${e?"intro":"outro"}${t}`))}const un=new Set;let Oe;function Ue(){Oe={r:0,c:[],p:Oe}}function Pe(){Oe.r||Se(Oe.c),Oe=Oe.p}function M(n,e){n&&n.i&&(un.delete(n),n.i(e))}function q(n,e,t,r){if(n&&n.o){if(un.has(n))return;un.add(n),Oe.c.push(()=>{un.delete(n),r&&(t&&n.d(1),r())}),n.o(e)}else r&&r()}const cs={duration:0};function jo(n,e,t){let r=e(n,t),i=!1,s,o,a=0;function c(){s&&gn(n,s)}function l(){const{delay:d=0,duration:f=300,easing:_=dt,tick:h=z,css:m}=r||cs;m&&(s=Er(n,0,1,f,d,_,m,a++)),h(0,1);const y=xn()+d,S=y+f;o&&o.abort(),i=!0,ot(()=>yn(n,!0,"start")),o=On(A=>{if(i){if(A>=S)return h(1,0),yn(n,!0,"end"),c(),i=!1;if(A>=y){const R=_((A-y)/f);h(R,1-R)}}return i})}let u=!1;return{start(){u||(u=!0,gn(n),ft(r)?(r=r(),as().then(l)):l())},invalidate(){u=!1},end(){i&&(c(),i=!1)}}}function Uo(n,e,t){let r=e(n,t),i=!0,s;const o=Oe;o.r+=1;function a(){const{delay:c=0,duration:l=300,easing:u=dt,tick:d=z,css:f}=r||cs;f&&(s=Er(n,1,0,l,c,u,f));const _=xn()+c,h=_+l;ot(()=>yn(n,!1,"start")),On(m=>{if(i){if(m>=h)return d(0,1),yn(n,!1,"end"),--o.r||Se(o.c),!1;if(m>=_){const y=u((m-_)/l);d(1-y,y)}}return i})}return ft(r)?as().then(()=>{r=r(),a()}):a(),{end(c){c&&r.tick&&r.tick(1,0),i&&(s&&gn(n,s),i=!1)}}}function nh(n,e){const t=e.token={};function r(i,s,o,a){if(e.token!==t)return;e.resolved=a;let c=e.ctx;o!==void 0&&(c=c.slice(),c[o]=a);const l=i&&(e.current=i)(c);let u=!1;e.block&&(e.blocks?e.blocks.forEach((d,f)=>{f!==s&&d&&(Ue(),q(d,1,1,()=>{e.blocks[f]===d&&(e.blocks[f]=null)}),Pe())}):e.block.d(1),l.c(),M(l,1),l.m(e.mount(),e.anchor),u=!0),e.block=l,e.blocks&&(e.blocks[s]=l),u&&Tr()}if(yo(n)){const i=Gt();if(n.then(s=>{Te(i),r(e.then,1,e.value,s),Te(null)},s=>{if(Te(i),r(e.catch,2,e.error,s),Te(null),!e.hasCatch)throw s}),e.current!==e.pending)return r(e.pending,0),!0}else{if(e.current!==e.then)return r(e.then,1,e.value,n),!0;e.resolved=n}}function rh(n,e,t){const r=e.slice(),{resolved:i}=n;n.current===n.then&&(r[n.value]=i),n.current===n.catch&&(r[n.error]=i),n.block.p(r,t)}function ih(n,e){n.d(1),e.delete(n.key)}function Po(n,e){q(n,1,1,()=>{e.delete(n.key)})}function Bo(n,e){n.f(),Po(n,e)}function Co(n,e,t,r,i,s,o,a,c,l,u,d){let f=n.length,_=s.length,h=f;const m={};for(;h--;)m[n[h].key]=h;const y=[],S=new Map,A=new Map;for(h=_;h--;){const w=d(i,s,h),U=t(w);let x=o.get(U);x?r&&x.p(w,e):(x=l(U,w),x.c()),S.set(U,y[h]=x),U in m&&A.set(U,Math.abs(h-m[U]))}const R=new Set,E=new Set;function T(w){M(w,1),w.m(a,u),o.set(w.key,w),u=w.first,_--}for(;f&&_;){const w=y[_-1],U=n[f-1],x=w.key,F=U.key;w===U?(u=w.first,f--,_--):S.has(F)?!o.has(x)||R.has(x)?T(w):E.has(F)?f--:A.get(x)>A.get(F)?(E.add(x),T(w)):(R.add(F),f--):(c(U,o),f--)}for(;f--;){const w=n[f];S.has(w.key)||c(w,o)}for(;_;)T(y[_-1]);return y}function ls(n,e){const t={},r={},i={$$scope:1};let s=n.length;for(;s--;){const o=n[s],a=e[s];if(a){for(const c in o)c in a||(r[c]=1);for(const c in a)i[c]||(t[c]=a[c],i[c]=1);n[s]=a}else for(const c in o)i[c]=1}for(const o in r)o in t||(t[o]=void 0);return t}function us(n){return typeof n=="object"&&n!==null?n:{}}function sh(n,e,t){const r=n.$$.props[e];r!==void 0&&(n.$$.bound[r]=t,t(n.$$.ctx[r]))}function be(n){n&&n.c()}function fe(n,e,t,r){const{fragment:i,after_update:s}=n.$$;i&&i.m(e,t),r||ot(()=>{const o=n.$$.on_mount.map(Ki).filter(ft);n.$$.on_destroy?n.$$.on_destroy.push(...o):Se(o),n.$$.on_mount=[]}),s.forEach(ot)}function he(n,e){const t=n.$$;t.fragment!==null&&(Se(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function Lo(n,e){n.$$.dirty[0]===-1&&(Et.push(n),os(),n.$$.dirty.fill(0)),n.$$.dirty[e/31|0]|=1<<e%31}function Mt(n,e,t,r,i,s,o,a=[-1]){const c=It;Te(n);const l=n.$$={fragment:null,ctx:[],props:s,update:z,not_equal:i,bound:Vr(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(c?c.$$.context:[])),callbacks:Vr(),dirty:a,skip_bound:!1,root:e.target||c.$$.root};o&&o(l.root);let u=!1;if(l.ctx=t?t(n,e.props||{},(d,f,..._)=>{const h=_.length?_[0]:f;return l.ctx&&i(l.ctx[d],l.ctx[d]=h)&&(!l.skip_bound&&l.bound[d]&&l.bound[d](h),u&&Lo(n,d)),f}):[],l.update(),u=!0,Se(l.before_update),l.fragment=r?r(l.ctx):!1,e.target){if(e.hydrate){const d=So(e.target);l.fragment&&l.fragment.l(d),d.forEach(I)}else l.fragment&&l.fragment.c();e.intro&&M(n.$$.fragment),fe(n,e.target,e.anchor,e.customElement),Tr()}Te(c)}class Ft{$destroy(){he(this,1),this.$destroy=z}$on(e,t){if(!ft(t))return z;const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(t),()=>{const i=r.indexOf(t);i!==-1&&r.splice(i,1)}}$set(e){this.$$set&&!bo(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Go="/assets/logo.de2ae63a.png";function _e(n){if(!n)throw Error("Parameter args is required");if(!n.component==!n.asyncComponent)throw Error("One and only one of component and asyncComponent is required");if(n.component&&(n.asyncComponent=()=>Promise.resolve(n.component)),typeof n.asyncComponent!="function")throw Error("Parameter asyncComponent must be a function");if(n.conditions){Array.isArray(n.conditions)||(n.conditions=[n.conditions]);for(let t=0;t<n.conditions.length;t++)if(!n.conditions[t]||typeof n.conditions[t]!="function")throw Error("Invalid parameter conditions["+t+"]")}return n.loadingComponent&&(n.asyncComponent.loading=n.loadingComponent,n.asyncComponent.loadingParams=n.loadingParams||void 0),{component:n.asyncComponent,userData:n.userData,conditions:n.conditions&&n.conditions.length?n.conditions:void 0,props:n.props&&Object.keys(n.props).length?n.props:{},_sveltesparouter:!0}}const Je=[];function Sr(n,e){return{subscribe:Yt(n,e).subscribe}}function Yt(n,e=z){let t;const r=new Set;function i(a){if(ht(n,a)&&(n=a,t)){const c=!Je.length;for(const l of r)l[1](),Je.push(l,n);if(c){for(let l=0;l<Je.length;l+=2)Je[l][0](Je[l+1]);Je.length=0}}}function s(a){i(a(n))}function o(a,c=z){const l=[a,c];return r.add(l),r.size===1&&(t=e(i)||z),a(n),()=>{r.delete(l),r.size===0&&(t(),t=null)}}return{set:i,update:s,subscribe:o}}function ds(n,e,t){const r=!Array.isArray(n),i=r?[n]:n,s=e.length<2;return Sr(t,o=>{let a=!1;const c=[];let l=0,u=z;const d=()=>{if(l)return;u();const _=e(r?c[0]:c,o);s?o(_):u=ft(_)?_:z},f=i.map((_,h)=>br(_,m=>{c[h]=m,l&=~(1<<h),a&&d()},()=>{l|=1<<h}));return a=!0,d(),function(){Se(f),u()}})}function Mo(n,e){if(n instanceof RegExp)return{keys:!1,pattern:n};var t,r,i,s,o=[],a="",c=n.split("/");for(c[0]||c.shift();i=c.shift();)t=i[0],t==="*"?(o.push("wild"),a+="/(.*)"):t===":"?(r=i.indexOf("?",1),s=i.indexOf(".",1),o.push(i.substring(1,~r?r:~s?s:i.length)),a+=!!~r&&!~s?"(?:/([^/]+?))?":"/([^/]+?)",~s&&(a+=(~r?"?":"")+"\\"+i.substring(s))):a+="/"+i;return{keys:o,pattern:new RegExp("^"+a+(e?"(?=$|/)":"/?$"),"i")}}function Fo(n){let e,t,r;const i=[n[2]];var s=n[0];function o(a){let c={};for(let l=0;l<i.length;l+=1)c=Ot(c,i[l]);return{props:c}}return s&&(e=st(s,o()),e.$on("routeEvent",n[7])),{c(){e&&be(e.$$.fragment),t=pt()},m(a,c){e&&fe(e,a,c),N(a,t,c),r=!0},p(a,c){const l=c&4?ls(i,[us(a[2])]):{};if(s!==(s=a[0])){if(e){Ue();const u=e;q(u.$$.fragment,1,0,()=>{he(u,1)}),Pe()}s?(e=st(s,o()),e.$on("routeEvent",a[7]),be(e.$$.fragment),M(e.$$.fragment,1),fe(e,t.parentNode,t)):e=null}else s&&e.$set(l)},i(a){r||(e&&M(e.$$.fragment,a),r=!0)},o(a){e&&q(e.$$.fragment,a),r=!1},d(a){a&&I(t),e&&he(e,a)}}}function Yo(n){let e,t,r;const i=[{params:n[1]},n[2]];var s=n[0];function o(a){let c={};for(let l=0;l<i.length;l+=1)c=Ot(c,i[l]);return{props:c}}return s&&(e=st(s,o()),e.$on("routeEvent",n[6])),{c(){e&&be(e.$$.fragment),t=pt()},m(a,c){e&&fe(e,a,c),N(a,t,c),r=!0},p(a,c){const l=c&6?ls(i,[c&2&&{params:a[1]},c&4&&us(a[2])]):{};if(s!==(s=a[0])){if(e){Ue();const u=e;q(u.$$.fragment,1,0,()=>{he(u,1)}),Pe()}s?(e=st(s,o()),e.$on("routeEvent",a[6]),be(e.$$.fragment),M(e.$$.fragment,1),fe(e,t.parentNode,t)):e=null}else s&&e.$set(l)},i(a){r||(e&&M(e.$$.fragment,a),r=!0)},o(a){e&&q(e.$$.fragment,a),r=!1},d(a){a&&I(t),e&&he(e,a)}}}function Ho(n){let e,t,r,i;const s=[Yo,Fo],o=[];function a(c,l){return c[1]?0:1}return e=a(n),t=o[e]=s[e](n),{c(){t.c(),r=pt()},m(c,l){o[e].m(c,l),N(c,r,l),i=!0},p(c,[l]){let u=e;e=a(c),e===u?o[e].p(c,l):(Ue(),q(o[u],1,1,()=>{o[u]=null}),Pe(),t=o[e],t?t.p(c,l):(t=o[e]=s[e](c),t.c()),M(t,1),t.m(r.parentNode,r))},i(c){i||(M(t),i=!0)},o(c){q(t),i=!1},d(c){o[e].d(c),c&&I(r)}}}function ei(){const n=window.location.href.indexOf("#/");let e=n>-1?window.location.href.substr(n+1):"/";const t=e.indexOf("?");let r="";return t>-1&&(r=e.substr(t+1),e=e.substr(0,t)),{location:e,querystring:r}}const kr=Sr(null,function(e){e(ei());const t=()=>{e(ei())};return window.addEventListener("hashchange",t,!1),function(){window.removeEventListener("hashchange",t,!1)}});ds(kr,n=>n.location);ds(kr,n=>n.querystring);const ti=Yt(void 0);async function oh(n){if(!n||n.length<1||n.charAt(0)!="/"&&n.indexOf("#/")!==0)throw Error("Invalid parameter location");await wr(),history.replaceState({...history.state,__svelte_spa_router_scrollX:window.scrollX,__svelte_spa_router_scrollY:window.scrollY},void 0),window.location.hash=(n.charAt(0)=="#"?"":"#")+n}async function zo(n){if(!n||n.length<1||n.charAt(0)!="/"&&n.indexOf("#/")!==0)throw Error("Invalid parameter location");await wr();const e=(n.charAt(0)=="#"?"":"#")+n;try{const t={...history.state};delete t.__svelte_spa_router_scrollX,delete t.__svelte_spa_router_scrollY,window.history.replaceState(t,void 0,e)}catch{console.warn("Caught exception while replacing the current page. If you're running this in the Svelte REPL, please note that the `replace` method might not work in this environment.")}window.dispatchEvent(new Event("hashchange"))}function qo(n){n?window.scrollTo(n.__svelte_spa_router_scrollX,n.__svelte_spa_router_scrollY):window.scrollTo(0,0)}function Jo(n,e,t){let{routes:r={}}=e,{prefix:i=""}=e,{restoreScrollState:s=!1}=e;class o{constructor(T,w){if(!w||typeof w!="function"&&(typeof w!="object"||w._sveltesparouter!==!0))throw Error("Invalid component object");if(!T||typeof T=="string"&&(T.length<1||T.charAt(0)!="/"&&T.charAt(0)!="*")||typeof T=="object"&&!(T instanceof RegExp))throw Error('Invalid value for "path" argument - strings must start with / or *');const{pattern:U,keys:x}=Mo(T);this.path=T,typeof w=="object"&&w._sveltesparouter===!0?(this.component=w.component,this.conditions=w.conditions||[],this.userData=w.userData,this.props=w.props||{}):(this.component=()=>Promise.resolve(w),this.conditions=[],this.props={}),this._pattern=U,this._keys=x}match(T){if(i){if(typeof i=="string")if(T.startsWith(i))T=T.substr(i.length)||"/";else return null;else if(i instanceof RegExp){const F=T.match(i);if(F&&F[0])T=T.substr(F[0].length)||"/";else return null}}const w=this._pattern.exec(T);if(w===null)return null;if(this._keys===!1)return w;const U={};let x=0;for(;x<this._keys.length;){try{U[this._keys[x]]=decodeURIComponent(w[x+1]||"")||null}catch{U[this._keys[x]]=null}x++}return U}async checkConditions(T){for(let w=0;w<this.conditions.length;w++)if(!await this.conditions[w](T))return!1;return!0}}const a=[];r instanceof Map?r.forEach((E,T)=>{a.push(new o(T,E))}):Object.keys(r).forEach(E=>{a.push(new o(E,r[E]))});let c=null,l=null,u={};const d=Ao();async function f(E,T){await wr(),d(E,T)}let _=null,h=null;s&&(h=E=>{E.state&&(E.state.__svelte_spa_router_scrollY||E.state.__svelte_spa_router_scrollX)?_=E.state:_=null},window.addEventListener("popstate",h),Do(()=>{qo(_)}));let m=null,y=null;const S=kr.subscribe(async E=>{m=E;let T=0;for(;T<a.length;){const w=a[T].match(E.location);if(!w){T++;continue}const U={route:a[T].path,location:E.location,querystring:E.querystring,userData:a[T].userData,params:w&&typeof w=="object"&&Object.keys(w).length?w:null};if(!await a[T].checkConditions(U)){t(0,c=null),y=null,f("conditionsFailed",U);return}f("routeLoading",Object.assign({},U));const x=a[T].component;if(y!=x){x.loading?(t(0,c=x.loading),y=x,t(1,l=x.loadingParams),t(2,u={}),f("routeLoaded",Object.assign({},U,{component:c,name:c.name,params:l}))):(t(0,c=null),y=null);const F=await x();if(E!=m)return;t(0,c=F&&F.default||F),y=x}w&&typeof w=="object"&&Object.keys(w).length?t(1,l=w):t(1,l=null),t(2,u=a[T].props),f("routeLoaded",Object.assign({},U,{component:c,name:c.name,params:l})).then(()=>{ti.set(l)});return}t(0,c=null),y=null,ti.set(void 0)});No(()=>{S(),h&&window.removeEventListener("popstate",h)});function A(E){Qr.call(this,n,E)}function R(E){Qr.call(this,n,E)}return n.$$set=E=>{"routes"in E&&t(3,r=E.routes),"prefix"in E&&t(4,i=E.prefix),"restoreScrollState"in E&&t(5,s=E.restoreScrollState)},n.$$.update=()=>{n.$$.dirty&32&&(history.scrollRestoration=s?"manual":"auto")},[c,l,u,r,i,s,A,R]}class Wo extends Ft{constructor(e){super(),Mt(this,e,Jo,Ho,ht,{routes:3,prefix:4,restoreScrollState:5})}}var Vo=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((r=r.apply(n,e||[])).next())})};const Ko=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>Vo(void 0,void 0,void 0,function*(){return yield(yield ie(()=>Promise.resolve().then(()=>Dn),void 0)).fetch(...t)}):e=fetch,(...t)=>e(...t)};class Rr extends Error{constructor(e,t="FunctionsError",r){super(e),super.name=t,this.context=r}}class Xo extends Rr{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Qo extends Rr{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Zo extends Rr{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var ea=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((r=r.apply(n,e||[])).next())})};class ta{constructor(e,{headers:t={},customFetch:r}={}){this.url=e,this.headers=t,this.fetch=Ko(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var r;return ea(this,void 0,void 0,function*(){try{const{headers:i,body:s}=t;let o={},a;s&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&s instanceof Blob||s instanceof ArrayBuffer?(o["Content-Type"]="application/octet-stream",a=s):typeof s=="string"?(o["Content-Type"]="text/plain",a=s):typeof FormData<"u"&&s instanceof FormData?a=s:(o["Content-Type"]="application/json",a=JSON.stringify(s)));const c=yield this.fetch(`${this.url}/${e}`,{method:"POST",headers:Object.assign(Object.assign(Object.assign({},o),this.headers),i),body:a}).catch(f=>{throw new Xo(f)}),l=c.headers.get("x-relay-error");if(l&&l==="true")throw new Qo(c);if(!c.ok)throw new Zo(c);let u=((r=c.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),d;return u==="application/json"?d=yield c.json():u==="application/octet-stream"?d=yield c.blob():u==="multipart/form-data"?d=yield c.formData():d=yield c.text(),{data:d,error:null}}catch(i){return{data:null,error:i}}})}}var na=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ra(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Dt={exports:{}};(function(n,e){var t=typeof self<"u"?self:na,r=function(){function s(){this.fetch=!1,this.DOMException=t.DOMException}return s.prototype=t,new s}();(function(s){(function(o){var a={searchParams:"URLSearchParams"in s,iterable:"Symbol"in s&&"iterator"in Symbol,blob:"FileReader"in s&&"Blob"in s&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in s,arrayBuffer:"ArrayBuffer"in s};function c(p){return p&&DataView.prototype.isPrototypeOf(p)}if(a.arrayBuffer)var l=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],u=ArrayBuffer.isView||function(p){return p&&l.indexOf(Object.prototype.toString.call(p))>-1};function d(p){if(typeof p!="string"&&(p=String(p)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(p))throw new TypeError("Invalid character in header field name");return p.toLowerCase()}function f(p){return typeof p!="string"&&(p=String(p)),p}function _(p){var v={next:function(){var O=p.shift();return{done:O===void 0,value:O}}};return a.iterable&&(v[Symbol.iterator]=function(){return v}),v}function h(p){this.map={},p instanceof h?p.forEach(function(v,O){this.append(O,v)},this):Array.isArray(p)?p.forEach(function(v){this.append(v[0],v[1])},this):p&&Object.getOwnPropertyNames(p).forEach(function(v){this.append(v,p[v])},this)}h.prototype.append=function(p,v){p=d(p),v=f(v);var O=this.map[p];this.map[p]=O?O+", "+v:v},h.prototype.delete=function(p){delete this.map[d(p)]},h.prototype.get=function(p){return p=d(p),this.has(p)?this.map[p]:null},h.prototype.has=function(p){return this.map.hasOwnProperty(d(p))},h.prototype.set=function(p,v){this.map[d(p)]=f(v)},h.prototype.forEach=function(p,v){for(var O in this.map)this.map.hasOwnProperty(O)&&p.call(v,this.map[O],O,this)},h.prototype.keys=function(){var p=[];return this.forEach(function(v,O){p.push(O)}),_(p)},h.prototype.values=function(){var p=[];return this.forEach(function(v){p.push(v)}),_(p)},h.prototype.entries=function(){var p=[];return this.forEach(function(v,O){p.push([O,v])}),_(p)},a.iterable&&(h.prototype[Symbol.iterator]=h.prototype.entries);function m(p){if(p.bodyUsed)return Promise.reject(new TypeError("Already read"));p.bodyUsed=!0}function y(p){return new Promise(function(v,O){p.onload=function(){v(p.result)},p.onerror=function(){O(p.error)}})}function S(p){var v=new FileReader,O=y(v);return v.readAsArrayBuffer(p),O}function A(p){var v=new FileReader,O=y(v);return v.readAsText(p),O}function R(p){for(var v=new Uint8Array(p),O=new Array(v.length),ee=0;ee<v.length;ee++)O[ee]=String.fromCharCode(v[ee]);return O.join("")}function E(p){if(p.slice)return p.slice(0);var v=new Uint8Array(p.byteLength);return v.set(new Uint8Array(p)),v.buffer}function T(){return this.bodyUsed=!1,this._initBody=function(p){this._bodyInit=p,p?typeof p=="string"?this._bodyText=p:a.blob&&Blob.prototype.isPrototypeOf(p)?this._bodyBlob=p:a.formData&&FormData.prototype.isPrototypeOf(p)?this._bodyFormData=p:a.searchParams&&URLSearchParams.prototype.isPrototypeOf(p)?this._bodyText=p.toString():a.arrayBuffer&&a.blob&&c(p)?(this._bodyArrayBuffer=E(p.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):a.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(p)||u(p))?this._bodyArrayBuffer=E(p):this._bodyText=p=Object.prototype.toString.call(p):this._bodyText="",this.headers.get("content-type")||(typeof p=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):a.searchParams&&URLSearchParams.prototype.isPrototypeOf(p)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},a.blob&&(this.blob=function(){var p=m(this);if(p)return p;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?m(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(S)}),this.text=function(){var p=m(this);if(p)return p;if(this._bodyBlob)return A(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(R(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},a.formData&&(this.formData=function(){return this.text().then(F)}),this.json=function(){return this.text().then(JSON.parse)},this}var w=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function U(p){var v=p.toUpperCase();return w.indexOf(v)>-1?v:p}function x(p,v){v=v||{};var O=v.body;if(p instanceof x){if(p.bodyUsed)throw new TypeError("Already read");this.url=p.url,this.credentials=p.credentials,v.headers||(this.headers=new h(p.headers)),this.method=p.method,this.mode=p.mode,this.signal=p.signal,!O&&p._bodyInit!=null&&(O=p._bodyInit,p.bodyUsed=!0)}else this.url=String(p);if(this.credentials=v.credentials||this.credentials||"same-origin",(v.headers||!this.headers)&&(this.headers=new h(v.headers)),this.method=U(v.method||this.method||"GET"),this.mode=v.mode||this.mode||null,this.signal=v.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&O)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(O)}x.prototype.clone=function(){return new x(this,{body:this._bodyInit})};function F(p){var v=new FormData;return p.trim().split("&").forEach(function(O){if(O){var ee=O.split("="),V=ee.shift().replace(/\+/g," "),B=ee.join("=").replace(/\+/g," ");v.append(decodeURIComponent(V),decodeURIComponent(B))}}),v}function Q(p){var v=new h,O=p.replace(/\r?\n[\t ]+/g," ");return O.split(/\r?\n/).forEach(function(ee){var V=ee.split(":"),B=V.shift().trim();if(B){var qt=V.join(":").trim();v.append(B,qt)}}),v}T.call(x.prototype);function k(p,v){v||(v={}),this.type="default",this.status=v.status===void 0?200:v.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in v?v.statusText:"OK",this.headers=new h(v.headers),this.url=v.url||"",this._initBody(p)}T.call(k.prototype),k.prototype.clone=function(){return new k(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new h(this.headers),url:this.url})},k.error=function(){var p=new k(null,{status:0,statusText:""});return p.type="error",p};var Z=[301,302,303,307,308];k.redirect=function(p,v){if(Z.indexOf(v)===-1)throw new RangeError("Invalid status code");return new k(null,{status:v,headers:{location:p}})},o.DOMException=s.DOMException;try{new o.DOMException}catch{o.DOMException=function(v,O){this.message=v,this.name=O;var ee=Error(v);this.stack=ee.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function zn(p,v){return new Promise(function(O,ee){var V=new x(p,v);if(V.signal&&V.signal.aborted)return ee(new o.DOMException("Aborted","AbortError"));var B=new XMLHttpRequest;function qt(){B.abort()}B.onload=function(){var yt={status:B.status,statusText:B.statusText,headers:Q(B.getAllResponseHeaders()||"")};yt.url="responseURL"in B?B.responseURL:yt.headers.get("X-Request-URL");var qn="response"in B?B.response:B.responseText;O(new k(qn,yt))},B.onerror=function(){ee(new TypeError("Network request failed"))},B.ontimeout=function(){ee(new TypeError("Network request failed"))},B.onabort=function(){ee(new o.DOMException("Aborted","AbortError"))},B.open(V.method,V.url,!0),V.credentials==="include"?B.withCredentials=!0:V.credentials==="omit"&&(B.withCredentials=!1),"responseType"in B&&a.blob&&(B.responseType="blob"),V.headers.forEach(function(yt,qn){B.setRequestHeader(qn,yt)}),V.signal&&(V.signal.addEventListener("abort",qt),B.onreadystatechange=function(){B.readyState===4&&V.signal.removeEventListener("abort",qt)}),B.send(typeof V._bodyInit>"u"?null:V._bodyInit)})}return zn.polyfill=!0,s.fetch||(s.fetch=zn,s.Headers=h,s.Request=x,s.Response=k),o.Headers=h,o.Request=x,o.Response=k,o.fetch=zn,Object.defineProperty(o,"__esModule",{value:!0}),o})({})})(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var i=r;e=i.fetch,e.default=i.fetch,e.fetch=i.fetch,e.Headers=i.Headers,e.Request=i.Request,e.Response=i.Response,n.exports=e})(Dt,Dt.exports);const xr=ra(Dt.exports),Dn=_o({__proto__:null,default:xr},[Dt.exports]);var ia=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((r=r.apply(n,e||[])).next())})};class sa{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.allowEmpty=e.allowEmpty,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=xr:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}then(e,t){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const r=this.fetch;let i=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(s=>ia(this,void 0,void 0,function*(){var o,a,c;let l=null,u=null,d=null,f=s.status,_=s.statusText;if(s.ok){if(this.method!=="HEAD"){const S=yield s.text();S===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?u=S:u=JSON.parse(S))}const m=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),y=(a=s.headers.get("content-range"))===null||a===void 0?void 0:a.split("/");m&&y&&y.length>1&&(d=parseInt(y[1]))}else{const m=yield s.text();try{l=JSON.parse(m)}catch{l={message:m}}if(l&&this.allowEmpty&&((c=l==null?void 0:l.details)===null||c===void 0?void 0:c.includes("Results contain 0 rows"))&&(l=null,f=200,_="OK"),l&&this.shouldThrowOnError)throw l}return{error:l,data:u,count:d,status:f,statusText:_}}));return this.shouldThrowOnError||(i=i.catch(s=>({error:{message:`FetchError: ${s.message}`,details:"",hint:"",code:s.code||""},data:null,count:null,status:0,statusText:""}))),i.then(e,t)}}class oa extends sa{select(e){let t=!1;const r=(e!=null?e:"*").split("").map(i=>/\s/.test(i)&&!t?"":(i==='"'&&(t=!t),i)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:t=!0,nullsFirst:r,foreignTable:i}={}){const s=i?`${i}.order`:"order",o=this.url.searchParams.get(s);return this.url.searchParams.set(s,`${o?`${o},`:""}${e}.${t?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t}={}){const r=typeof t>"u"?"limit":`${t}.limit`;return this.url.searchParams.set(r,`${e}`),this}range(e,t,{foreignTable:r}={}){const i=typeof r>"u"?"offset":`${r}.offset`,s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(s,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.headers.Accept="application/vnd.pgrst.object+json",this.allowEmpty=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:i=!1,wal:s=!1,format:o="text"}={}){const a=[e?"analyze":null,t?"verbose":null,r?"settings":null,i?"buffers":null,s?"wal":null].filter(Boolean).join("|"),c=this.headers.Accept;return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${c}"; options=${a};`,o==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}class Ke extends oa{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const r=t.map(i=>typeof i=="string"&&new RegExp("[,()]").test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:r,type:i}={}){let s="";i==="plain"?s="pl":i==="phrase"?s="ph":i==="websearch"&&(s="w");const o=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${s}fts${o}.${t}`),this}match(e){return Object.entries(e).forEach(([t,r])=>{this.url.searchParams.append(t,`eq.${r}`)}),this}not(e,t,r){return this.url.searchParams.append(e,`not.${t}.${r}`),this}or(e,{foreignTable:t}={}){const r=t?`${t}.or`:"or";return this.url.searchParams.append(r,`(${e})`),this}filter(e,t,r){return this.url.searchParams.append(e,`${t}.${r}`),this}}class aa{constructor(e,{headers:t={},schema:r,fetch:i}){this.url=e,this.headers=t,this.schema=r,this.fetch=i}select(e,{head:t=!1,count:r}={}){const i=t?"HEAD":"GET";let s=!1;const o=(e!=null?e:"*").split("").map(a=>/\s/.test(a)&&!s?"":(a==='"'&&(s=!s),a)).join("");return this.url.searchParams.set("select",o),r&&(this.headers.Prefer=`count=${r}`),new Ke({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:t}={}){const r="POST",i=[],s=e;if(t&&i.push(`count=${t}`),this.headers.Prefer&&i.unshift(this.headers.Prefer),this.headers.Prefer=i.join(","),Array.isArray(e)){const o=e.reduce((a,c)=>a.concat(Object.keys(c)),[]);if(o.length>0){const a=[...new Set(o)].map(c=>`"${c}"`);this.url.searchParams.set("columns",a.join(","))}}return new Ke({method:r,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:t,ignoreDuplicates:r=!1,count:i}={}){const s="POST",o=[`resolution=${r?"ignore":"merge"}-duplicates`];t!==void 0&&this.url.searchParams.set("on_conflict",t);const a=e;return i&&o.push(`count=${i}`),this.headers.Prefer&&o.unshift(this.headers.Prefer),this.headers.Prefer=o.join(","),new Ke({method:s,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:this.fetch,allowEmpty:!1})}update(e,{count:t}={}){const r="PATCH",i=[],s=e;return t&&i.push(`count=${t}`),this.headers.Prefer&&i.unshift(this.headers.Prefer),this.headers.Prefer=i.join(","),new Ke({method:r,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const t="DELETE",r=[];return e&&r.push(`count=${e}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new Ke({method:t,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}const ca="1.1.0",la={"X-Client-Info":`postgrest-js/${ca}`};class ua{constructor(e,{headers:t={},schema:r,fetch:i}={}){this.url=e,this.headers=Object.assign(Object.assign({},la),t),this.schema=r,this.fetch=i}from(e){const t=new URL(`${this.url}/${e}`);return new aa(t,{headers:Object.assign({},this.headers),schema:this.schema,fetch:this.fetch})}rpc(e,t={},{head:r=!1,count:i}={}){let s;const o=new URL(`${this.url}/rpc/${e}`);let a;r?(s="HEAD",Object.entries(t).forEach(([l,u])=>{o.searchParams.append(l,`${u}`)})):(s="POST",a=t);const c=Object.assign({},this.headers);return i&&(c.Prefer=`count=${i}`),new Ke({method:s,url:o,headers:c,schema:this.schema,body:a,fetch:this.fetch,allowEmpty:!1})}}var Wn,ni;function da(){if(ni)return Wn;ni=1;var n=function(){if(typeof self=="object"&&self)return self;if(typeof window=="object"&&window)return window;throw new Error("Unable to resolve global `this`")};return Wn=function(){if(this)return this;if(typeof globalThis=="object"&&globalThis)return globalThis;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch{return n()}try{return __global__||n()}finally{delete Object.prototype.__global__}}(),Wn}const fa="websocket",ha="Websocket Client & Server Library implementing the WebSocket protocol as specified in RFC 6455.",pa=["websocket","websockets","socket","networking","comet","push","RFC-6455","realtime","server","client"],_a="Brian McKelvey <theturtle32@gmail.com> (https://github.com/theturtle32)",ma=["I\xF1aki Baz Castillo <ibc@aliax.net> (http://dev.sipdoc.net)"],ga="1.0.34",ya={type:"git",url:"https://github.com/theturtle32/WebSocket-Node.git"},ba="https://github.com/theturtle32/WebSocket-Node",va={node:">=4.0.0"},Ea={bufferutil:"^4.0.1",debug:"^2.2.0","es5-ext":"^0.10.50","typedarray-to-buffer":"^3.1.5","utf-8-validate":"^5.0.2",yaeti:"^0.0.6"},wa={"buffer-equal":"^1.0.0",gulp:"^4.0.2","gulp-jshint":"^2.0.4","jshint-stylish":"^2.2.1",jshint:"^2.0.0",tape:"^4.9.1"},Ta={verbose:!1},Sa={test:"tape test/unit/*.js",gulp:"gulp"},ka="index",Ra={lib:"./lib"},xa="lib/browser.js",Oa="Apache-2.0",Ia={name:fa,description:ha,keywords:pa,author:_a,contributors:ma,version:ga,repository:ya,homepage:ba,engines:va,dependencies:Ea,devDependencies:wa,config:Ta,scripts:Sa,main:ka,directories:Ra,browser:xa,license:Oa};var Da=Ia.version,Be;if(typeof globalThis=="object")Be=globalThis;else try{Be=da()}catch{}finally{if(!Be&&typeof window<"u"&&(Be=window),!Be)throw new Error("Could not determine global this")}var Nt=Be.WebSocket||Be.MozWebSocket,Na=Da;function fs(n,e){var t;return e?t=new Nt(n,e):t=new Nt(n),t}Nt&&["CONNECTING","OPEN","CLOSING","CLOSED"].forEach(function(n){Object.defineProperty(fs,n,{get:function(){return Nt[n]}})});var Aa={w3cwebsocket:Nt?fs:null,version:Na};const $a="2.1.0",ja={"X-Client-Info":`realtime-js/${$a}`},Ua="1.0.0",hs=1e4,Pa=1e3;var Tt;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(Tt||(Tt={}));var ae;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(ae||(ae={}));var de;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(de||(de={}));var or;(function(n){n.websocket="websocket"})(or||(or={}));var Ce;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(Ce||(Ce={}));class ps{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}class Ba{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,t,r)}_decodeBroadcast(e,t,r){const i=t.getUint8(1),s=t.getUint8(2);let o=this.HEADER_LENGTH+2;const a=r.decode(e.slice(o,o+i));o=o+i;const c=r.decode(e.slice(o,o+s));o=o+s;const l=JSON.parse(r.decode(e.slice(o,e.byteLength)));return{ref:null,topic:a,event:c,payload:l}}}class Vn{constructor(e,t,r={},i=hs){this.channel=e,this.event=t,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null,this.rateLimited=!1}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){if(this._hasReceived("timeout"))return;this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()})==="rate limited"&&(this.rateLimited=!0)}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){!this.refEvent||this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var ri;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(ri||(ri={}));class St{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:s,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=St.syncState(this.state,i,s,o),this.pendingDiffs.forEach(c=>{this.state=St.syncDiff(this.state,c,s,o)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},i=>{const{onJoin:s,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=St.syncDiff(this.state,i,s,o),a())}),this.onJoin((i,s,o)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:s,newPresences:o})}),this.onLeave((i,s,o)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:s,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,r,i){const s=this.cloneDeep(e),o=this.transformState(t),a={},c={};return this.map(s,(l,u)=>{o[l]||(c[l]=u)}),this.map(o,(l,u)=>{const d=s[l];if(d){const f=u.map(y=>y.presence_ref),_=d.map(y=>y.presence_ref),h=u.filter(y=>_.indexOf(y.presence_ref)<0),m=d.filter(y=>f.indexOf(y.presence_ref)<0);h.length>0&&(a[l]=h),m.length>0&&(c[l]=m)}else a[l]=u}),this.syncDiff(s,{joins:a,leaves:c},r,i)}static syncDiff(e,t,r,i){const{joins:s,leaves:o}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(s,(a,c)=>{var l;const u=(l=e[a])!==null&&l!==void 0?l:[];if(e[a]=this.cloneDeep(c),u.length>0){const d=e[a].map(_=>_.presence_ref),f=u.filter(_=>d.indexOf(_.presence_ref)<0);e[a].unshift(...f)}r(a,u,c)}),this.map(o,(a,c)=>{let l=e[a];if(!l)return;const u=c.map(d=>d.presence_ref);l=l.filter(d=>u.indexOf(d.presence_ref)<0),e[a]=l,i(a,l,c),l.length===0&&delete e[a]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,r)=>{const i=e[r];return"metas"in i?t[r]=i.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):t[r]=i,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var C;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(C||(C={}));const ii=(n,e,t={})=>{var r;const i=(r=t.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((s,o)=>(s[o]=Ca(o,n,e,i),s),{})},Ca=(n,e,t,r)=>{const i=e.find(a=>a.name===n),s=i==null?void 0:i.type,o=t[n];return s&&!r.includes(s)?_s(s,o):ar(o)},_s=(n,e)=>{if(n.charAt(0)==="_"){const t=n.slice(1,n.length);return Fa(e,t)}switch(n){case C.bool:return La(e);case C.float4:case C.float8:case C.int2:case C.int4:case C.int8:case C.numeric:case C.oid:return Ga(e);case C.json:case C.jsonb:return Ma(e);case C.timestamp:return Ya(e);case C.abstime:case C.date:case C.daterange:case C.int4range:case C.int8range:case C.money:case C.reltime:case C.text:case C.time:case C.timestamptz:case C.timetz:case C.tsrange:case C.tstzrange:return ar(e);default:return ar(e)}},ar=n=>n,La=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},Ga=n=>{if(typeof n=="string"){const e=parseFloat(n);if(!Number.isNaN(e))return e}return n},Ma=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(e){return console.log(`JSON parse error: ${e}`),n}return n},Fa=(n,e)=>{if(typeof n!="string")return n;const t=n.length-1,r=n[t];if(n[0]==="{"&&r==="}"){let s;const o=n.slice(1,t);try{s=JSON.parse("["+o+"]")}catch{s=o?o.split(","):[]}return s.map(a=>_s(e,a))}return n},Ya=n=>typeof n=="string"?n.replace(" ","T"):n;var si=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((r=r.apply(n,e||[])).next())})},oi;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(oi||(oi={}));var ai;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes"})(ai||(ai={}));var ci;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(ci||(ci={}));class Or{constructor(e,t={config:{}},r){this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=ae.closed,this.joinedOnce=!1,this.pushBuffer=[],this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""}},t.config),this.timeout=this.socket.timeout,this.joinPush=new Vn(this,de.join,this.params,this.timeout),this.rejoinTimer=new ps(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ae.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ae.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=ae.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{!this._isJoining()||(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ae.errored,this.rejoinTimer.scheduleTimeout())}),this._on(de.reply,{},(i,s)=>{this._trigger(this._replyEventName(s),i)}),this.presence=new St(this)}subscribe(e,t=this.timeout){var r,i;if(this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:s,presence:o}}=this.params;this._onError(l=>e&&e("CHANNEL_ERROR",l)),this._onClose(()=>e&&e("CLOSED"));const a={},c={broadcast:s,presence:o,postgres_changes:(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(l=>l.filter))!==null&&i!==void 0?i:[]};this.socket.accessToken&&(a.access_token=this.socket.accessToken),this.updateJoinPayload(Object.assign({config:c},a)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",({postgres_changes:l})=>{var u;if(this.socket.accessToken&&this.socket.setAuth(this.socket.accessToken),l===void 0){e&&e("SUBSCRIBED");return}else{const d=this.bindings.postgres_changes,f=(u=d==null?void 0:d.length)!==null&&u!==void 0?u:0,_=[];for(let h=0;h<f;h++){const m=d[h],{filter:{event:y,schema:S,table:A,filter:R}}=m,E=l&&l[h];if(E&&E.event===y&&E.schema===S&&E.table===A&&E.filter===R)_.push(Object.assign(Object.assign({},m),{id:E.id}));else{this.unsubscribe(),e&&e("CHANNEL_ERROR",new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=_,e&&e("SUBSCRIBED");return}}).receive("error",l=>{e&&e("CHANNEL_ERROR",new Error(JSON.stringify(Object.values(l).join(", ")||"error")))}).receive("timeout",()=>{e&&e("TIMED_OUT")})}return this}presenceState(){return this.presence.state}track(e,t={}){return si(this,void 0,void 0,function*(){return yield this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)})}untrack(e={}){return si(this,void 0,void 0,function*(){return yield this.send({type:"presence",event:"untrack"},e)})}on(e,t,r){return this._on(e,t,r)}send(e,t={}){return new Promise(r=>{var i,s,o;const a=this._push(e.type,e,t.timeout||this.timeout);a.rateLimited&&r("rate limited"),e.type==="broadcast"&&!(!((o=(s=(i=this.params)===null||i===void 0?void 0:i.config)===null||s===void 0?void 0:s.broadcast)===null||o===void 0)&&o.ack)&&r("ok"),a.receive("ok",()=>r("ok")),a.receive("timeout",()=>r("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=ae.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(de.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(r=>{const i=new Vn(this,de.leave,{},e);i.receive("ok",()=>{t(),r("ok")}).receive("timeout",()=>{t(),r("timed out")}).receive("error",()=>{r("error")}),i.send(),this._canPush()||i.trigger("ok",{})})}_push(e,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new Vn(this,e,t,r);return this._canPush()?i.send():(i.startTimeout(),this.pushBuffer.push(i)),i}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var i,s;const o=e.toLocaleLowerCase(),{close:a,error:c,leave:l,join:u}=de;if(r&&[a,c,l,u].indexOf(o)>=0&&r!==this._joinRef())return;let f=this._onMessage(o,t,r);if(t&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(_=>{var h,m,y;return((h=_.filter)===null||h===void 0?void 0:h.event)==="*"||((y=(m=_.filter)===null||m===void 0?void 0:m.event)===null||y===void 0?void 0:y.toLocaleLowerCase())===o}).map(_=>_.callback(f,r)):(s=this.bindings[o])===null||s===void 0||s.filter(_=>{var h,m,y,S,A,R;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in _){const E=_.id,T=(h=_.filter)===null||h===void 0?void 0:h.event;return E&&((m=t.ids)===null||m===void 0?void 0:m.includes(E))&&(T==="*"||(T==null?void 0:T.toLocaleLowerCase())===((y=t.data)===null||y===void 0?void 0:y.type.toLocaleLowerCase()))}else{const E=(A=(S=_==null?void 0:_.filter)===null||S===void 0?void 0:S.event)===null||A===void 0?void 0:A.toLocaleLowerCase();return E==="*"||E===((R=t==null?void 0:t.event)===null||R===void 0?void 0:R.toLocaleLowerCase())}else return _.type.toLocaleLowerCase()===o}).map(_=>{if(typeof f=="object"&&"ids"in f){const h=f.data,{schema:m,table:y,commit_timestamp:S,type:A,errors:R}=h;f=Object.assign(Object.assign({},{schema:m,table:y,commit_timestamp:S,eventType:A,new:{},old:{},errors:R}),this._getPayloadRecords(h))}_.callback(f,r)})}_isClosed(){return this.state===ae.closed}_isJoined(){return this.state===ae.joined}_isJoining(){return this.state===ae.joining}_isLeaving(){return this.state===ae.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,r){const i=e.toLocaleLowerCase(),s={type:i,filter:t,callback:r};return this.bindings[i]?this.bindings[i].push(s):this.bindings[i]=[s],this}_off(e,t){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(i=>{var s;return!(((s=i.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===r&&Or.isEqual(i.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(de.close,{},e)}_onError(e){this._on(de.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ae.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=ii(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=ii(e.columns,e.old_record)),t}}var Ha=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((r=r.apply(n,e||[])).next())})};const za=()=>{};class ms{constructor(e,t){var r;this.accessToken=null,this.channels=[],this.endPoint="",this.headers=ja,this.params={},this.timeout=hs,this.transport=Aa.w3cwebsocket,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=za,this.conn=null,this.sendBuffer=[],this.serializer=new Ba,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.eventsPerSecondLimitMs=100,this.inThrottle=!1,this.endPoint=`${e}/${or.websocket}`,t!=null&&t.params&&(this.params=t.params),t!=null&&t.headers&&(this.headers=Object.assign(Object.assign({},this.headers),t.headers)),t!=null&&t.timeout&&(this.timeout=t.timeout),t!=null&&t.logger&&(this.logger=t.logger),t!=null&&t.transport&&(this.transport=t.transport),t!=null&&t.heartbeatIntervalMs&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const i=(r=t==null?void 0:t.params)===null||r===void 0?void 0:r.eventsPerSecond;i&&(this.eventsPerSecondLimitMs=Math.floor(1e3/i)),this.reconnectAfterMs=t!=null&&t.reconnectAfterMs?t.reconnectAfterMs:s=>[1e3,2e3,5e3,1e4][s-1]||1e4,this.encode=t!=null&&t.encode?t.encode:(s,o)=>o(JSON.stringify(s)),this.decode=t!=null&&t.decode?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new ps(()=>Ha(this,void 0,void 0,function*(){this.disconnect(),this.connect()}),this.reconnectAfterMs)}connect(){this.conn||(this.conn=new this.transport(this._endPointURL(),[],null,this.headers),this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e)))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,t!=null?t:""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}removeChannel(e){return e.unsubscribe().then(t=>(this.channels.length===0&&this.disconnect(),t))}removeAllChannels(){return Promise.all(this.channels.map(e=>e.unsubscribe())).then(e=>(this.disconnect(),e))}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Tt.connecting:return Ce.Connecting;case Tt.open:return Ce.Open;case Tt.closing:return Ce.Closing;default:return Ce.Closed}}isConnected(){return this.connectionState()===Ce.Open}channel(e,t={config:{}}){this.isConnected()||this.connect();const r=new Or(`realtime:${e}`,t,this);return this.channels.push(r),r}push(e){const{topic:t,event:r,payload:i,ref:s}=e;let o=()=>{this.encode(e,a=>{var c;(c=this.conn)===null||c===void 0||c.send(a)})};if(this.log("push",`${t} ${r} (${s})`,i),this.isConnected())if(["broadcast","presence","postgres_changes"].includes(r)){if(this._throttle(o)())return"rate limited"}else o();else this.sendBuffer.push(o)}setAuth(e){this.accessToken=e,this.channels.forEach(t=>{e&&t.updateJoinPayload({access_token:e}),t.joinedOnce&&t._isJoined()&&t._push(de.access_token,{access_token:e})})}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t._joinRef()!==e._joinRef())}_endPointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Ua}))}_onConnMessage(e){this.decode(e.data,t=>{let{topic:r,event:i,payload:s,ref:o}=t;(o&&o===this.pendingHeartbeatRef||i===(s==null?void 0:s.type))&&(this.pendingHeartbeatRef=null),this.log("receive",`${s.status||""} ${r} ${i} ${o&&"("+o+")"||""}`,s),this.channels.filter(a=>a._isMember(r)).forEach(a=>a._trigger(i,s,o)),this.stateChangeCallbacks.message.forEach(a=>a(t))})}_onConnOpen(){this.log("transport",`connected to ${this._endPointURL()}`),this._flushSendBuffer(),this.reconnectTimer.reset(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this._sendHeartbeat(),this.heartbeatIntervalMs),this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(de.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const r=e.match(/\?/)?"&":"?",i=new URLSearchParams(t);return`${e}${r}${i}`}_flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_sendHeartbeat(){var e;if(!!this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(Pa,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth(this.accessToken)}}_throttle(e,t=this.eventsPerSecondLimitMs){return()=>this.inThrottle?!0:(e(),this.inThrottle=!0,setTimeout(()=>{this.inThrottle=!1},t),!1)}}class gs extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function se(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}class qa extends gs{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Ja extends gs{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var ys=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((r=r.apply(n,e||[])).next())})};const bs=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>ys(void 0,void 0,void 0,function*(){return yield(yield ie(()=>Promise.resolve().then(()=>Dn),void 0)).fetch(...t)}):e=fetch,(...t)=>e(...t)},Wa=()=>ys(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield ie(()=>Promise.resolve().then(()=>Dn),void 0)).Response:Response});var _t=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((r=r.apply(n,e||[])).next())})};const li=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),Va=(n,e)=>_t(void 0,void 0,void 0,function*(){const t=yield Wa();n instanceof t?n.json().then(r=>{e(new qa(li(r),n.status||500))}):e(new Ja(li(n),n))}),Ka=(n,e,t,r)=>{const i={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),t))};function Nn(n,e,t,r,i,s){return _t(this,void 0,void 0,function*(){return new Promise((o,a)=>{n(t,Ka(e,r,i,s)).then(c=>{if(!c.ok)throw c;return r!=null&&r.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>Va(c,a))})})}function cr(n,e,t,r){return _t(this,void 0,void 0,function*(){return Nn(n,"GET",e,t,r)})}function Le(n,e,t,r,i){return _t(this,void 0,void 0,function*(){return Nn(n,"POST",e,r,i,t)})}function Xa(n,e,t,r,i){return _t(this,void 0,void 0,function*(){return Nn(n,"PUT",e,r,i,t)})}function vs(n,e,t,r,i){return _t(this,void 0,void 0,function*(){return Nn(n,"DELETE",e,r,i,t)})}var me=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((r=r.apply(n,e||[])).next())})};const Qa={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Za={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class ec{constructor(e,t={},r,i){this.url=e,this.headers=t,this.bucketId=r,this.fetch=bs(i)}uploadOrUpdate(e,t,r,i){return me(this,void 0,void 0,function*(){try{let s;const o=Object.assign(Object.assign({},Za),i),a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});typeof Blob<"u"&&r instanceof Blob?(s=new FormData,s.append("cacheControl",o.cacheControl),s.append("",r)):typeof FormData<"u"&&r instanceof FormData?(s=r,s.append("cacheControl",o.cacheControl)):(s=r,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType);const c=this._removeEmptyFolders(t),l=this._getFinalPath(c),u=yield this.fetch(`${this.url}/object/${l}`,{method:e,body:s,headers:a});return u.ok?{data:{path:c},error:null}:{data:null,error:yield u.json()}}catch(s){if(se(s))return{data:null,error:s};throw s}})}upload(e,t,r){return me(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,r)})}update(e,t,r){return me(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,r)})}move(e,t){return me(this,void 0,void 0,function*(){try{return{data:yield Le(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t},{headers:this.headers}),error:null}}catch(r){if(se(r))return{data:null,error:r};throw r}})}copy(e,t){return me(this,void 0,void 0,function*(){try{return{data:{path:(yield Le(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t},{headers:this.headers})).Key},error:null}}catch(r){if(se(r))return{data:null,error:r};throw r}})}createSignedUrl(e,t,r){return me(this,void 0,void 0,function*(){try{const i=this._getFinalPath(e);let s=yield Le(this.fetch,`${this.url}/object/sign/${i}`,{expiresIn:t},{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${o}`)},{data:s,error:null}}catch(i){if(se(i))return{data:null,error:i};throw i}})}createSignedUrls(e,t,r){return me(this,void 0,void 0,function*(){try{const i=yield Le(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),s=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${s}`):null})),error:null}}catch(i){if(se(i))return{data:null,error:i};throw i}})}download(e){return me(this,void 0,void 0,function*(){try{const t=this._getFinalPath(e);return{data:yield(yield cr(this.fetch,`${this.url}/object/${t}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(t){if(se(t))return{data:null,error:t};throw t}})}getPublicUrl(e,t){const r=this._getFinalPath(e),i=t!=null&&t.download?`?download=${t.download===!0?"":t.download}`:"";return{data:{publicUrl:encodeURI(`${this.url}/object/public/${r}${i}`)}}}remove(e){return me(this,void 0,void 0,function*(){try{return{data:yield vs(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(se(t))return{data:null,error:t};throw t}})}list(e,t,r){return me(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},Qa),t),{prefix:e||""});return{data:yield Le(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(se(i))return{data:null,error:i};throw i}})}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}}const tc="2.0.0",nc={"X-Client-Info":`storage-js/${tc}`};var We=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((r=r.apply(n,e||[])).next())})};class rc{constructor(e,t={},r){this.url=e,this.headers=Object.assign(Object.assign({},nc),t),this.fetch=bs(r)}listBuckets(){return We(this,void 0,void 0,function*(){try{return{data:yield cr(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(se(e))return{data:null,error:e};throw e}})}getBucket(e){return We(this,void 0,void 0,function*(){try{return{data:yield cr(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(se(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return We(this,void 0,void 0,function*(){try{return{data:yield Le(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public},{headers:this.headers}),error:null}}catch(r){if(se(r))return{data:null,error:r};throw r}})}updateBucket(e,t){return We(this,void 0,void 0,function*(){try{return{data:yield Xa(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public},{headers:this.headers}),error:null}}catch(r){if(se(r))return{data:null,error:r};throw r}})}emptyBucket(e){return We(this,void 0,void 0,function*(){try{return{data:yield Le(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(se(t))return{data:null,error:t};throw t}})}deleteBucket(e){return We(this,void 0,void 0,function*(){try{return{data:yield vs(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(se(t))return{data:null,error:t};throw t}})}}class ic extends rc{constructor(e,t={},r){super(e,t,r)}from(e){return new ec(this.url,this.headers,e,this.fetch)}}const sc="2.0.5",oc={"X-Client-Info":`supabase-js/${sc}`};var ac=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((r=r.apply(n,e||[])).next())})};const cc=n=>{let e;return n?e=n:typeof fetch>"u"?e=xr:e=fetch,(...t)=>e(...t)},lc=()=>typeof Headers>"u"?Dt.exports.Headers:Headers,uc=(n,e,t)=>{const r=cc(t),i=lc();return(s,o)=>ac(void 0,void 0,void 0,function*(){var a;const c=(a=yield e())!==null&&a!==void 0?a:n;let l=new i(o==null?void 0:o.headers);return l.has("apikey")||l.set("apikey",n),l.has("Authorization")||l.set("Authorization",`Bearer ${c}`),r(s,Object.assign(Object.assign({},o),{headers:l}))})};function dc(n){return n.replace(/\/$/,"")}function fc(n,e){const{db:t,auth:r,realtime:i,global:s}=n,{db:o,auth:a,realtime:c,global:l}=e;return{db:Object.assign(Object.assign({},o),t),auth:Object.assign(Object.assign({},a),r),realtime:Object.assign(Object.assign({},c),i),global:Object.assign(Object.assign({},l),s)}}var An=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((r=r.apply(n,e||[])).next())})};function hc(n){return Math.round(Date.now()/1e3)+n}function pc(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){const e=Math.random()*16|0;return(n=="x"?e:e&3|8).toString(16)})}const Fe=()=>typeof window<"u";function le(n,e){var t;e||(e=((t=window==null?void 0:window.location)===null||t===void 0?void 0:t.href)||""),n=n.replace(/[\[\]]/g,"\\$&");const r=new RegExp("[?&#]"+n+"(=([^&#]*)|&|#|$)"),i=r.exec(e);return i?i[2]?decodeURIComponent(i[2].replace(/\+/g," ")):"":null}const Es=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>An(void 0,void 0,void 0,function*(){return yield(yield ie(()=>Promise.resolve().then(()=>Dn),void 0)).fetch(...t)}):e=fetch,(...t)=>e(...t)},_c=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",mc=(n,e,t)=>An(void 0,void 0,void 0,function*(){yield n.setItem(e,JSON.stringify(t))}),ui=(n,e)=>An(void 0,void 0,void 0,function*(){const t=yield n.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}}),gc=(n,e)=>An(void 0,void 0,void 0,function*(){yield n.removeItem(e)}),yc=n=>{try{return atob(n.replace(/[-]/g,"+").replace(/[_]/g,"/"))}catch(e){if(e instanceof ReferenceError)return Buffer.from(n,"base64").toString("utf-8");throw e}};class $n{constructor(){this.promise=new $n.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}$n.promiseConstructor=Promise;function bc(n){const e=n.split(".");if(e.length!==3)throw new Error("JWT is not valid: not a JWT structure");const t=e[1];return JSON.parse(yc(t))}class Ir extends Error{constructor(e){super(e),this.__isAuthError=!0,this.name="AuthError"}}function H(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class vc extends Ir{constructor(e,t){super(e),this.name="AuthApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class ws extends Ir{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class jn extends Ir{constructor(e,t,r){super(e),this.name=t,this.status=r}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class vt extends jn{constructor(){super("Auth session missing!","AuthSessionMissingError",400)}}class Kn extends jn{constructor(e){super(e,"AuthInvalidCredentialsError",400)}}class Ee extends jn{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class bn extends jn{constructor(e,t){super(e,"AuthRetryableFetchError",t)}}var Dr=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((r=r.apply(n,e||[])).next())})},Ec=globalThis&&globalThis.__rest||function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};const Vt=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),wc=(n,e)=>Dr(void 0,void 0,void 0,function*(){const t=[502,503,504];_c(n)?t.includes(n.status)?e(new bn(Vt(n),n.status)):n.json().then(r=>{e(new vc(Vt(r),n.status||500))}).catch(r=>{e(new ws(Vt(r),r))}):e(new bn(Vt(n),0))}),Tc=(n,e,t,r)=>{const i={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),t))};function G(n,e,t,r){var i,s;return Dr(this,void 0,void 0,function*(){const o=(i=r==null?void 0:r.headers)!==null&&i!==void 0?i:{};r!=null&&r.jwt&&(o.Authorization=`Bearer ${r.jwt}`);const a=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(a.redirect_to=r.redirectTo);const c=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",l=yield Sc(n,e,t+c,{headers:o,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}})}function Sc(n,e,t,r,i,s){return Dr(this,void 0,void 0,function*(){return new Promise((o,a)=>{n(t,Tc(e,r,i,s)).then(c=>{if(!c.ok)throw c;return r!=null&&r.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>wc(c,a))})})}function Ve(n){var e;let t=null;Rc(n)&&(t=Object.assign({},n),t.expires_at=hc(n.expires_in));const r=(e=n.user)!==null&&e!==void 0?e:n;return{data:{session:t,user:r},error:null}}function Ge(n){var e;return{data:{user:(e=n.user)!==null&&e!==void 0?e:n},error:null}}function kc(n){const{action_link:e,email_otp:t,hashed_token:r,redirect_to:i,verification_type:s}=n,o=Ec(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:t,hashed_token:r,redirect_to:i,verification_type:s},c=Object.assign({},o);return{data:{properties:a,user:c},error:null}}function Rc(n){return n.access_token&&n.refresh_token&&n.expires_in}var ge=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((r=r.apply(n,e||[])).next())})},xc=globalThis&&globalThis.__rest||function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};class Oc{constructor({url:e="",headers:t={},fetch:r}){this.url=e,this.headers=t,this.fetch=Es(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}signOut(e){return ge(this,void 0,void 0,function*(){try{return yield G(this.fetch,"POST",`${this.url}/logout`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(t){if(H(t))return{data:null,error:t};throw t}})}inviteUserByEmail(e,t={}){return ge(this,void 0,void 0,function*(){try{return yield G(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:Ge})}catch(r){if(H(r))return{data:{user:null},error:r};throw r}})}generateLink(e){return ge(this,void 0,void 0,function*(){try{const{options:t}=e,r=xc(e,["options"]),i=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(i.new_email=r==null?void 0:r.newEmail,delete i.newEmail),yield G(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:kc,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(H(t))return{data:{properties:null,user:null},error:t};throw t}})}createUser(e){return ge(this,void 0,void 0,function*(){try{return yield G(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Ge})}catch(t){if(H(t))return{data:{user:null},error:t};throw t}})}listUsers(){return ge(this,void 0,void 0,function*(){try{const{data:e,error:t}=yield G(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers});if(t)throw t;return{data:Object.assign({},e),error:null}}catch(e){if(H(e))return{data:{users:[]},error:e};throw e}})}getUserById(e){return ge(this,void 0,void 0,function*(){try{return yield G(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Ge})}catch(t){if(H(t))return{data:{user:null},error:t};throw t}})}updateUserById(e,t){return ge(this,void 0,void 0,function*(){try{return yield G(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:Ge})}catch(r){if(H(r))return{data:{user:null},error:r};throw r}})}deleteUser(e){return ge(this,void 0,void 0,function*(){try{return yield G(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Ge})}catch(t){if(H(t))return{data:{user:null},error:t};throw t}})}_listFactors(e){return ge(this,void 0,void 0,function*(){try{return{data:yield G(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers}),error:null}}catch(t){if(H(t))return{data:null,error:t};throw t}})}_deleteFactor(e){return ge(this,void 0,void 0,function*(){try{return{data:yield G(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(H(t))return{data:null,error:t};throw t}})}}const Ic="2.2.2",Dc="http://localhost:9999",Nc="supabase.auth.token",Ac={"X-Client-Info":`gotrue-js/${Ic}`},Kt=10,Xt={MAX_RETRIES:10,RETRY_INTERVAL:2},$c={getItem:n=>Fe()?globalThis.localStorage.getItem(n):null,setItem:(n,e)=>{!Fe()||globalThis.localStorage.setItem(n,e)},removeItem:n=>{!Fe()||globalThis.localStorage.removeItem(n)}};function jc(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}var P=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((r=r.apply(n,e||[])).next())})};jc();const Uc={url:Dc,storageKey:Nc,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Ac};class Pc{constructor(e){this.stateChangeEmitters=new Map,this.networkRetries=0,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0;const t=Object.assign(Object.assign({},Uc),e);this.inMemorySession=null,this.storageKey=t.storageKey,this.autoRefreshToken=t.autoRefreshToken,this.persistSession=t.persistSession,this.storage=t.storage||$c,this.admin=new Oc({url:t.url,headers:t.headers,fetch:t.fetch}),this.url=t.url,this.headers=t.headers,this.fetch=Es(t.fetch),this.detectSessionInUrl=t.detectSessionInUrl,this.initialize(),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)}}initialize(){return this.initializePromise||(this.initializePromise=this._initialize()),this.initializePromise}_initialize(){return P(this,void 0,void 0,function*(){if(this.initializePromise)return this.initializePromise;try{if(this.detectSessionInUrl&&this._isImplicitGrantFlow()){const{data:e,error:t}=yield this._getSessionFromUrl();if(t)return yield this._removeSession(),{error:t};const{session:r,redirectType:i}=e;return yield this._saveSession(r),this._notifyAllSubscribers("SIGNED_IN",r),i==="recovery"&&this._notifyAllSubscribers("PASSWORD_RECOVERY",r),{error:null}}return yield this._recoverAndRefresh(),{error:null}}catch(e){return H(e)?{error:e}:{error:new ws("Unexpected error during initialization",e)}}finally{this._handleVisibilityChange()}})}signUp(e){var t,r;return P(this,void 0,void 0,function*(){try{yield this._removeSession();let i;if("email"in e){const{email:l,password:u,options:d}=e;i=yield G(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:d==null?void 0:d.emailRedirectTo,body:{email:l,password:u,data:(t=d==null?void 0:d.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}},xform:Ve})}else if("phone"in e){const{phone:l,password:u,options:d}=e;i=yield G(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:l,password:u,data:(r=d==null?void 0:d.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}},xform:Ve})}else throw new Kn("You must provide either an email or phone number and a password");const{data:s,error:o}=i;if(o||!s)return{data:{user:null,session:null},error:o};const a=s.session,c=s.user;return s.session&&(yield this._saveSession(s.session),this._notifyAllSubscribers("SIGNED_IN",a)),{data:{user:c,session:a},error:null}}catch(i){if(H(i))return{data:{user:null,session:null},error:i};throw i}})}signInWithPassword(e){var t,r;return P(this,void 0,void 0,function*(){try{yield this._removeSession();let i;if("email"in e){const{email:a,password:c,options:l}=e;i=yield G(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:c,data:(t=l==null?void 0:l.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Ve})}else if("phone"in e){const{phone:a,password:c,options:l}=e;i=yield G(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:c,data:(r=l==null?void 0:l.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Ve})}else throw new Kn("You must provide either an email or phone number and a password");const{data:s,error:o}=i;return o||!s?{data:{user:null,session:null},error:o}:(s.session&&(yield this._saveSession(s.session),this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:s,error:o})}catch(i){if(H(i))return{data:{user:null,session:null},error:i};throw i}})}signInWithOAuth(e){var t,r,i;return P(this,void 0,void 0,function*(){return yield this._removeSession(),this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams})})}signInWithOtp(e){var t,r,i,s;return P(this,void 0,void 0,function*(){try{if(yield this._removeSession(),"email"in e){const{email:o,options:a}=e,{error:c}=yield G(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:o,data:(t=a==null?void 0:a.data)!==null&&t!==void 0?t:{},create_user:(r=a==null?void 0:a.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:c}}if("phone"in e){const{phone:o,options:a}=e,{error:c}=yield G(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:o,data:(i=a==null?void 0:a.data)!==null&&i!==void 0?i:{},create_user:(s=a==null?void 0:a.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return{data:{user:null,session:null},error:c}}throw new Kn("You must provide either an email or phone number.")}catch(o){if(H(o))return{data:{user:null,session:null},error:o};throw o}})}verifyOtp(e){var t,r;return P(this,void 0,void 0,function*(){try{yield this._removeSession();const{data:i,error:s}=yield G(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:(t=e.options)===null||t===void 0?void 0:t.captchaToken}}),redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,xform:Ve});if(s)throw s;if(!i)throw"An error occurred on token verification.";const o=i.session,a=i.user;return o!=null&&o.access_token&&(yield this._saveSession(o),this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:a,session:o},error:null}}catch(i){if(H(i))return{data:{user:null,session:null},error:i};throw i}})}getSession(){return P(this,void 0,void 0,function*(){yield this.initializePromise;let e=null;if(this.persistSession){const o=yield ui(this.storage,this.storageKey);o!==null&&(this._isValidSession(o)?e=o:yield this._removeSession())}else e=this.inMemorySession;if(!e)return{data:{session:null},error:null};const t=Math.round(Date.now()/1e3);if(!(e.expires_at?e.expires_at<=t+Kt:!1))return{data:{session:e},error:null};const{session:i,error:s}=yield this._callRefreshToken(e.refresh_token);return s?{data:{session:null},error:s}:{data:{session:i},error:null}})}getUser(e){var t,r;return P(this,void 0,void 0,function*(){try{if(!e){const{data:i,error:s}=yield this.getSession();if(s)throw s;e=(r=(t=i.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:void 0}return yield G(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Ge})}catch(i){if(H(i))return{data:{user:null},error:i};throw i}})}updateUser(e){return P(this,void 0,void 0,function*(){try{const{data:t,error:r}=yield this.getSession();if(r)throw r;if(!t.session)throw new vt;const i=t.session,{data:s,error:o}=yield G(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,body:e,jwt:i.access_token,xform:Ge});if(o)throw o;return i.user=s.user,yield this._saveSession(i),this._notifyAllSubscribers("USER_UPDATED",i),{data:{user:i.user},error:null}}catch(t){if(H(t))return{data:{user:null},error:t};throw t}})}_decodeJWT(e){return bc(e)}setSession(e){return P(this,void 0,void 0,function*(){try{const t=Date.now()/1e3;let r=t,i=!0,s=null;if(e.access_token&&e.access_token.split(".")[1]){const o=this._decodeJWT(e.access_token);o.exp&&(r=o.exp,i=r<=t)}if(i){if(!e.refresh_token)throw new vt;const{data:o,error:a}=yield this._refreshAccessToken(e.refresh_token);if(a)return{data:{session:null,user:null},error:a};if(!o.session)return{data:{session:null,user:null},error:null};s=o.session}else{const{data:o,error:a}=yield this.getUser(e.access_token);if(a)throw a;s={access_token:e.access_token,refresh_token:e.refresh_token,user:o.user,token_type:"bearer",expires_in:r-t,expires_at:r}}return yield this._saveSession(s),this._notifyAllSubscribers("TOKEN_REFRESHED",s),{data:{session:s,user:s.user},error:null}}catch(t){if(H(t))return{data:{session:null,user:null},error:t};throw t}})}refreshSession(e){var t;return P(this,void 0,void 0,function*(){try{if(!e){const{data:s,error:o}=yield this.getSession();if(o)throw o;e=(t=s.session)!==null&&t!==void 0?t:void 0}if(!(e!=null&&e.refresh_token))throw new vt;const{session:r,error:i}=yield this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:r?{data:{user:r.user,session:r},error:null}:{data:{user:null,session:null},error:null}}catch(r){if(H(r))return{data:{user:null,session:null},error:r};throw r}})}_getSessionFromUrl(){return P(this,void 0,void 0,function*(){try{if(!Fe())throw new Ee("No browser detected.");if(!this._isImplicitGrantFlow())throw new Ee("Not a valid implicit grant flow url.");const e=le("error_description");if(e){const m=le("error_code");if(!m)throw new Ee("No error_code detected.");const y=le("error");throw y?new Ee(e,{error:y,code:m}):new Ee("No error detected.")}const t=le("provider_token"),r=le("provider_refresh_token"),i=le("access_token");if(!i)throw new Ee("No access_token detected.");const s=le("expires_in");if(!s)throw new Ee("No expires_in detected.");const o=le("refresh_token");if(!o)throw new Ee("No refresh_token detected.");const a=le("token_type");if(!a)throw new Ee("No token_type detected.");const l=Math.round(Date.now()/1e3)+parseInt(s),{data:u,error:d}=yield this.getUser(i);if(d)throw d;const f=u.user,_={provider_token:t,provider_refresh_token:r,access_token:i,expires_in:parseInt(s),expires_at:l,refresh_token:o,token_type:a,user:f},h=le("type");return window.location.hash="",{data:{session:_,redirectType:h},error:null}}catch(e){if(H(e))return{data:{session:null,redirectType:null},error:e};throw e}})}_isImplicitGrantFlow(){return Fe()&&(Boolean(le("access_token"))||Boolean(le("error_description")))}signOut(){var e;return P(this,void 0,void 0,function*(){const{data:t,error:r}=yield this.getSession();if(r)return{error:r};const i=(e=t.session)===null||e===void 0?void 0:e.access_token;if(i){const{error:s}=yield this.admin.signOut(i);if(s)return{error:s}}return yield this._removeSession(),this._notifyAllSubscribers("SIGNED_OUT",null),{error:null}})}onAuthStateChange(e){const t=pc(),r={id:t,callback:e,unsubscribe:()=>{this.stateChangeEmitters.delete(t)}};return this.stateChangeEmitters.set(t,r),{data:{subscription:r}}}resetPasswordForEmail(e,t={}){return P(this,void 0,void 0,function*(){try{return yield G(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(r){if(H(r))return{data:null,error:r};throw r}})}_refreshAccessToken(e){return P(this,void 0,void 0,function*(){try{return yield G(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Ve})}catch(t){if(H(t))return{data:{session:null,user:null},error:t};throw t}})}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}_handleProviderSignIn(e,t={}){const r=this._getUrlForProvider(e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return Fe()&&(window.location.href=r),{data:{provider:e,url:r},error:null}}_recoverAndRefresh(){var e;return P(this,void 0,void 0,function*(){try{const t=yield ui(this.storage,this.storageKey);if(!this._isValidSession(t)){t!==null&&(yield this._removeSession());return}const r=Math.round(Date.now()/1e3);if(((e=t.expires_at)!==null&&e!==void 0?e:1/0)<r+Kt)if(this.autoRefreshToken&&t.refresh_token){this.networkRetries++;const{error:i}=yield this._callRefreshToken(t.refresh_token);if(i){if(console.log(i.message),i instanceof bn&&this.networkRetries<Xt.MAX_RETRIES){this.refreshTokenTimer&&clearTimeout(this.refreshTokenTimer),this.refreshTokenTimer=setTimeout(()=>this._recoverAndRefresh(),Math.pow(Xt.RETRY_INTERVAL,this.networkRetries)*100);return}yield this._removeSession()}this.networkRetries=0}else yield this._removeSession();else this.persistSession&&(yield this._saveSession(t)),this._notifyAllSubscribers("SIGNED_IN",t)}catch(t){console.error(t);return}})}_callRefreshToken(e){var t,r;return P(this,void 0,void 0,function*(){if(this.refreshingDeferred)return this.refreshingDeferred.promise;try{if(this.refreshingDeferred=new $n,!e)throw new vt;const{data:i,error:s}=yield this._refreshAccessToken(e);if(s)throw s;if(!i.session)throw new vt;yield this._saveSession(i.session),this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const o={session:i.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(i){if(H(i)){const s={session:null,error:i};return(t=this.refreshingDeferred)===null||t===void 0||t.resolve(s),s}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null}})}_notifyAllSubscribers(e,t){this.stateChangeEmitters.forEach(r=>r.callback(e,t))}_saveSession(e){return P(this,void 0,void 0,function*(){this.persistSession||(this.inMemorySession=e);const t=e.expires_at;if(t){const r=Math.round(Date.now()/1e3),i=t-r,s=i>Kt?Kt:.5;this._startAutoRefreshToken((i-s)*1e3)}this.persistSession&&e.expires_at&&(yield this._persistSession(e))})}_persistSession(e){return mc(this.storage,this.storageKey,e)}_removeSession(){return P(this,void 0,void 0,function*(){this.persistSession?yield gc(this.storage,this.storageKey):this.inMemorySession=null,this.refreshTokenTimer&&clearTimeout(this.refreshTokenTimer)})}_startAutoRefreshToken(e){this.refreshTokenTimer&&clearTimeout(this.refreshTokenTimer),!(e<=0||!this.autoRefreshToken)&&(this.refreshTokenTimer=setTimeout(()=>P(this,void 0,void 0,function*(){this.networkRetries++;const{data:{session:t},error:r}=yield this.getSession();if(!r&&t){const{error:i}=yield this._callRefreshToken(t.refresh_token);i||(this.networkRetries=0),i instanceof bn&&this.networkRetries<Xt.MAX_RETRIES&&this._startAutoRefreshToken(Math.pow(Xt.RETRY_INTERVAL,this.networkRetries)*100)}}),e),typeof this.refreshTokenTimer.unref=="function"&&this.refreshTokenTimer.unref())}_handleVisibilityChange(){if(!Fe()||!(window!=null&&window.addEventListener))return!1;try{window==null||window.addEventListener("visibilitychange",()=>P(this,void 0,void 0,function*(){document.visibilityState==="visible"&&(yield this.initializePromise,yield this._recoverAndRefresh())}))}catch(e){console.error("_handleVisibilityChange",e)}}_getUrlForProvider(e,t){const r=[`provider=${encodeURIComponent(e)}`];if(t!=null&&t.redirectTo&&r.push(`redirect_to=${encodeURIComponent(t.redirectTo)}`),t!=null&&t.scopes&&r.push(`scopes=${encodeURIComponent(t.scopes)}`),t!=null&&t.queryParams){const i=new URLSearchParams(t.queryParams);r.push(i.toString())}return`${this.url}/authorize?${r.join("&")}`}_unenroll(e){var t;return P(this,void 0,void 0,function*(){const{data:r,error:i}=yield this.getSession();return i?{data:null,error:i}:yield G(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(t=r==null?void 0:r.session)===null||t===void 0?void 0:t.access_token})})}_enroll(e){var t,r;return P(this,void 0,void 0,function*(){const{data:i,error:s}=yield this.getSession();if(s)return{data:null,error:s};const{data:o,error:a}=yield G(this.fetch,"POST",`${this.url}/factors`,{body:{friendly_name:e.friendlyName,factor_type:e.factorType,issuer:e.issuer},headers:this.headers,jwt:(t=i==null?void 0:i.session)===null||t===void 0?void 0:t.access_token});return a?{data:null,error:a}:(!((r=o==null?void 0:o.totp)===null||r===void 0)&&r.qr_code&&(o.totp.qr_code=`data:image/svg+xml;utf-8,${o.totp.qr_code}`),{data:o,error:null})})}_verify(e){var t;return P(this,void 0,void 0,function*(){const{data:r,error:i}=yield this.getSession();if(i)return{data:null,error:i};const{data:s,error:o}=yield G(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(t=r==null?void 0:r.session)===null||t===void 0?void 0:t.access_token});return o?{data:null,error:o}:(yield this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+s.expires_in},s)),this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",s),{data:s,error:o})})}_challenge(e){var t;return P(this,void 0,void 0,function*(){const{data:r,error:i}=yield this.getSession();return i?{data:null,error:i}:yield G(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{headers:this.headers,jwt:(t=r==null?void 0:r.session)===null||t===void 0?void 0:t.access_token})})}_challengeAndVerify(e){return P(this,void 0,void 0,function*(){const{data:t,error:r}=yield this._challenge({factorId:e.factorId});return r?{data:null,error:r}:yield this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})})}_listFactors(){return P(this,void 0,void 0,function*(){const{data:{user:e},error:t}=yield this.getUser();if(t)return{data:null,error:t};const r=(e==null?void 0:e.factors)||[],i=r.filter(s=>s.factor_type==="totp"&&s.status==="verified");return{data:{all:r,totp:i},error:null}})}_getAuthenticatorAssuranceLevel(){var e,t;return P(this,void 0,void 0,function*(){const{data:{session:r},error:i}=yield this.getSession();if(i)return{data:null,error:i};if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const s=this._decodeJWT(r.access_token);let o=null;s.aal&&(o=s.aal);let a=o;((t=(e=r.user.factors)===null||e===void 0?void 0:e.filter(u=>u.status==="verified"))!==null&&t!==void 0?t:[]).length>0&&(a="aal2");const l=s.amr||[];return{data:{currentLevel:o,nextLevel:a,currentAuthenticationMethods:l},error:null}})}}class Bc extends Pc{constructor(e){super(e)}}var Cc=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((r=r.apply(n,e||[])).next())})};const Lc={headers:oc},Gc={schema:"public"},Mc={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0},Fc={};class Yc{constructor(e,t,r){var i,s,o,a,c,l,u,d;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const f=dc(e);if(this.realtimeUrl=`${f}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${f}/auth/v1`,this.storageUrl=`${f}/storage/v1`,f.match(/(supabase\.co)|(supabase\.in)/)){const S=f.split(".");this.functionsUrl=`${S[0]}.functions.${S[1]}.${S[2]}`}else this.functionsUrl=`${f}/functions/v1`;const h=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,m={db:Gc,realtime:Fc,auth:Object.assign(Object.assign({},Mc),{storageKey:h}),global:Lc},y=fc(r!=null?r:{},m);this.storageKey=(s=(i=y.auth)===null||i===void 0?void 0:i.storageKey)!==null&&s!==void 0?s:"",this.headers=(a=(o=y.global)===null||o===void 0?void 0:o.headers)!==null&&a!==void 0?a:{},this.auth=this._initSupabaseAuthClient((c=y.auth)!==null&&c!==void 0?c:{},this.headers,(l=y.global)===null||l===void 0?void 0:l.fetch),this.fetch=uc(t,this._getAccessToken.bind(this),(u=y.global)===null||u===void 0?void 0:u.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers},y.realtime)),this.rest=new ua(`${f}/rest/v1`,{headers:this.headers,schema:(d=y.db)===null||d===void 0?void 0:d.schema,fetch:this.fetch}),this._listenForAuthEvents()}get functions(){return new ta(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new ic(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}rpc(e,t={},r){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return Cc(this,void 0,void 0,function*(){const{data:r}=yield this.auth.getSession();return(t=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:i,storageKey:s},o,a){const c={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Bc({url:this.authUrl,headers:Object.assign(Object.assign({},c),o),storageKey:s,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:i,fetch:a})}_initRealtimeClient(e){return new ms(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,r)=>{this._handleTokenChanged(t,r==null?void 0:r.access_token,"CLIENT")})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==t?(this.realtime.setAuth(t!=null?t:null),this.changedAccessToken=t):(e==="SIGNED_OUT"||e==="USER_DELETED")&&(this.realtime.setAuth(this.supabaseKey),r=="STORAGE"&&this.auth.signOut())}}const Ts=(n,e,t)=>new Yc(n,e,t),Hc=n=>{try{return atob(n.replace(/[-]/g,"+").replace(/[_]/g,"/"))}catch(e){if(e instanceof ReferenceError)return Buffer.from(n,"base64").toString("utf-8");throw e}};function zc(n){const e=n.split(".");if(e.length!==3)throw new Error("JWT is not valid: not a JWT structure");const t=e[1];return JSON.parse(Hc(t))}const vn=Ts("https://api.dev.puzzad.com","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.ewogICAgInJvbGUiOiAiYW5vbiIsCiAgICAiaXNzIjogInN1cGFiYXNlIiwKICAgICJpYXQiOiAxNjY3NjA2NDAwLAogICAgImV4cCI6IDE4MjUzNzI4MDAKfQ.HUV6jIRiQTwDfVgPZQhC0Rb2u_YRNI5G3AA9jt5NWf0");async function ah(n){return Ts("https://api.dev.puzzad.com","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.ewogICAgInJvbGUiOiAiYW5vbiIsCiAgICAiaXNzIjogInN1cGFiYXNlIiwKICAgICJpYXQiOiAxNjY3NjA2NDAwLAogICAgImV4cCI6IDE4MjUzNzI4MDAKfQ.HUV6jIRiQTwDfVgPZQhC0Rb2u_YRNI5G3AA9jt5NWf0",{global:{headers:{Authorization:`Bearer ${await Ss(n)}`}}})}async function ch(n){const e=new ms("https://api.dev.puzzad.com/realtime/v1".replace(/^http/i,"ws"),{params:{apikey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.ewogICAgInJvbGUiOiAiYW5vbiIsCiAgICAiaXNzIjogInN1cGFiYXNlIiwKICAgICJpYXQiOiAxNjY3NjA2NDAwLAogICAgImV4cCI6IDE4MjUzNzI4MDAKfQ.HUV6jIRiQTwDfVgPZQhC0Rb2u_YRNI5G3AA9jt5NWf0"}});return e.setAuth(await Ss(n)),e}async function Ss(n){const e=localStorage.getItem("puzzad-game-token");return qc(e,n)?e:await vn.rpc("getteamcodejwt",{teamcode:n}).then(({data:t,error:r})=>{if(r)throw r;return t.toString()}).then(t=>(localStorage.setItem("puzzad-game-token",t),t))}function qc(n,e){if(!n)return!1;const t=zc(n);return t.exp>Date.now()/1e3+60*60&&t.code==e}const Jc=Sr(null,n=>(vn.auth.getSession().then(t=>{n(t.data.session)}),vn.auth.onAuthStateChange(async({},t)=>{n(t)}).data.subscription.unsubscribe)),ks=async()=>{let{error:n}=await vn.auth.signOut();n||await zo("/")};function di(n){let e,t,r,i,s,o,a,c,l,u;function d(h,m){var y;return(y=h[3])!=null&&y.user?Wc:Vc}let f=d(n),_=f(n);return{c(){e=$("div"),e.innerHTML='<span class="hamburger svelte-1j4yrnd"></span>',t=X(),r=$("dialog"),i=$("ul"),s=$("li"),s.innerHTML='<a href="/#/Adventures" class="svelte-1j4yrnd">Browse adventures</a>',a=X(),c=$("ul"),_.c(),g(e,"class","hamburgercontainer svelte-1j4yrnd"),g(s,"class","svelte-1j4yrnd"),g(i,"class",o=hn(n[2]?"dropdown":"")+" svelte-1j4yrnd"),g(c,"class","svelte-1j4yrnd"),r.open=n[2],g(r,"class","svelte-1j4yrnd")},m(h,m){N(h,e,m),N(h,t,m),N(h,r,m),D(r,i),D(i,s),D(r,a),D(r,c),_.m(c,null),l||(u=[it(e,"click",n[4]),it(r,"click",n[5])],l=!0)},p(h,m){m&4&&o!==(o=hn(h[2]?"dropdown":"")+" svelte-1j4yrnd")&&g(i,"class",o),f===(f=d(h))&&_?_.p(h,m):(_.d(1),_=f(h),_&&(_.c(),_.m(c,null))),m&4&&(r.open=h[2])},d(h){h&&I(e),h&&I(t),h&&I(r),_.d(),l=!1,Se(u)}}}function Wc(n){let e,t,r,i,s,o;return{c(){e=$("li"),e.innerHTML='<a href="/#/games" class="svelte-1j4yrnd">My Games</a>',t=X(),r=$("li"),i=$("a"),i.textContent="Logout",g(e,"class","svelte-1j4yrnd"),g(i,"class","svelte-1j4yrnd"),g(r,"class","svelte-1j4yrnd")},m(a,c){N(a,e,c),N(a,t,c),N(a,r,c),D(r,i),s||(o=it(i,"click",ks()),s=!0)},p:z,d(a){a&&I(e),a&&I(t),a&&I(r),s=!1,o()}}}function Vc(n){let e;return{c(){e=$("li"),e.innerHTML='<a href="#/login" class="svelte-1j4yrnd">Login</a>',g(e,"class","svelte-1j4yrnd")},m(t,r){N(t,e,r)},p:z,d(t){t&&I(e)}}}function fi(n){let e,t,r,i,s;function o(l,u){var d;return(d=l[3])!=null&&d.user?Kc:Xc}let a=o(n),c=a(n);return{c(){e=$("ul"),t=$("li"),t.innerHTML='<a href="/#/Adventures" class="svelte-1j4yrnd">Browse adventures</a>',i=X(),s=$("ul"),c.c(),g(t,"class","svelte-1j4yrnd"),g(e,"class",r=hn(n[2]?"dropdown":"")+" svelte-1j4yrnd"),g(s,"class","svelte-1j4yrnd")},m(l,u){N(l,e,u),D(e,t),N(l,i,u),N(l,s,u),c.m(s,null)},p(l,u){u&4&&r!==(r=hn(l[2]?"dropdown":"")+" svelte-1j4yrnd")&&g(e,"class",r),a===(a=o(l))&&c?c.p(l,u):(c.d(1),c=a(l),c&&(c.c(),c.m(s,null)))},d(l){l&&I(e),l&&I(i),l&&I(s),c.d()}}}function Kc(n){let e,t,r,i,s,o;return{c(){e=$("li"),e.innerHTML='<a href="/#/games" class="svelte-1j4yrnd">My Games</a>',t=X(),r=$("li"),i=$("a"),i.textContent="Logout",g(e,"class","svelte-1j4yrnd"),g(i,"href",""),g(i,"class","svelte-1j4yrnd"),g(r,"class","svelte-1j4yrnd")},m(a,c){N(a,e,c),N(a,t,c),N(a,r,c),D(r,i),s||(o=it(i,"click",To(ks)),s=!0)},p:z,d(a){a&&I(e),a&&I(t),a&&I(r),s=!1,o()}}}function Xc(n){let e;return{c(){e=$("li"),e.innerHTML='<a href="#/login" class="svelte-1j4yrnd">Login</a>',g(e,"class","svelte-1j4yrnd")},m(t,r){N(t,e,r)},p:z,d(t){t&&I(e)}}}function Qc(n){let e,t,r,i,s,o,a,c=n[1]&&di(n),l=!n[1]&&fi(n);return{c(){e=$("nav"),t=$("h1"),r=$("a"),i=$("img"),o=X(),c&&c.c(),a=X(),l&&l.c(),g(i,"alt","Puzzad"),Kr(i.src,s=n[0])||g(i,"src",s),g(i,"class","svelte-1j4yrnd"),g(r,"href","/#/"),g(r,"class","svelte-1j4yrnd"),g(t,"class","svelte-1j4yrnd"),g(e,"class","svelte-1j4yrnd")},m(u,d){N(u,e,d),D(e,t),D(t,r),D(r,i),D(e,o),c&&c.m(e,null),D(e,a),l&&l.m(e,null)},p(u,[d]){d&1&&!Kr(i.src,s=u[0])&&g(i,"src",s),u[1]?c?c.p(u,d):(c=di(u),c.c(),c.m(e,a)):c&&(c.d(1),c=null),u[1]?l&&(l.d(1),l=null):l?l.p(u,d):(l=fi(u),l.c(),l.m(e,null))},i:z,o:z,d(u){u&&I(e),c&&c.d(),l&&l.d()}}}function Zc(n,e,t){let r;Rn(n,Jc,l=>t(3,r=l));let{logo:i}=e,s=!1;s=window.matchMedia("(max-width: 480px)").matches,window.matchMedia("(max-width: 480px)").addEventListener("change",l=>t(1,s=l.matches));let o=!1;const a=()=>t(2,o=!o),c=()=>t(2,o=!1);return n.$$set=l=>{"logo"in l&&t(0,i=l.logo)},[i,s,o,r,a,c]}class el extends Ft{constructor(e){super(),Mt(this,e,Zc,Qc,ht,{logo:0})}}const tl=Yt("Puzzad: Home");function nl(n=[]){const e=Yt(n),{set:t,update:r,subscribe:i}=e;let s={duration:3e3,placement:"bottom-right",type:"info",theme:"dark"};function o(d){const{duration:f=3e3,placement:_="bottom-right",type:h="info",theme:m="dark",...y}={...s,...d},S=Date.now(),A={...y,uid:S,placement:_,type:h,theme:m,duration:f,remove:()=>{r(R=>R.filter(E=>E.uid!==S))},update:R=>{var T;delete R.uid;const E=(T=Xr(e))==null?void 0:T.findIndex(w=>(w==null?void 0:w.uid)===S);E>-1&&r(w=>[...w.slice(0,E),{...w[E],...R},...w.slice(E+1)])}};return r(R=>[...R,A]),f>0&&setTimeout(()=>{A.remove(),typeof A.onRemove=="function"&&A.onRemove()},f),A}function a(d){var f;return(f=Xr(e))==null?void 0:f.find(_=>(_==null?void 0:_.uid)===d)}function c(){t([])}function l(){r(d=>d.slice(0,d.length-1))}function u(d){s={...s,...d}}return{subscribe:i,add:o,success:Qt("success",o),info:Qt("info",o),error:Qt("error",o),warning:Qt("warning",o),clearAll:c,clearLast:l,getById:a,setDefaults:u}}const hi=nl([]);function Qt(n,e){return function(){if(typeof arguments[0]=="object"){const t=arguments[0];return e({...t,type:n})}else if(typeof arguments[0]=="string"&&typeof arguments[1]=="string"){const t=arguments[2]||{};return e({...t,type:n,title:arguments[0],description:arguments[1]})}else if(typeof arguments[0]=="string"){const t=arguments[1]||{};return e({...t,type:n,description:arguments[0]})}}}function Rs(n){const e=n-1;return e*e*e+1}function rl(n,{delay:e=0,duration:t=400,easing:r=dt}={}){const i=+getComputedStyle(n).opacity;return{delay:e,duration:t,easing:r,css:s=>`opacity: ${s*i}`}}function il(n,{delay:e=0,duration:t=400,easing:r=Rs,x:i=0,y:s=0,opacity:o=0}={}){const a=getComputedStyle(n),c=+a.opacity,l=a.transform==="none"?"":a.transform,u=c*(1-o);return{delay:e,duration:t,easing:r,css:(d,f)=>`
			transform: ${l} translate(${(1-d)*i}px, ${(1-d)*s}px);
			opacity: ${c-u*f}`}}function sl(n,{from:e,to:t},r={}){const i=getComputedStyle(n),s=i.transform==="none"?"":i.transform,[o,a]=i.transformOrigin.split(" ").map(parseFloat),c=e.left+e.width*o/t.width-(t.left+o),l=e.top+e.height*a/t.height-(t.top+a),{delay:u=0,duration:d=_=>Math.sqrt(_)*120,easing:f=Rs}=r;return{delay:u,duration:ft(d)?d(Math.sqrt(c*c+l*l)):d,easing:f,css:(_,h)=>{const m=h*c,y=h*l,S=_+h*e.width/t.width,A=_+h*e.height/t.height;return`transform: ${s} translate(${m}px, ${y}px) scale(${S}, ${A});`}}}function pi(n,e,t){const r=n.slice();return r[1]=e[t],r}function _i(n,e,t){const r=n.slice();return r[14]=e[t],r}const ol=n=>({data:n&4}),mi=n=>({data:n[14]});function al(n){let e;const t=n[10].default,r=sn(t,n,n[9],mi);return{c(){r&&r.c()},m(i,s){r&&r.m(i,s),e=!0},p(i,s){r&&r.p&&(!e||s&516)&&an(r,t,i,i[9],e?on(t,i[9],s,ol):cn(i[9]),mi)},i(i){e||(M(r,i),e=!0)},o(i){q(r,i),e=!1},d(i){r&&r.d(i)}}}function cl(n){let e,t,r;var i=n[14].component;function s(o){return{props:{data:o[14]}}}return i&&(e=st(i,s(n))),{c(){e&&be(e.$$.fragment),t=pt()},m(o,a){e&&fe(e,o,a),N(o,t,a),r=!0},p(o,a){const c={};if(a&4&&(c.data=o[14]),i!==(i=o[14].component)){if(e){Ue();const l=e;q(l.$$.fragment,1,0,()=>{he(l,1)}),Pe()}i?(e=st(i,s(o)),be(e.$$.fragment),M(e.$$.fragment,1),fe(e,t.parentNode,t)):e=null}else i&&e.$set(c)},i(o){r||(e&&M(e.$$.fragment,o),r=!0)},o(o){e&&q(e.$$.fragment,o),r=!1},d(o){o&&I(t),e&&he(e,o)}}}function gi(n,e){let t,r,i,s,o,a,c,l=z,u;const d=[cl,al],f=[];function _(h,m){return h[14].component?0:1}return r=_(e),i=f[r]=d[r](e),{key:n,first:null,c(){t=$("li"),i.c(),s=X(),g(t,"class","svelte-1rg6zyw"),this.first=t},m(h,m){N(h,t,m),f[r].m(t,null),D(t,s),u=!0},p(h,m){e=h;let y=r;r=_(e),r===y?f[r].p(e,m):(Ue(),q(f[y],1,1,()=>{f[y]=null}),Pe(),i=f[r],i?i.p(e,m):(i=f[r]=d[r](e),i.c()),M(i,1),i.m(t,s))},r(){c=t.getBoundingClientRect()},f(){Io(t),l(),rs(t,c)},a(){l(),l=Oo(t,c,sl,{})},i(h){u||(M(i),ot(()=>{a&&a.end(1),o=jo(t,rl,{duration:500}),o.start()}),u=!0)},o(h){q(i),o&&o.invalidate(),a=Uo(t,il,{y:e[4][e[14].placement],duration:1e3}),u=!1},d(h){h&&I(t),f[r].d(),h&&a&&a.end()}}}function yi(n){let e,t,r=[],i=new Map,s,o;function a(...u){return n[11](n[1],...u)}let c=n[2].filter(a).reverse();const l=u=>u[14].uid;for(let u=0;u<c.length;u+=1){let d=_i(n,c,u),f=l(d);i.set(f,r[u]=gi(f,d))}return{c(){e=$("div"),t=$("ul");for(let u=0;u<r.length;u+=1)r[u].c();s=X(),g(t,"class","svelte-1rg6zyw"),g(e,"class","toast-container "+n[1]+" svelte-1rg6zyw"),pn(e,"width",n[0])},m(u,d){N(u,e,d),D(e,t);for(let f=0;f<r.length;f+=1)r[f].m(t,null);D(e,s),o=!0},p(u,d){if(n=u,d&540){c=n[2].filter(a).reverse(),Ue();for(let f=0;f<r.length;f+=1)r[f].r();r=Co(r,d,l,1,n,c,i,t,Bo,gi,null,_i);for(let f=0;f<r.length;f+=1)r[f].a();Pe()}(!o||d&1)&&pn(e,"width",n[0])},i(u){if(!o){for(let d=0;d<c.length;d+=1)M(r[d]);o=!0}},o(u){for(let d=0;d<r.length;d+=1)q(r[d]);o=!1},d(u){u&&I(e);for(let d=0;d<r.length;d+=1)r[d].d()}}}function ll(n){let e,t,r=n[3],i=[];for(let o=0;o<r.length;o+=1)i[o]=yi(pi(n,r,o));const s=o=>q(i[o],1,1,()=>{i[o]=null});return{c(){for(let o=0;o<i.length;o+=1)i[o].c();e=pt()},m(o,a){for(let c=0;c<i.length;c+=1)i[c].m(o,a);N(o,e,a),t=!0},p(o,[a]){if(a&541){r=o[3];let c;for(c=0;c<r.length;c+=1){const l=pi(o,r,c);i[c]?(i[c].p(l,a),M(i[c],1)):(i[c]=yi(l),i[c].c(),M(i[c],1),i[c].m(e.parentNode,e))}for(Ue(),c=r.length;c<i.length;c+=1)s(c);Pe()}},i(o){if(!t){for(let a=0;a<r.length;a+=1)M(i[a]);t=!0}},o(o){i=i.filter(Boolean);for(let a=0;a<i.length;a+=1)q(i[a]);t=!1},d(o){wo(i,o),o&&I(e)}}}function ul(n,e,t){let r;Rn(n,hi,m=>t(2,r=m));let{$$slots:i={},$$scope:s}=e,{theme:o="dark"}=e,{placement:a="bottom-right"}=e,{type:c="info"}=e,{showProgress:l=!1}=e,{duration:u=3e3}=e,{width:d="320px"}=e;const f=["bottom-right","bottom-left","top-right","top-left","top-center","bottom-center","center-center"],_={"bottom-right":400,"top-right":-400,"bottom-left":400,"top-left":-400,"bottom-center":400,"top-center":-400,"center-center":-800};is(()=>{hi.setDefaults({placement:a,showProgress:l,theme:o,duration:u,type:c})});const h=(m,y)=>y.placement===m;return n.$$set=m=>{"theme"in m&&t(5,o=m.theme),"placement"in m&&t(1,a=m.placement),"type"in m&&t(6,c=m.type),"showProgress"in m&&t(7,l=m.showProgress),"duration"in m&&t(8,u=m.duration),"width"in m&&t(0,d=m.width),"$$scope"in m&&t(9,s=m.$$scope)},[d,a,r,f,_,o,c,l,u,s,i,h]}class dl extends Ft{constructor(e){super(),Mt(this,e,ul,ll,ht,{theme:5,placement:1,type:6,showProgress:7,duration:8,width:0})}}function bi(n){return Object.prototype.toString.call(n)==="[object Date]"}function lr(n,e){if(n===e||n!==n)return()=>n;const t=typeof n;if(t!==typeof e||Array.isArray(n)!==Array.isArray(e))throw new Error("Cannot interpolate values of different type");if(Array.isArray(n)){const r=e.map((i,s)=>lr(n[s],i));return i=>r.map(s=>s(i))}if(t==="object"){if(!n||!e)throw new Error("Object cannot be null");if(bi(n)&&bi(e)){n=n.getTime(),e=e.getTime();const s=e-n;return o=>new Date(n+o*s)}const r=Object.keys(e),i={};return r.forEach(s=>{i[s]=lr(n[s],e[s])}),s=>{const o={};return r.forEach(a=>{o[a]=i[a](s)}),o}}if(t==="number"){const r=e-n;return i=>n+i*r}throw new Error(`Cannot interpolate ${t} values`)}function fl(n,e={}){const t=Yt(n);let r,i=n;function s(o,a){if(n==null)return t.set(n=o),Promise.resolve();i=o;let c=r,l=!1,{delay:u=0,duration:d=400,easing:f=dt,interpolate:_=lr}=Ot(Ot({},e),a);if(d===0)return c&&(c.abort(),c=null),t.set(n=i),Promise.resolve();const h=xn()+u;let m;return r=On(y=>{if(y<h)return!0;l||(m=_(n,o),typeof d=="function"&&(d=d(n,o)),l=!0),c&&(c.abort(),c=null);const S=y-h;return S>d?(t.set(n=o),!1):(t.set(n=m(f(S/d))),!0)}),r.promise}return{set:s,update:(o,a)=>s(o(i,n),a),subscribe:t.subscribe}}const hl=n=>({}),vi=n=>({}),pl=n=>({}),Ei=n=>({}),_l=n=>({}),wi=n=>({});function ml(n){let e,t,r;return{c(){e=oe("svg"),t=oe("path"),r=oe("path"),g(t,"d","M10,1c-5,0-9,4-9,9s4,9,9,9s9-4,9-9S15,1,10,1z M9.2,5h1.5v7H9.2V5z M10,16c-0.6,0-1-0.4-1-1s0.4-1,1-1	s1,0.4,1,1S10.6,16,10,16z"),g(r,"d","M9.2,5h1.5v7H9.2V5z M10,16c-0.6,0-1-0.4-1-1s0.4-1,1-1s1,0.4,1,1S10.6,16,10,16z"),g(r,"data-icon-path","inner-path"),g(r,"opacity","0"),g(e,"class","st-toast-icon svelte-is9c7e"),g(e,"xmlns","http://www.w3.org/2000/svg"),g(e,"width","20"),g(e,"height","20"),g(e,"viewBox","0 0 20 20"),g(e,"aria-hidden","true")},m(i,s){N(i,e,s),D(e,t),D(e,r)},d(i){i&&I(e)}}}function gl(n){let e,t,r;return{c(){e=oe("svg"),t=oe("path"),r=oe("path"),g(t,"d","M10,1c-5,0-9,4-9,9s4,9,9,9s9-4,9-9S15,1,10,1z M13.5,14.5l-8-8l1-1l8,8L13.5,14.5z"),g(r,"d","M13.5,14.5l-8-8l1-1l8,8L13.5,14.5z"),g(r,"data-icon-path","inner-path"),g(r,"opacity","0"),g(e,"class","st-toast-icon svelte-is9c7e"),g(e,"xmlns","http://www.w3.org/2000/svg"),g(e,"width","20"),g(e,"height","20"),g(e,"viewBox","0 0 20 20"),g(e,"aria-hidden","true")},m(i,s){N(i,e,s),D(e,t),D(e,r)},d(i){i&&I(e)}}}function yl(n){let e,t;return{c(){e=oe("svg"),t=oe("path"),g(t,"d","M16,2A14,14,0,1,0,30,16,14,14,0,0,0,16,2Zm0,5a1.5,1.5,0,1,1-1.5,1.5A1.5,1.5,0,0,1,16,7Zm4,17.12H12V21.88h2.88V15.12H13V12.88h4.13v9H20Z"),g(e,"class","st-toast-icon svelte-is9c7e"),g(e,"xmlns","http://www.w3.org/2000/svg"),g(e,"width","20"),g(e,"height","20"),g(e,"viewBox","0 0 32 32"),g(e,"aria-hidden","true")},m(r,i){N(r,e,i),D(e,t)},d(r){r&&I(e)}}}function bl(n){let e,t,r;return{c(){e=oe("svg"),t=oe("path"),r=oe("path"),g(t,"d","M10,1c-4.9,0-9,4.1-9,9s4.1,9,9,9s9-4,9-9S15,1,10,1z M8.7,13.5l-3.2-3.2l1-1l2.2,2.2l4.8-4.8l1,1L8.7,13.5z"),g(r,"fill","none"),g(r,"d","M8.7,13.5l-3.2-3.2l1-1l2.2,2.2l4.8-4.8l1,1L8.7,13.5z"),g(r,"data-icon-path","inner-path"),g(r,"opacity","0"),g(e,"class","st-toast-icon svelte-is9c7e"),g(e,"xmlns","http://www.w3.org/2000/svg"),g(e,"width","20"),g(e,"height","20"),g(e,"viewBox","0 0 20 20"),g(e,"aria-hidden","true")},m(i,s){N(i,e,s),D(e,t),D(e,r)},d(i){i&&I(e)}}}function vl(n){let e;function t(s,o){return s[1].type==="success"?bl:s[1].type==="info"?yl:s[1].type==="error"?gl:ml}let r=t(n),i=r(n);return{c(){i.c(),e=pt()},m(s,o){i.m(s,o),N(s,e,o)},p(s,o){r!==(r=t(s))&&(i.d(1),i=r(s),i&&(i.c(),i.m(e.parentNode,e)))},d(s){i.d(s),s&&I(e)}}}function Ti(n){let e,t=n[1].title+"",r;return{c(){e=$("h3"),r=In(t),g(e,"class","st-toast-title svelte-is9c7e")},m(i,s){N(i,e,s),D(e,r)},p(i,s){s&2&&t!==(t=i[1].title+"")&&ts(r,t)},d(i){i&&I(e)}}}function El(n){let e,t;return{c(){e=oe("svg"),t=oe("path"),g(t,"d","M24 9.4L22.6 8 16 14.6 9.4 8 8 9.4 14.6 16 8 22.6 9.4 24 16 17.4 22.6 24 24 22.6 17.4 16 24 9.4z"),g(e,"xmlns","http://www.w3.org/2000/svg"),g(e,"class","bx--toast-notification__close-icon svelte-is9c7e"),g(e,"width","20"),g(e,"height","20"),g(e,"viewBox","0 0 32 32"),g(e,"aria-hidden","true")},m(r,i){N(r,e,i),D(e,t)},p:z,d(r){r&&I(e)}}}function Si(n){let e;return{c(){e=$("progress"),pn(e,"height",n[1].duration>0?"4px":0),e.value=n[2],g(e,"class","svelte-is9c7e")},m(t,r){N(t,e,r)},p(t,r){r&2&&pn(e,"height",t[1].duration>0?"4px":0),r&4&&(e.value=t[2])},d(t){t&&I(e)}}}function wl(n){let e,t,r,i,s,o=n[1].description+"",a,c,l,u,d,f,_,h,m,y;const S=n[7].icon,A=sn(S,n,n[6],wi),R=A||vl(n);let E=n[1].title&&Ti(n);const T=n[7].extra,w=sn(T,n,n[6],Ei),U=n[7]["close-icon"],x=sn(U,n,n[6],vi),F=x||El();let Q=n[1].showProgress&&Si(n);return{c(){e=$("div"),R&&R.c(),t=X(),r=$("div"),E&&E.c(),i=X(),s=$("p"),a=In(o),c=X(),l=$("div"),w&&w.c(),u=X(),d=$("button"),F&&F.c(),f=X(),Q&&Q.c(),g(s,"class","st-toast-description svelte-is9c7e"),g(l,"class","st-toast-extra"),g(r,"class","st-toast-details svelte-is9c7e"),g(d,"class","st-toast-close-btn svelte-is9c7e"),g(d,"type","button"),g(d,"aria-label","close"),g(e,"class",_="st-toast flat "+(n[1].theme||n[0])+" "+(n[1].type||"info")+" svelte-is9c7e"),g(e,"role","alert"),g(e,"aria-live","assertive"),g(e,"aria-atomic","true")},m(k,Z){N(k,e,Z),R&&R.m(e,null),D(e,t),D(e,r),E&&E.m(r,null),D(r,i),D(r,s),D(s,a),D(r,c),D(r,l),w&&w.m(l,null),D(e,u),D(e,d),F&&F.m(d,null),D(e,f),Q&&Q.m(e,null),h=!0,m||(y=[it(d,"click",n[4]),it(e,"click",n[5])],m=!0)},p(k,[Z]){A?A.p&&(!h||Z&64)&&an(A,S,k,k[6],h?on(S,k[6],Z,_l):cn(k[6]),wi):R&&R.p&&(!h||Z&2)&&R.p(k,h?Z:-1),k[1].title?E?E.p(k,Z):(E=Ti(k),E.c(),E.m(r,i)):E&&(E.d(1),E=null),(!h||Z&2)&&o!==(o=k[1].description+"")&&ts(a,o),w&&w.p&&(!h||Z&64)&&an(w,T,k,k[6],h?on(T,k[6],Z,pl):cn(k[6]),Ei),x&&x.p&&(!h||Z&64)&&an(x,U,k,k[6],h?on(U,k[6],Z,hl):cn(k[6]),vi),k[1].showProgress?Q?Q.p(k,Z):(Q=Si(k),Q.c(),Q.m(e,null)):Q&&(Q.d(1),Q=null),(!h||Z&3&&_!==(_="st-toast flat "+(k[1].theme||k[0])+" "+(k[1].type||"info")+" svelte-is9c7e"))&&g(e,"class",_)},i(k){h||(M(R,k),M(w,k),M(F,k),h=!0)},o(k){q(R,k),q(w,k),q(F,k),h=!1},d(k){k&&I(e),R&&R.d(k),E&&E.d(),w&&w.d(k),F&&F.d(k),Q&&Q.d(),m=!1,Se(y)}}}function Tl(n,e,t){let r,{$$slots:i={},$$scope:s}=e,{theme:o="light"}=e,{data:a={}}=e;const c=fl(1,{duration:a.duration,easing:dt});Rn(n,c,d=>t(2,r=d)),is(()=>{c.set(0,{duration:a.duration})});const l=d=>{d.stopPropagation(),a.remove(),typeof a.onRemove=="function"&&a.onRemove()},u=()=>{typeof a.onClick=="function"&&a.onClick()};return n.$$set=d=>{"theme"in d&&t(0,o=d.theme),"data"in d&&t(1,a=d.data),"$$scope"in d&&t(6,s=d.$$scope)},[o,a,r,c,l,u,s,i]}class Sl extends Ft{constructor(e){super(),Mt(this,e,Tl,wl,ht,{theme:0,data:1})}}function kl(n){let e,t;return e=new Sl({props:{data:n[2]}}),{c(){be(e.$$.fragment)},m(r,i){fe(e,r,i),t=!0},p(r,i){const s={};i&4&&(s.data=r[2]),e.$set(s)},i(r){t||(M(e.$$.fragment,r),t=!0)},o(r){q(e.$$.fragment,r),t=!1},d(r){he(e,r)}}}function Rl(n){let e,t,r,i,s,o,a,c;return document.title=e=n[0],r=new el({props:{logo:Go}}),s=new Wo({props:{routes:n[1]}}),a=new dl({props:{placement:"bottom-right",theme:"dark",$$slots:{default:[kl,({data:l})=>({2:l}),({data:l})=>l?4:0]},$$scope:{ctx:n}}}),{c(){t=X(),be(r.$$.fragment),i=X(),be(s.$$.fragment),o=X(),be(a.$$.fragment)},m(l,u){N(l,t,u),fe(r,l,u),N(l,i,u),fe(s,l,u),N(l,o,u),fe(a,l,u),c=!0},p(l,[u]){(!c||u&1)&&e!==(e=l[0])&&(document.title=e);const d={};u&12&&(d.$$scope={dirty:u,ctx:l}),a.$set(d)},i(l){c||(M(r.$$.fragment,l),M(s.$$.fragment,l),M(a.$$.fragment,l),c=!0)},o(l){q(r.$$.fragment,l),q(s.$$.fragment,l),q(a.$$.fragment,l),c=!1},d(l){l&&I(t),he(r,l),l&&I(i),he(s,l),l&&I(o),he(a,l)}}}function xl(n,e,t){let r;Rn(n,tl,s=>t(0,r=s));const i={"/adventures":_e({asyncComponent:()=>ie(()=>import("./Adventures.66c72b9e.js"),["assets/Adventures.66c72b9e.js","assets/AdventureBanner.f761894e.js","assets/AdventureLogo.fbf0a8bf.js","assets/AdventureBanner.9e611945.css","assets/Spinner.c017af1e.js","assets/Spinner.35926623.css","assets/Error.64a5909b.js","assets/Error.5a1be546.css"])}),"/adventure/:name":_e({asyncComponent:()=>ie(()=>import("./Adventure.c35fb79b.js"),["assets/Adventure.c35fb79b.js","assets/Spinner.c017af1e.js","assets/Spinner.35926623.css","assets/AdventureLogo.fbf0a8bf.js","assets/Error.64a5909b.js","assets/Error.5a1be546.css"])}),"/games":_e({asyncComponent:()=>ie(()=>import("./Games.33b2b9b5.js"),["assets/Games.33b2b9b5.js","assets/AdventureBanner.f761894e.js","assets/AdventureLogo.fbf0a8bf.js","assets/AdventureBanner.9e611945.css","assets/Spinner.c017af1e.js","assets/Spinner.35926623.css","assets/RandomText.d8cf2a9e.js","assets/Error.64a5909b.js","assets/Error.5a1be546.css","assets/Games.67733dea.css"])}),"/game/:code":_e({asyncComponent:()=>ie(()=>import("./Game.eaccaf14.js"),["assets/Game.eaccaf14.js","assets/AdventureLogo.fbf0a8bf.js","assets/Spinner.c017af1e.js","assets/Spinner.35926623.css","assets/Game.59f1822a.css"])}),"/game/:code/:puzzle":_e({asyncComponent:()=>ie(()=>import("./Puzzle.e92e4f25.js"),["assets/Puzzle.e92e4f25.js","assets/RandomText.d8cf2a9e.js","assets/Spinner.c017af1e.js","assets/Spinner.35926623.css","assets/Error.64a5909b.js","assets/Error.5a1be546.css","assets/Puzzle.29651c7b.css"])}),"/login":_e({props:{type:"login"},asyncComponent:()=>ie(()=>import("./Auth.6329fd55.js"),[])}),"/logout":_e({props:{type:"logout"},asyncComponent:()=>ie(()=>import("./Auth.6329fd55.js"),[])}),"/signup":_e({props:{type:"signup"},asyncComponent:()=>ie(()=>import("./Auth.6329fd55.js"),[])}),"/":_e({asyncComponent:()=>ie(()=>import("./Home.8580b3f7.js"),["assets/Home.8580b3f7.js","assets/Home.d44defa0.css"])}),"*":_e({asyncComponent:()=>ie(()=>import("./NotFound.768c94e3.js"),["assets/NotFound.768c94e3.js","assets/NotFound.a3db53c1.css"])})};return[r,i]}class Ol extends Ft{constructor(e){super(),Mt(this,e,xl,Rl,ht,{})}}const xs=Object.prototype.toString;function Os(n){switch(xs.call(n)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return ve(n,Error)}}function mt(n,e){return xs.call(n)===`[object ${e}]`}function Is(n){return mt(n,"ErrorEvent")}function ki(n){return mt(n,"DOMError")}function Il(n){return mt(n,"DOMException")}function ze(n){return mt(n,"String")}function Ds(n){return n===null||typeof n!="object"&&typeof n!="function"}function at(n){return mt(n,"Object")}function Nr(n){return typeof Event<"u"&&ve(n,Event)}function Dl(n){return typeof Element<"u"&&ve(n,Element)}function Nl(n){return mt(n,"RegExp")}function Ar(n){return Boolean(n&&n.then&&typeof n.then=="function")}function Al(n){return at(n)&&"nativeEvent"in n&&"preventDefault"in n&&"stopPropagation"in n}function Ns(n){return typeof n=="number"&&n!==n}function ve(n,e){try{return n instanceof e}catch{return!1}}function Zt(n){return n&&n.Math==Math?n:void 0}const ue=typeof globalThis=="object"&&Zt(globalThis)||typeof window=="object"&&Zt(window)||typeof self=="object"&&Zt(self)||typeof global=="object"&&Zt(global)||function(){return this}()||{};function Un(){return ue}function $r(n,e,t){const r=t||ue,i=r.__SENTRY__=r.__SENTRY__||{};return i[n]||(i[n]=e())}const dn=Un();function At(n,e){try{let t=n;const r=5,i=80,s=[];let o=0,a=0;const c=" > ",l=c.length;let u;for(;t&&o++<r&&(u=$l(t,e),!(u==="html"||o>1&&a+s.length*l+u.length>=i));)s.push(u),a+=u.length,t=t.parentNode;return s.reverse().join(c)}catch{return"<unknown>"}}function $l(n,e){const t=n,r=[];let i,s,o,a,c;if(!t||!t.tagName)return"";r.push(t.tagName.toLowerCase());const l=e&&e.length?e.filter(d=>t.getAttribute(d)).map(d=>[d,t.getAttribute(d)]):null;if(l&&l.length)l.forEach(d=>{r.push(`[${d[0]}="${d[1]}"]`)});else if(t.id&&r.push(`#${t.id}`),i=t.className,i&&ze(i))for(s=i.split(/\s+/),c=0;c<s.length;c++)r.push(`.${s[c]}`);const u=["type","name","title","alt"];for(c=0;c<u.length;c++)o=u[c],a=t.getAttribute(o),a&&r.push(`[${o}="${a}"]`);return r.join("")}function jl(){try{return dn.document.location.href}catch{return""}}function As(n){return dn.document&&dn.document.querySelector?dn.document.querySelector(n):null}class te extends Error{constructor(e,t="warn"){super(e),this.message=e,this.name=new.target.prototype.constructor.name,Object.setPrototypeOf(this,new.target.prototype),this.logLevel=t}}const Ul=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function Pl(n){return n==="http"||n==="https"}function jr(n,e=!1){const{host:t,path:r,pass:i,port:s,projectId:o,protocol:a,publicKey:c}=n;return`${a}://${c}${e&&i?`:${i}`:""}@${t}${s?`:${s}`:""}/${r&&`${r}/`}${o}`}function Bl(n){const e=Ul.exec(n);if(!e)throw new te(`Invalid Sentry Dsn: ${n}`);const[t,r,i="",s,o="",a]=e.slice(1);let c="",l=a;const u=l.split("/");if(u.length>1&&(c=u.slice(0,-1).join("/"),l=u.pop()),l){const d=l.match(/^\d+/);d&&(l=d[0])}return $s({host:s,pass:i,path:c,projectId:l,port:o,protocol:t,publicKey:r})}function $s(n){return{protocol:n.protocol,publicKey:n.publicKey||"",pass:n.pass||"",host:n.host,port:n.port||"",path:n.path||"",projectId:n.projectId}}function Cl(n){if(!(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__))return;const{port:e,projectId:t,protocol:r}=n;if(["protocol","publicKey","host","projectId"].forEach(s=>{if(!n[s])throw new te(`Invalid Sentry Dsn: ${s} missing`)}),!t.match(/^\d+$/))throw new te(`Invalid Sentry Dsn: Invalid projectId ${t}`);if(!Pl(r))throw new te(`Invalid Sentry Dsn: Invalid protocol ${r}`);if(e&&isNaN(parseInt(e,10)))throw new te(`Invalid Sentry Dsn: Invalid port ${e}`);return!0}function Ll(n){const e=typeof n=="string"?Bl(n):$s(n);return Cl(e),e}const Gl="Sentry Logger ",En=["debug","info","warn","error","log","assert","trace"];function js(n){if(!("console"in ue))return n();const e=ue.console,t={};En.forEach(r=>{const i=e[r]&&e[r].__sentry_original__;r in e&&i&&(t[r]=e[r],e[r]=i)});try{return n()}finally{Object.keys(t).forEach(r=>{e[r]=t[r]})}}function Ri(){let n=!1;const e={enable:()=>{n=!0},disable:()=>{n=!1}};return typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__?En.forEach(t=>{e[t]=(...r)=>{n&&js(()=>{ue.console[t](`${Gl}[${t}]:`,...r)})}}):En.forEach(t=>{e[t]=()=>{}}),e}let b;typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__?b=$r("logger",Ri):b=Ri();function kt(n,e=0){return typeof n!="string"||e===0||n.length<=e?n:`${n.substr(0,e)}...`}function xi(n,e){if(!Array.isArray(n))return"";const t=[];for(let r=0;r<n.length;r++){const i=n[r];try{t.push(String(i))}catch{t.push("[value cannot be serialized]")}}return t.join(e)}function Pn(n,e){return ze(n)?Nl(e)?e.test(n):typeof e=="string"?n.indexOf(e)!==-1:!1:!1}function ne(n,e,t){if(!(e in n))return;const r=n[e],i=t(r);if(typeof i=="function")try{Us(i,r)}catch{}n[e]=i}function Ur(n,e,t){Object.defineProperty(n,e,{value:t,writable:!0,configurable:!0})}function Us(n,e){const t=e.prototype||{};n.prototype=e.prototype=t,Ur(n,"__sentry_original__",e)}function Pr(n){return n.__sentry_original__}function Ml(n){return Object.keys(n).map(e=>`${encodeURIComponent(e)}=${encodeURIComponent(n[e])}`).join("&")}function Ps(n){if(Os(n))return{message:n.message,name:n.name,stack:n.stack,...Ii(n)};if(Nr(n)){const e={type:n.type,target:Oi(n.target),currentTarget:Oi(n.currentTarget),...Ii(n)};return typeof CustomEvent<"u"&&ve(n,CustomEvent)&&(e.detail=n.detail),e}else return n}function Oi(n){try{return Dl(n)?At(n):Object.prototype.toString.call(n)}catch{return"<unknown>"}}function Ii(n){if(typeof n=="object"&&n!==null){const e={};for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e}else return{}}function Fl(n,e=40){const t=Object.keys(Ps(n));if(t.sort(),!t.length)return"[object has no keys]";if(t[0].length>=e)return kt(t[0],e);for(let r=t.length;r>0;r--){const i=t.slice(0,r).join(", ");if(!(i.length>e))return r===t.length?i:kt(i,e)}return""}function De(n){return ur(n,new Map)}function ur(n,e){if(at(n)){const t=e.get(n);if(t!==void 0)return t;const r={};e.set(n,r);for(const i of Object.keys(n))typeof n[i]<"u"&&(r[i]=ur(n[i],e));return r}if(Array.isArray(n)){const t=e.get(n);if(t!==void 0)return t;const r=[];return e.set(n,r),n.forEach(i=>{r.push(ur(i,e))}),r}return n}function Me(n,e){return n!=null?n:e()}function Yl(n){let e,t=n[0],r=1;for(;r<n.length;){const i=n[r],s=n[r+1];if(r+=2,(i==="optionalAccess"||i==="optionalCall")&&t==null)return;i==="access"||i==="optionalAccess"?(e=t,t=s(t)):(i==="call"||i==="optionalCall")&&(t=s((...o)=>t.call(e,...o)),e=void 0)}return t}const Hl=50;function Bs(...n){const e=n.sort((t,r)=>t[0]-r[0]).map(t=>t[1]);return(t,r=0)=>{const i=[];for(const s of t.split(`
`).slice(r)){const o=s.replace(/\(error: (.*)\)/,"$1");for(const a of e){const c=a(o);if(c){i.push(c);break}}}return ql(i)}}function zl(n){return Array.isArray(n)?Bs(...n):n}function ql(n){if(!n.length)return[];let e=n;const t=e[0].function||"",r=e[e.length-1].function||"";return(t.indexOf("captureMessage")!==-1||t.indexOf("captureException")!==-1)&&(e=e.slice(1)),r.indexOf("sentryWrapped")!==-1&&(e=e.slice(0,-1)),e.slice(0,Hl).map(i=>({...i,filename:i.filename||e[0].filename,function:i.function||"?"})).reverse()}const Xn="<anonymous>";function je(n){try{return!n||typeof n!="function"?Xn:n.name||Xn}catch{return Xn}}const Ye=Un();function Cs(){if(!("fetch"in Ye))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch{return!1}}function dr(n){return n&&/^function fetch\(\)\s+\{\s+\[native code\]\s+\}$/.test(n.toString())}function Jl(){if(!Cs())return!1;if(dr(Ye.fetch))return!0;let n=!1;const e=Ye.document;if(e&&typeof e.createElement=="function")try{const t=e.createElement("iframe");t.hidden=!0,e.head.appendChild(t),t.contentWindow&&t.contentWindow.fetch&&(n=dr(t.contentWindow.fetch)),e.head.removeChild(t)}catch(t){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&b.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",t)}return n}function Wl(){const n=Ye.chrome,e=n&&n.app&&n.app.runtime,t="history"in Ye&&!!Ye.history.pushState&&!!Ye.history.replaceState;return!e&&t}const Y=Un(),Rt={},Di={};function Vl(n){if(!Di[n])switch(Di[n]=!0,n){case"console":Kl();break;case"dom":su();break;case"xhr":eu();break;case"fetch":Xl();break;case"history":tu();break;case"error":ou();break;case"unhandledrejection":au();break;default:(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&b.warn("unknown instrumentation type:",n);return}}function ce(n,e){Rt[n]=Rt[n]||[],Rt[n].push(e),Vl(n)}function pe(n,e){if(!(!n||!Rt[n]))for(const t of Rt[n]||[])try{t(e)}catch(r){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&b.error(`Error while triggering instrumentation handler.
Type: ${n}
Name: ${je(t)}
Error:`,r)}}function Kl(){"console"in Y&&En.forEach(function(n){n in Y.console&&ne(Y.console,n,function(e){return function(...t){pe("console",{args:t,level:n}),e&&e.apply(Y.console,t)}})})}function Xl(){!Jl()||ne(Y,"fetch",function(n){return function(...e){const t={args:e,fetchData:{method:Ql(e),url:Zl(e)},startTimestamp:Date.now()};return pe("fetch",{...t}),n.apply(Y,e).then(r=>(pe("fetch",{...t,endTimestamp:Date.now(),response:r}),r),r=>{throw pe("fetch",{...t,endTimestamp:Date.now(),error:r}),r})}})}function Ql(n=[]){return"Request"in Y&&ve(n[0],Request)&&n[0].method?String(n[0].method).toUpperCase():n[1]&&n[1].method?String(n[1].method).toUpperCase():"GET"}function Zl(n=[]){return typeof n[0]=="string"?n[0]:"Request"in Y&&ve(n[0],Request)?n[0].url:String(n[0])}function eu(){if(!("XMLHttpRequest"in Y))return;const n=XMLHttpRequest.prototype;ne(n,"open",function(e){return function(...t){const r=this,i=t[1],s=r.__sentry_xhr__={method:ze(t[0])?t[0].toUpperCase():t[0],url:t[1]};ze(i)&&s.method==="POST"&&i.match(/sentry_key/)&&(r.__sentry_own_request__=!0);const o=function(){if(r.readyState===4){try{s.status_code=r.status}catch{}pe("xhr",{args:t,endTimestamp:Date.now(),startTimestamp:Date.now(),xhr:r})}};return"onreadystatechange"in r&&typeof r.onreadystatechange=="function"?ne(r,"onreadystatechange",function(a){return function(...c){return o(),a.apply(r,c)}}):r.addEventListener("readystatechange",o),e.apply(r,t)}}),ne(n,"send",function(e){return function(...t){return this.__sentry_xhr__&&t[0]!==void 0&&(this.__sentry_xhr__.body=t[0]),pe("xhr",{args:t,startTimestamp:Date.now(),xhr:this}),e.apply(this,t)}})}let en;function tu(){if(!Wl())return;const n=Y.onpopstate;Y.onpopstate=function(...t){const r=Y.location.href,i=en;if(en=r,pe("history",{from:i,to:r}),n)try{return n.apply(this,t)}catch{}};function e(t){return function(...r){const i=r.length>2?r[2]:void 0;if(i){const s=en,o=String(i);en=o,pe("history",{from:s,to:o})}return t.apply(this,r)}}ne(Y.history,"pushState",e),ne(Y.history,"replaceState",e)}const nu=1e3;let tn,nn;function ru(n,e){if(!n||n.type!==e.type)return!0;try{if(n.target!==e.target)return!0}catch{}return!1}function iu(n){if(n.type!=="keypress")return!1;try{const e=n.target;if(!e||!e.tagName)return!0;if(e.tagName==="INPUT"||e.tagName==="TEXTAREA"||e.isContentEditable)return!1}catch{}return!0}function Ni(n,e=!1){return t=>{if(!t||nn===t||iu(t))return;const r=t.type==="keypress"?"input":t.type;tn===void 0?(n({event:t,name:r,global:e}),nn=t):ru(nn,t)&&(n({event:t,name:r,global:e}),nn=t),clearTimeout(tn),tn=Y.setTimeout(()=>{tn=void 0},nu)}}function su(){if(!("document"in Y))return;const n=pe.bind(null,"dom"),e=Ni(n,!0);Y.document.addEventListener("click",e,!1),Y.document.addEventListener("keypress",e,!1),["EventTarget","Node"].forEach(t=>{const r=Y[t]&&Y[t].prototype;!r||!r.hasOwnProperty||!r.hasOwnProperty("addEventListener")||(ne(r,"addEventListener",function(i){return function(s,o,a){if(s==="click"||s=="keypress")try{const c=this,l=c.__sentry_instrumentation_handlers__=c.__sentry_instrumentation_handlers__||{},u=l[s]=l[s]||{refCount:0};if(!u.handler){const d=Ni(n);u.handler=d,i.call(this,s,d,a)}u.refCount+=1}catch{}return i.call(this,s,o,a)}}),ne(r,"removeEventListener",function(i){return function(s,o,a){if(s==="click"||s=="keypress")try{const c=this,l=c.__sentry_instrumentation_handlers__||{},u=l[s];u&&(u.refCount-=1,u.refCount<=0&&(i.call(this,s,u.handler,a),u.handler=void 0,delete l[s]),Object.keys(l).length===0&&delete c.__sentry_instrumentation_handlers__)}catch{}return i.call(this,s,o,a)}}))})}let Qn=null;function ou(){Qn=Y.onerror,Y.onerror=function(n,e,t,r,i){return pe("error",{column:r,error:i,line:t,msg:n,url:e}),Qn?Qn.apply(this,arguments):!1}}let Zn=null;function au(){Zn=Y.onunhandledrejection,Y.onunhandledrejection=function(n){return pe("unhandledrejection",n),Zn?Zn.apply(this,arguments):!0}}function cu(){const n=typeof WeakSet=="function",e=n?new WeakSet:[];function t(i){if(n)return e.has(i)?!0:(e.add(i),!1);for(let s=0;s<e.length;s++)if(e[s]===i)return!0;return e.push(i),!1}function r(i){if(n)e.delete(i);else for(let s=0;s<e.length;s++)if(e[s]===i){e.splice(s,1);break}}return[t,r]}function Ne(){const n=ue,e=n.crypto||n.msCrypto;if(e&&e.randomUUID)return e.randomUUID().replace(/-/g,"");const t=e&&e.getRandomValues?()=>e.getRandomValues(new Uint8Array(1))[0]:()=>Math.random()*16;return([1e7]+1e3+4e3+8e3+1e11).replace(/[018]/g,r=>(r^(t()&15)>>r/4).toString(16))}function Ls(n){return n.exception&&n.exception.values?n.exception.values[0]:void 0}function He(n){const{message:e,event_id:t}=n;if(e)return e;const r=Ls(n);return r?r.type&&r.value?`${r.type}: ${r.value}`:r.type||r.value||t||"<unknown>":t||"<unknown>"}function fr(n,e,t){const r=n.exception=n.exception||{},i=r.values=r.values||[],s=i[0]=i[0]||{};s.value||(s.value=e||""),s.type||(s.type=t||"Error")}function $t(n,e){const t=Ls(n);if(!t)return;const r={type:"generic",handled:!0},i=t.mechanism;if(t.mechanism={...r,...i,...e},e&&"data"in e){const s={...i&&i.data,...e.data};t.mechanism.data=s}}function Ai(n){if(n&&n.__sentry_captured__)return!0;try{Ur(n,"__sentry_captured__",!0)}catch{}return!1}function Gs(n){return Array.isArray(n)?n:[n]}function lu(){return typeof __SENTRY_BROWSER_BUNDLE__<"u"&&!!__SENTRY_BROWSER_BUNDLE__}function Br(){return!lu()&&Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]"}function Ie(n,e){return n.require(e)}function uu(n){let e;try{e=Ie(module,n)}catch{}try{const{cwd:t}=Ie(module,"process");e=Ie(module,`${t()}/node_modules/${n}`)}catch{}return e}function ke(n,e=1/0,t=1/0){try{return hr("",n,e,t)}catch(r){return{ERROR:`**non-serializable** (${r})`}}}function Ms(n,e=3,t=100*1024){const r=ke(n,e);return hu(r)>t?Ms(n,e-1,t):r}function hr(n,e,t=1/0,r=1/0,i=cu()){const[s,o]=i;if(e===null||["number","boolean","string"].includes(typeof e)&&!Ns(e))return e;const a=du(n,e);if(!a.startsWith("[object "))return a;if(e.__sentry_skip_normalization__)return e;if(t===0)return a.replace("object ","");if(s(e))return"[Circular ~]";const c=e;if(c&&typeof c.toJSON=="function")try{const f=c.toJSON();return hr("",f,t-1,r,i)}catch{}const l=Array.isArray(e)?[]:{};let u=0;const d=Ps(e);for(const f in d){if(!Object.prototype.hasOwnProperty.call(d,f))continue;if(u>=r){l[f]="[MaxProperties ~]";break}const _=d[f];l[f]=hr(f,_,t-1,r,i),u+=1}return o(e),l}function du(n,e){try{return n==="domain"&&e&&typeof e=="object"&&e._events?"[Domain]":n==="domainEmitter"?"[DomainEmitter]":typeof global<"u"&&e===global?"[Global]":typeof window<"u"&&e===window?"[Window]":typeof document<"u"&&e===document?"[Document]":Al(e)?"[SyntheticEvent]":typeof e=="number"&&e!==e?"[NaN]":e===void 0?"[undefined]":typeof e=="function"?`[Function: ${je(e)}]`:typeof e=="symbol"?`[${String(e)}]`:typeof e=="bigint"?`[BigInt: ${String(e)}]`:`[object ${Object.getPrototypeOf(e).constructor.name}]`}catch(t){return`**non-serializable** (${t})`}}function fu(n){return~-encodeURI(n).split(/%..|./).length}function hu(n){return fu(JSON.stringify(n))}var we;(function(n){n[n.PENDING=0]="PENDING";const t=1;n[n.RESOLVED=t]="RESOLVED";const r=2;n[n.REJECTED=r]="REJECTED"})(we||(we={}));function qe(n){return new re(e=>{e(n)})}function wn(n){return new re((e,t)=>{t(n)})}class re{__init(){this._state=we.PENDING}__init2(){this._handlers=[]}constructor(e){re.prototype.__init.call(this),re.prototype.__init2.call(this),re.prototype.__init3.call(this),re.prototype.__init4.call(this),re.prototype.__init5.call(this),re.prototype.__init6.call(this);try{e(this._resolve,this._reject)}catch(t){this._reject(t)}}then(e,t){return new re((r,i)=>{this._handlers.push([!1,s=>{if(!e)r(s);else try{r(e(s))}catch(o){i(o)}},s=>{if(!t)i(s);else try{r(t(s))}catch(o){i(o)}}]),this._executeHandlers()})}catch(e){return this.then(t=>t,e)}finally(e){return new re((t,r)=>{let i,s;return this.then(o=>{s=!1,i=o,e&&e()},o=>{s=!0,i=o,e&&e()}).then(()=>{if(s){r(i);return}t(i)})})}__init3(){this._resolve=e=>{this._setResult(we.RESOLVED,e)}}__init4(){this._reject=e=>{this._setResult(we.REJECTED,e)}}__init5(){this._setResult=(e,t)=>{if(this._state===we.PENDING){if(Ar(t)){t.then(this._resolve,this._reject);return}this._state=e,this._value=t,this._executeHandlers()}}}__init6(){this._executeHandlers=()=>{if(this._state===we.PENDING)return;const e=this._handlers.slice();this._handlers=[],e.forEach(t=>{t[0]||(this._state===we.RESOLVED&&t[1](this._value),this._state===we.REJECTED&&t[2](this._value),t[0]=!0)})}}}function pu(n){const e=[];function t(){return n===void 0||e.length<n}function r(o){return e.splice(e.indexOf(o),1)[0]}function i(o){if(!t())return wn(new te("Not adding Promise because buffer limit was reached."));const a=o();return e.indexOf(a)===-1&&e.push(a),a.then(()=>r(a)).then(null,()=>r(a).then(null,()=>{})),a}function s(o){return new re((a,c)=>{let l=e.length;if(!l)return a(!0);const u=setTimeout(()=>{o&&o>0&&a(!1)},o);e.forEach(d=>{qe(d).then(()=>{--l||(clearTimeout(u),a(!0))},c)})})}return{$:e,add:i,drain:s}}function er(n){if(!n)return{};const e=n.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!e)return{};const t=e[6]||"",r=e[8]||"";return{host:e[4],path:e[5],protocol:e[2],relative:e[5]+t+r}}const _u=["fatal","error","warning","log","info","debug"];function mu(n){return n==="warn"?"warning":_u.includes(n)?n:"log"}const Fs=Un(),pr={nowSeconds:()=>Date.now()/1e3};function gu(){const{performance:n}=Fs;if(!n||!n.now)return;const e=Date.now()-n.now();return{now:()=>n.now(),timeOrigin:e}}function yu(){try{return Ie(module,"perf_hooks").performance}catch{return}}const tr=Br()?yu():gu(),$i=tr===void 0?pr:{nowSeconds:()=>(tr.timeOrigin+tr.now())/1e3},Bn=pr.nowSeconds.bind(pr),Cn=$i.nowSeconds.bind($i),jt=Cn,Ut=(()=>{const{performance:n}=Fs;if(!n||!n.now)return;const e=3600*1e3,t=n.now(),r=Date.now(),i=n.timeOrigin?Math.abs(n.timeOrigin+t-r):e,s=i<e,o=n.timing&&n.timing.navigationStart,c=typeof o=="number"?Math.abs(o+t-r):e,l=c<e;return s||l?i<=c?n.timeOrigin:o:r})(),bu=new RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$");function vu(n){const e=n.match(bu);if(!n||!e)return;let t;return e[3]==="1"?t=!0:e[3]==="0"&&(t=!1),{traceId:e[1],parentSampled:t,parentSpanId:e[2]}}function Ln(n,e=[]){return[n,e]}function Eu(n,e){const[t,r]=n;return[t,[...r,e]]}function ji(n,e){n[1].forEach(r=>{const i=r[0].type;e(r,i)})}function _r(n,e){return(e||new TextEncoder).encode(n)}function Ys(n,e){const[t,r]=n;let i=JSON.stringify(t);function s(o){typeof i=="string"?i=typeof o=="string"?i+o:[_r(i,e),o]:i.push(typeof o=="string"?_r(o,e):o)}for(const o of r){const[a,c]=o;if(s(`
${JSON.stringify(a)}
`),typeof c=="string"||c instanceof Uint8Array)s(c);else{let l;try{l=JSON.stringify(c)}catch{l=JSON.stringify(ke(c))}s(l)}}return typeof i=="string"?i:wu(i)}function wu(n){const e=n.reduce((i,s)=>i+s.length,0),t=new Uint8Array(e);let r=0;for(const i of n)t.set(i,r),r+=i.length;return t}function Tu(n,e){const t=typeof n.data=="string"?_r(n.data,e):n.data;return[De({type:"attachment",length:t.length,filename:n.filename,content_type:n.contentType,attachment_type:n.attachmentType}),t]}const Su={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default"};function Ui(n){return Su[n]}function ku(n,e,t){const r=[{type:"client_report"},{timestamp:t||Bn(),discarded_events:n}];return Ln(e?{dsn:e}:{},[r])}const Ru=60*1e3;function xu(n,e=Date.now()){const t=parseInt(`${n}`,10);if(!isNaN(t))return t*1e3;const r=Date.parse(`${n}`);return isNaN(r)?Ru:r-e}function Ou(n,e){return n[e]||n.all||0}function Iu(n,e,t=Date.now()){return Ou(n,e)>t}function Du(n,{statusCode:e,headers:t},r=Date.now()){const i={...n},s=t&&t["x-sentry-rate-limits"],o=t&&t["retry-after"];if(s)for(const a of s.trim().split(",")){const[c,l]=a.split(":",2),u=parseInt(c,10),d=(isNaN(u)?60:u)*1e3;if(!l)i.all=r+d;else for(const f of l.split(";"))i[f]=r+d}else o?i.all=r+xu(o,r):e===429&&(i.all=r+60*1e3);return i}const mr="baggage",Hs="sentry-",Nu=/^sentry-/,Au=8192;function $u(n){if(!ze(n)&&!Array.isArray(n))return;let e={};if(Array.isArray(n))e=n.reduce((r,i)=>{const s=Pi(i);return{...r,...s}},{});else{if(!n)return;e=Pi(n)}const t=Object.entries(e).reduce((r,[i,s])=>{if(i.match(Nu)){const o=i.slice(Hs.length);r[o]=s}return r},{});if(Object.keys(t).length>0)return t}function zs(n){const e=Object.entries(n).reduce((t,[r,i])=>(i&&(t[`${Hs}${r}`]=i),t),{});return ju(e)}function Pi(n){return n.split(",").map(e=>e.split("=").map(t=>decodeURIComponent(t.trim()))).reduce((e,[t,r])=>(e[t]=r,e),{})}function ju(n){if(Object.keys(n).length!==0)return Object.entries(n).reduce((e,[t,r],i)=>{const s=`${encodeURIComponent(t)}=${encodeURIComponent(r)}`,o=i===0?s:`${e},${s}`;return o.length>Au?((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&b.warn(`Not adding key: ${t} with val: ${r} to baggage header due to exceeding baggage size limits.`),e):o},"")}function Uu(n){const e=Cn(),t={sid:Ne(),init:!0,timestamp:e,started:e,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>Bu(t)};return n&&ct(t,n),t}function ct(n,e={}){if(e.user&&(!n.ipAddress&&e.user.ip_address&&(n.ipAddress=e.user.ip_address),!n.did&&!e.did&&(n.did=e.user.id||e.user.email||e.user.username)),n.timestamp=e.timestamp||Cn(),e.ignoreDuration&&(n.ignoreDuration=e.ignoreDuration),e.sid&&(n.sid=e.sid.length===32?e.sid:Ne()),e.init!==void 0&&(n.init=e.init),!n.did&&e.did&&(n.did=`${e.did}`),typeof e.started=="number"&&(n.started=e.started),n.ignoreDuration)n.duration=void 0;else if(typeof e.duration=="number")n.duration=e.duration;else{const t=n.timestamp-n.started;n.duration=t>=0?t:0}e.release&&(n.release=e.release),e.environment&&(n.environment=e.environment),!n.ipAddress&&e.ipAddress&&(n.ipAddress=e.ipAddress),!n.userAgent&&e.userAgent&&(n.userAgent=e.userAgent),typeof e.errors=="number"&&(n.errors=e.errors),e.status&&(n.status=e.status)}function Pu(n,e){let t={};e?t={status:e}:n.status==="ok"&&(t={status:"exited"}),ct(n,t)}function Bu(n){return De({sid:`${n.sid}`,init:n.init,started:new Date(n.started*1e3).toISOString(),timestamp:new Date(n.timestamp*1e3).toISOString(),status:n.status,errors:n.errors,did:typeof n.did=="number"||typeof n.did=="string"?`${n.did}`:void 0,duration:n.duration,attrs:{release:n.release,environment:n.environment,ip_address:n.ipAddress,user_agent:n.userAgent}})}const Cu=100;class Ae{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={}}static clone(e){const t=new Ae;return e&&(t._breadcrumbs=[...e._breadcrumbs],t._tags={...e._tags},t._extra={...e._extra},t._contexts={...e._contexts},t._user=e._user,t._level=e._level,t._span=e._span,t._session=e._session,t._transactionName=e._transactionName,t._fingerprint=e._fingerprint,t._eventProcessors=[...e._eventProcessors],t._requestSession=e._requestSession,t._attachments=[...e._attachments]),t}addScopeListener(e){this._scopeListeners.push(e)}addEventProcessor(e){return this._eventProcessors.push(e),this}setUser(e){return this._user=e||{},this._session&&ct(this._session,{user:e}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(e){return this._requestSession=e,this}setTags(e){return this._tags={...this._tags,...e},this._notifyScopeListeners(),this}setTag(e,t){return this._tags={...this._tags,[e]:t},this._notifyScopeListeners(),this}setExtras(e){return this._extra={...this._extra,...e},this._notifyScopeListeners(),this}setExtra(e,t){return this._extra={...this._extra,[e]:t},this._notifyScopeListeners(),this}setFingerprint(e){return this._fingerprint=e,this._notifyScopeListeners(),this}setLevel(e){return this._level=e,this._notifyScopeListeners(),this}setTransactionName(e){return this._transactionName=e,this._notifyScopeListeners(),this}setContext(e,t){return t===null?delete this._contexts[e]:this._contexts={...this._contexts,[e]:t},this._notifyScopeListeners(),this}setSpan(e){return this._span=e,this._notifyScopeListeners(),this}getSpan(){return this._span}getTransaction(){const e=this.getSpan();return e&&e.transaction}setSession(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(e){if(!e)return this;if(typeof e=="function"){const t=e(this);return t instanceof Ae?t:this}return e instanceof Ae?(this._tags={...this._tags,...e._tags},this._extra={...this._extra,...e._extra},this._contexts={...this._contexts,...e._contexts},e._user&&Object.keys(e._user).length&&(this._user=e._user),e._level&&(this._level=e._level),e._fingerprint&&(this._fingerprint=e._fingerprint),e._requestSession&&(this._requestSession=e._requestSession)):at(e)&&(e=e,this._tags={...this._tags,...e.tags},this._extra={...this._extra,...e.extra},this._contexts={...this._contexts,...e.contexts},e.user&&(this._user=e.user),e.level&&(this._level=e.level),e.fingerprint&&(this._fingerprint=e.fingerprint),e.requestSession&&(this._requestSession=e.requestSession)),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this._attachments=[],this}addBreadcrumb(e,t){const r=typeof t=="number"?t:Cu;if(r<=0)return this;const i={timestamp:Bn(),...e};return this._breadcrumbs=[...this._breadcrumbs,i].slice(-r),this._notifyScopeListeners(),this}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(e){return this._attachments.push(e),this}getAttachments(){return this._attachments}clearAttachments(){return this._attachments=[],this}applyToEvent(e,t={}){if(this._extra&&Object.keys(this._extra).length&&(e.extra={...this._extra,...e.extra}),this._tags&&Object.keys(this._tags).length&&(e.tags={...this._tags,...e.tags}),this._user&&Object.keys(this._user).length&&(e.user={...this._user,...e.user}),this._contexts&&Object.keys(this._contexts).length&&(e.contexts={...this._contexts,...e.contexts}),this._level&&(e.level=this._level),this._transactionName&&(e.transaction=this._transactionName),this._span){e.contexts={trace:this._span.getTraceContext(),...e.contexts};const r=this._span.transaction&&this._span.transaction.name;r&&(e.tags={transaction:r,...e.tags})}return this._applyFingerprint(e),e.breadcrumbs=[...e.breadcrumbs||[],...this._breadcrumbs],e.breadcrumbs=e.breadcrumbs.length>0?e.breadcrumbs:void 0,e.sdkProcessingMetadata={...e.sdkProcessingMetadata,...this._sdkProcessingMetadata},this._notifyEventProcessors([...qs(),...this._eventProcessors],e,t)}setSDKProcessingMetadata(e){return this._sdkProcessingMetadata={...this._sdkProcessingMetadata,...e},this}_notifyEventProcessors(e,t,r,i=0){return new re((s,o)=>{const a=e[i];if(t===null||typeof a!="function")s(t);else{const c=a({...t},r);(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&a.id&&c===null&&b.log(`Event processor "${a.id}" dropped event`),Ar(c)?c.then(l=>this._notifyEventProcessors(e,l,r,i+1).then(s)).then(null,o):this._notifyEventProcessors(e,c,r,i+1).then(s).then(null,o)}})}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(e=>{e(this)}),this._notifyingListeners=!1)}_applyFingerprint(e){e.fingerprint=e.fingerprint?Gs(e.fingerprint):[],this._fingerprint&&(e.fingerprint=e.fingerprint.concat(this._fingerprint)),e.fingerprint&&!e.fingerprint.length&&delete e.fingerprint}}function qs(){return $r("globalEventProcessors",()=>[])}function Gn(n){qs().push(n)}const Cr=4,Lu=100;class Ht{__init(){this._stack=[{}]}constructor(e,t=new Ae,r=Cr){this._version=r,Ht.prototype.__init.call(this),this.getStackTop().scope=t,e&&this.bindClient(e)}isOlderThan(e){return this._version<e}bindClient(e){const t=this.getStackTop();t.client=e,e&&e.setupIntegrations&&e.setupIntegrations()}pushScope(){const e=Ae.clone(this.getScope());return this.getStack().push({client:this.getClient(),scope:e}),e}popScope(){return this.getStack().length<=1?!1:!!this.getStack().pop()}withScope(e){const t=this.pushScope();try{e(t)}finally{this.popScope()}}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getStack(){return this._stack}getStackTop(){return this._stack[this._stack.length-1]}captureException(e,t){const r=this._lastEventId=t&&t.event_id?t.event_id:Ne(),i=new Error("Sentry syntheticException");return this._withClient((s,o)=>{s.captureException(e,{originalException:e,syntheticException:i,...t,event_id:r},o)}),r}captureMessage(e,t,r){const i=this._lastEventId=r&&r.event_id?r.event_id:Ne(),s=new Error(e);return this._withClient((o,a)=>{o.captureMessage(e,t,{originalException:e,syntheticException:s,...r,event_id:i},a)}),i}captureEvent(e,t){const r=t&&t.event_id?t.event_id:Ne();return e.type!=="transaction"&&(this._lastEventId=r),this._withClient((i,s)=>{i.captureEvent(e,{...t,event_id:r},s)}),r}lastEventId(){return this._lastEventId}addBreadcrumb(e,t){const{scope:r,client:i}=this.getStackTop();if(!r||!i)return;const{beforeBreadcrumb:s=null,maxBreadcrumbs:o=Lu}=i.getOptions&&i.getOptions()||{};if(o<=0)return;const c={timestamp:Bn(),...e},l=s?js(()=>s(c,t)):c;l!==null&&r.addBreadcrumb(l,o)}setUser(e){const t=this.getScope();t&&t.setUser(e)}setTags(e){const t=this.getScope();t&&t.setTags(e)}setExtras(e){const t=this.getScope();t&&t.setExtras(e)}setTag(e,t){const r=this.getScope();r&&r.setTag(e,t)}setExtra(e,t){const r=this.getScope();r&&r.setExtra(e,t)}setContext(e,t){const r=this.getScope();r&&r.setContext(e,t)}configureScope(e){const{scope:t,client:r}=this.getStackTop();t&&r&&e(t)}run(e){const t=Bi(this);try{e(this)}finally{Bi(t)}}getIntegration(e){const t=this.getClient();if(!t)return null;try{return t.getIntegration(e)}catch{return(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&b.warn(`Cannot retrieve integration ${e.id} from the current Hub`),null}}startTransaction(e,t){return this._callExtensionMethod("startTransaction",e,t)}traceHeaders(){return this._callExtensionMethod("traceHeaders")}captureSession(e=!1){if(e)return this.endSession();this._sendSessionUpdate()}endSession(){const e=this.getStackTop(),t=e&&e.scope,r=t&&t.getSession();r&&Pu(r),this._sendSessionUpdate(),t&&t.setSession()}startSession(e){const{scope:t,client:r}=this.getStackTop(),{release:i,environment:s}=r&&r.getOptions()||{},{userAgent:o}=ue.navigator||{},a=Uu({release:i,environment:s,...t&&{user:t.getUser()},...o&&{userAgent:o},...e});if(t){const c=t.getSession&&t.getSession();c&&c.status==="ok"&&ct(c,{status:"exited"}),this.endSession(),t.setSession(a)}return a}shouldSendDefaultPii(){const e=this.getClient(),t=e&&e.getOptions();return Boolean(t&&t.sendDefaultPii)}_sendSessionUpdate(){const{scope:e,client:t}=this.getStackTop();if(!e)return;const r=e.getSession();r&&t&&t.captureSession&&t.captureSession(r)}_withClient(e){const{scope:t,client:r}=this.getStackTop();r&&e(r,t)}_callExtensionMethod(e,...t){const i=gt().__SENTRY__;if(i&&i.extensions&&typeof i.extensions[e]=="function")return i.extensions[e].apply(this,t);(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&b.warn(`Extension method ${e} couldn't be found, doing nothing.`)}}function gt(){return ue.__SENTRY__=ue.__SENTRY__||{extensions:{},hub:void 0},ue}function Bi(n){const e=gt(),t=xe(e);return Lr(e,n),t}function W(){const n=gt();return(!Js(n)||xe(n).isOlderThan(Cr))&&Lr(n,new Ht),Br()?Gu(n):xe(n)}function Gu(n){try{const e=gt().__SENTRY__,t=e&&e.extensions&&e.extensions.domain&&e.extensions.domain.active;if(!t)return xe(n);if(!Js(t)||xe(t).isOlderThan(Cr)){const r=xe(n).getStackTop();Lr(t,new Ht(r.client,Ae.clone(r.scope)))}return xe(t)}catch{return xe(n)}}function Js(n){return!!(n&&n.__SENTRY__&&n.__SENTRY__.hub)}function xe(n){return $r("hub",()=>new Ht,n)}function Lr(n,e){if(!n)return!1;const t=n.__SENTRY__=n.__SENTRY__||{};return t.hub=e,!0}function Mu(n,e){return W().captureException(n,{captureContext:e})}function Fu(n){W().withScope(n)}const Yu="7";function Hu(n){const e=n.protocol?`${n.protocol}:`:"",t=n.port?`:${n.port}`:"";return`${e}//${n.host}${t}${n.path?`/${n.path}`:""}/api/`}function zu(n){return`${Hu(n)}${n.projectId}/envelope/`}function qu(n,e){return Ml({sentry_key:n.publicKey,sentry_version:Yu,...e&&{sentry_client:`${e.name}/${e.version}`}})}function Ws(n,e={}){const t=typeof e=="string"?e:e.tunnel,r=typeof e=="string"||!e._metadata?void 0:e._metadata.sdk;return t||`${zu(n)}?${qu(n,r)}`}function Vs(n){if(!n||!n.sdk)return;const{name:e,version:t}=n.sdk;return{name:e,version:t}}function Ju(n,e){return e&&(n.sdk=n.sdk||{},n.sdk.name=n.sdk.name||e.name,n.sdk.version=n.sdk.version||e.version,n.sdk.integrations=[...n.sdk.integrations||[],...e.integrations||[]],n.sdk.packages=[...n.sdk.packages||[],...e.packages||[]]),n}function Wu(n,e,t,r){const i=Vs(t),s={sent_at:new Date().toISOString(),...i&&{sdk:i},...!!r&&{dsn:jr(e)}},o="aggregates"in n?[{type:"sessions"},n]:[{type:"session"},n];return Ln(s,[o])}function Vu(n,e,t,r){const i=Vs(t),s=n.type||"event";Ju(n,t&&t.sdk);const o=Ku(n,i,r,e);return delete n.sdkProcessingMetadata,Ln(o,[[{type:s},n]])}function Ku(n,e,t,r){const i=n.sdkProcessingMetadata&&n.sdkProcessingMetadata.dynamicSamplingContext;return{event_id:n.event_id,sent_at:new Date().toISOString(),...e&&{sdk:e},...!!t&&{dsn:jr(r)},...n.type==="transaction"&&i&&{trace:De({...i})}}}const Ci=[];function Xu(n){const e={};return n.forEach(t=>{const{name:r}=t,i=e[r];i&&!i.isDefaultInstance&&t.isDefaultInstance||(e[r]=t)}),Object.values(e)}function Qu(n){const e=n.defaultIntegrations||[],t=n.integrations;e.forEach(o=>{o.isDefaultInstance=!0});let r;Array.isArray(t)?r=[...e,...t]:typeof t=="function"?r=Gs(t(e)):r=e;const i=Xu(r),s=i.findIndex(o=>o.name==="Debug");if(s!==-1){const[o]=i.splice(s,1);i.push(o)}return i}function Zu(n){const e={};return n.forEach(t=>{e[t.name]=t,Ci.indexOf(t.name)===-1&&(t.setupOnce(Gn,W),Ci.push(t.name),(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&b.log(`Integration installed: ${t.name}`))}),e}const Li="Not capturing exception because it's already been captured.";class Xe{__init(){this._integrations={}}__init2(){this._integrationsInitialized=!1}__init3(){this._numProcessing=0}__init4(){this._outcomes={}}constructor(e){if(Xe.prototype.__init.call(this),Xe.prototype.__init2.call(this),Xe.prototype.__init3.call(this),Xe.prototype.__init4.call(this),this._options=e,e.dsn){this._dsn=Ll(e.dsn);const t=Ws(this._dsn,e);this._transport=e.transport({recordDroppedEvent:this.recordDroppedEvent.bind(this),...e.transportOptions,url:t})}else(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&b.warn("No DSN provided, client will not do anything.")}captureException(e,t,r){if(Ai(e)){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&b.log(Li);return}let i=t&&t.event_id;return this._process(this.eventFromException(e,t).then(s=>this._captureEvent(s,t,r)).then(s=>{i=s})),i}captureMessage(e,t,r,i){let s=r&&r.event_id;const o=Ds(e)?this.eventFromMessage(String(e),t,r):this.eventFromException(e,r);return this._process(o.then(a=>this._captureEvent(a,r,i)).then(a=>{s=a})),s}captureEvent(e,t,r){if(t&&t.originalException&&Ai(t.originalException)){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&b.log(Li);return}let i=t&&t.event_id;return this._process(this._captureEvent(e,t,r).then(s=>{i=s})),i}captureSession(e){if(!this._isEnabled()){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&b.warn("SDK not enabled, will not capture session.");return}typeof e.release!="string"?(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&b.warn("Discarded session because of missing or non-string release"):(this.sendSession(e),ct(e,{init:!1}))}getDsn(){return this._dsn}getOptions(){return this._options}getTransport(){return this._transport}flush(e){const t=this._transport;return t?this._isClientDoneProcessing(e).then(r=>t.flush(e).then(i=>r&&i)):qe(!0)}close(e){return this.flush(e).then(t=>(this.getOptions().enabled=!1,t))}setupIntegrations(){this._isEnabled()&&!this._integrationsInitialized&&(this._integrations=Zu(this._options.integrations),this._integrationsInitialized=!0)}getIntegrationById(e){return this._integrations[e]}getIntegration(e){try{return this._integrations[e.id]||null}catch{return(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&b.warn(`Cannot retrieve integration ${e.id} from the current Client`),null}}sendEvent(e,t={}){if(this._dsn){let r=Vu(e,this._dsn,this._options._metadata,this._options.tunnel);for(const i of t.attachments||[])r=Eu(r,Tu(i,this._options.transportOptions&&this._options.transportOptions.textEncoder));this._sendEnvelope(r)}}sendSession(e){if(this._dsn){const t=Wu(e,this._dsn,this._options._metadata,this._options.tunnel);this._sendEnvelope(t)}}recordDroppedEvent(e,t){if(this._options.sendClientReports){const r=`${e}:${t}`;(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&b.log(`Adding outcome: "${r}"`),this._outcomes[r]=this._outcomes[r]+1||1}}_updateSessionFromEvent(e,t){let r=!1,i=!1;const s=t.exception&&t.exception.values;if(s){i=!0;for(const c of s){const l=c.mechanism;if(l&&l.handled===!1){r=!0;break}}}const o=e.status==="ok";(o&&e.errors===0||o&&r)&&(ct(e,{...r&&{status:"crashed"},errors:e.errors||Number(i||r)}),this.captureSession(e))}_isClientDoneProcessing(e){return new re(t=>{let r=0;const i=1,s=setInterval(()=>{this._numProcessing==0?(clearInterval(s),t(!0)):(r+=i,e&&r>=e&&(clearInterval(s),t(!1)))},i)})}_isEnabled(){return this.getOptions().enabled!==!1&&this._dsn!==void 0}_prepareEvent(e,t,r){const{normalizeDepth:i=3,normalizeMaxBreadth:s=1e3}=this.getOptions(),o={...e,event_id:e.event_id||t.event_id||Ne(),timestamp:e.timestamp||Bn()};this._applyClientOptions(o),this._applyIntegrationsMetadata(o);let a=r;t.captureContext&&(a=Ae.clone(a).update(t.captureContext));let c=qe(o);if(a){const l=[...t.attachments||[],...a.getAttachments()];l.length&&(t.attachments=l),c=a.applyToEvent(o,t)}return c.then(l=>typeof i=="number"&&i>0?this._normalizeEvent(l,i,s):l)}_normalizeEvent(e,t,r){if(!e)return null;const i={...e,...e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map(s=>({...s,...s.data&&{data:ke(s.data,t,r)}}))},...e.user&&{user:ke(e.user,t,r)},...e.contexts&&{contexts:ke(e.contexts,t,r)},...e.extra&&{extra:ke(e.extra,t,r)}};return e.contexts&&e.contexts.trace&&i.contexts&&(i.contexts.trace=e.contexts.trace,e.contexts.trace.data&&(i.contexts.trace.data=ke(e.contexts.trace.data,t,r))),e.spans&&(i.spans=e.spans.map(s=>(s.data&&(s.data=ke(s.data,t,r)),s))),i}_applyClientOptions(e){const t=this.getOptions(),{environment:r,release:i,dist:s,maxValueLength:o=250}=t;"environment"in e||(e.environment="environment"in t?r:"production"),e.release===void 0&&i!==void 0&&(e.release=i),e.dist===void 0&&s!==void 0&&(e.dist=s),e.message&&(e.message=kt(e.message,o));const a=e.exception&&e.exception.values&&e.exception.values[0];a&&a.value&&(a.value=kt(a.value,o));const c=e.request;c&&c.url&&(c.url=kt(c.url,o))}_applyIntegrationsMetadata(e){const t=Object.keys(this._integrations);t.length>0&&(e.sdk=e.sdk||{},e.sdk.integrations=[...e.sdk.integrations||[],...t])}_captureEvent(e,t={},r){return this._processEvent(e,t,r).then(i=>i.event_id,i=>{if(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__){const s=i;s.logLevel==="log"?b.log(s.message):b.warn(s)}})}_processEvent(e,t,r){const{beforeSend:i,sampleRate:s}=this.getOptions();if(!this._isEnabled())return wn(new te("SDK not enabled, will not capture event.","log"));const o=e.type==="transaction";return!o&&typeof s=="number"&&Math.random()>s?(this.recordDroppedEvent("sample_rate","error"),wn(new te(`Discarding event because it's not included in the random sample (sampling rate = ${s})`,"log"))):this._prepareEvent(e,t,r).then(a=>{if(a===null)throw this.recordDroppedEvent("event_processor",e.type||"error"),new te("An event processor returned null, will not send event.","log");if(t.data&&t.data.__sentry__===!0||o||!i)return a;const l=i(a,t);return ed(l)}).then(a=>{if(a===null)throw this.recordDroppedEvent("before_send",e.type||"error"),new te("`beforeSend` returned `null`, will not send event.","log");const c=r&&r.getSession();!o&&c&&this._updateSessionFromEvent(c,a);const l=a.transaction_info;if(o&&l&&a.transaction!==e.transaction){const u="custom";a.transaction_info={...l,source:u,changes:[...l.changes,{source:u,timestamp:a.timestamp,propagations:l.propagations}]}}return this.sendEvent(a,t),a}).then(null,a=>{throw a instanceof te?a:(this.captureException(a,{data:{__sentry__:!0},originalException:a}),new te(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.
Reason: ${a}`))})}_process(e){this._numProcessing+=1,e.then(t=>(this._numProcessing-=1,t),t=>(this._numProcessing-=1,t))}_sendEnvelope(e){this._transport&&this._dsn?this._transport.send(e).then(null,t=>{(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&b.error("Error while sending event:",t)}):(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&b.error("Transport disabled")}_clearOutcomes(){const e=this._outcomes;return this._outcomes={},Object.keys(e).map(t=>{const[r,i]=t.split(":");return{reason:r,category:i,quantity:e[t]}})}}function ed(n){const e="`beforeSend` method has to return `null` or a valid event.";if(Ar(n))return n.then(t=>{if(!(at(t)||t===null))throw new te(e);return t},t=>{throw new te(`beforeSend rejected with ${t}`)});if(!(at(n)||n===null))throw new te(e);return n}function td(n,e){e.debug===!0&&(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__?b.enable():console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle."));const t=W(),r=t.getScope();r&&r.update(e.initialScope);const i=new n(e);t.bindClient(i)}const nd=30;function Ks(n,e,t=pu(n.bufferSize||nd)){let r={};const i=o=>t.drain(o);function s(o){const a=[];if(ji(o,(d,f)=>{const _=Ui(f);Iu(r,_)?n.recordDroppedEvent("ratelimit_backoff",_):a.push(d)}),a.length===0)return qe();const c=Ln(o[0],a),l=d=>{ji(c,(f,_)=>{n.recordDroppedEvent(d,Ui(_))})},u=()=>e({body:Ys(c,n.textEncoder)}).then(d=>{d.statusCode!==void 0&&(d.statusCode<200||d.statusCode>=300)&&(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&b.warn(`Sentry responded with status code ${d.statusCode} to sent event.`),r=Du(r,d)},d=>{(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&b.error("Failed while sending event:",d),l("network_error")});return t.add(u).then(d=>d,d=>{if(d instanceof te)return(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&b.error("Skipped sending event because buffer is full."),l("queue_overflow"),qe();throw d})}return{send:s,flush:i}}const Tn="7.17.4";let Gi;class Pt{constructor(){Pt.prototype.__init.call(this)}static __initStatic(){this.id="FunctionToString"}__init(){this.name=Pt.id}setupOnce(){Gi=Function.prototype.toString,Function.prototype.toString=function(...e){const t=Pr(this)||this;return Gi.apply(t,e)}}}Pt.__initStatic();const rd=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/];class et{static __initStatic(){this.id="InboundFilters"}__init(){this.name=et.id}constructor(e={}){this._options=e,et.prototype.__init.call(this)}setupOnce(e,t){const r=i=>{const s=t();if(s){const o=s.getIntegration(et);if(o){const a=s.getClient(),c=a?a.getOptions():{},l=id(o._options,c);return sd(i,l)?null:i}}return i};r.id=this.name,e(r)}}et.__initStatic();function id(n={},e={}){return{allowUrls:[...n.allowUrls||[],...e.allowUrls||[]],denyUrls:[...n.denyUrls||[],...e.denyUrls||[]],ignoreErrors:[...n.ignoreErrors||[],...e.ignoreErrors||[],...rd],ignoreInternal:n.ignoreInternal!==void 0?n.ignoreInternal:!0}}function sd(n,e){return e.ignoreInternal&&ud(n)?((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&b.warn(`Event dropped due to being internal Sentry Error.
Event: ${He(n)}`),!0):od(n,e.ignoreErrors)?((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&b.warn(`Event dropped due to being matched by \`ignoreErrors\` option.
Event: ${He(n)}`),!0):ad(n,e.denyUrls)?((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&b.warn(`Event dropped due to being matched by \`denyUrls\` option.
Event: ${He(n)}.
Url: ${Sn(n)}`),!0):cd(n,e.allowUrls)?!1:((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&b.warn(`Event dropped due to not being matched by \`allowUrls\` option.
Event: ${He(n)}.
Url: ${Sn(n)}`),!0)}function od(n,e){return!e||!e.length?!1:ld(n).some(t=>e.some(r=>Pn(t,r)))}function ad(n,e){if(!e||!e.length)return!1;const t=Sn(n);return t?e.some(r=>Pn(t,r)):!1}function cd(n,e){if(!e||!e.length)return!0;const t=Sn(n);return t?e.some(r=>Pn(t,r)):!0}function ld(n){if(n.message)return[n.message];if(n.exception)try{const{type:e="",value:t=""}=n.exception.values&&n.exception.values[0]||{};return[`${t}`,`${e}: ${t}`]}catch{return(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&b.error(`Cannot extract message for event ${He(n)}`),[]}return[]}function ud(n){try{return n.exception.values[0].type==="SentryError"}catch{}return!1}function dd(n=[]){for(let e=n.length-1;e>=0;e--){const t=n[e];if(t&&t.filename!=="<anonymous>"&&t.filename!=="[native code]")return t.filename||null}return null}function Sn(n){try{let e;try{e=n.exception.values[0].stacktrace.frames}catch{}return e?dd(e):null}catch{return(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&b.error(`Cannot extract url for event ${He(n)}`),null}}const j=ue;let gr=0;function Xs(){return gr>0}function fd(){gr+=1,setTimeout(()=>{gr-=1})}function lt(n,e={},t){if(typeof n!="function")return n;try{const i=n.__sentry_wrapped__;if(i)return i;if(Pr(n))return n}catch{return n}const r=function(){const i=Array.prototype.slice.call(arguments);try{t&&typeof t=="function"&&t.apply(this,arguments);const s=i.map(o=>lt(o,e));return n.apply(this,s)}catch(s){throw fd(),Fu(o=>{o.addEventProcessor(a=>(e.mechanism&&(fr(a,void 0,void 0),$t(a,e.mechanism)),a.extra={...a.extra,arguments:i},a)),Mu(s)}),s}};try{for(const i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])}catch{}Us(r,n),Ur(n,"__sentry_wrapped__",r);try{Object.getOwnPropertyDescriptor(r,"name").configurable&&Object.defineProperty(r,"name",{get(){return n.name}})}catch{}return r}function Qs(n,e){const t=Gr(n,e),r={type:e&&e.name,value:md(e)};return t.length&&(r.stacktrace={frames:t}),r.type===void 0&&r.value===""&&(r.value="Unrecoverable error caught"),r}function hd(n,e,t,r){const s=W().getClient(),o=s&&s.getOptions().normalizeDepth,a={exception:{values:[{type:Nr(e)?e.constructor.name:r?"UnhandledRejection":"Error",value:`Non-Error ${r?"promise rejection":"exception"} captured with keys: ${Fl(e)}`}]},extra:{__serialized__:Ms(e,o)}};if(t){const c=Gr(n,t);c.length&&(a.exception.values[0].stacktrace={frames:c})}return a}function nr(n,e){return{exception:{values:[Qs(n,e)]}}}function Gr(n,e){const t=e.stacktrace||e.stack||"",r=_d(e);try{return n(t,r)}catch{}return[]}const pd=/Minified React error #\d+;/i;function _d(n){if(n){if(typeof n.framesToPop=="number")return n.framesToPop;if(pd.test(n.message))return 1}return 0}function md(n){const e=n&&n.message;return e?e.error&&typeof e.error.message=="string"?e.error.message:e:"No error message"}function gd(n,e,t,r){const i=t&&t.syntheticException||void 0,s=Mr(n,e,i,r);return $t(s),s.level="error",t&&t.event_id&&(s.event_id=t.event_id),qe(s)}function yd(n,e,t="info",r,i){const s=r&&r.syntheticException||void 0,o=yr(n,e,s,i);return o.level=t,r&&r.event_id&&(o.event_id=r.event_id),qe(o)}function Mr(n,e,t,r,i){let s;if(Is(e)&&e.error)return nr(n,e.error);if(ki(e)||Il(e)){const o=e;if("stack"in e)s=nr(n,e);else{const a=o.name||(ki(o)?"DOMError":"DOMException"),c=o.message?`${a}: ${o.message}`:a;s=yr(n,c,t,r),fr(s,c)}return"code"in o&&(s.tags={...s.tags,"DOMException.code":`${o.code}`}),s}return Os(e)?nr(n,e):at(e)||Nr(e)?(s=hd(n,e,t,i),$t(s,{synthetic:!0}),s):(s=yr(n,e,t,r),fr(s,`${e}`,void 0),$t(s,{synthetic:!0}),s)}function yr(n,e,t,r){const i={message:e};if(r&&t){const s=Gr(n,t);s.length&&(i.exception={values:[{value:e,stacktrace:{frames:s}}]})}return i}const Zs="Breadcrumbs";class Bt{static __initStatic(){this.id=Zs}__init(){this.name=Bt.id}constructor(e){Bt.prototype.__init.call(this),this.options={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...e}}setupOnce(){this.options.console&&ce("console",vd),this.options.dom&&ce("dom",bd(this.options.dom)),this.options.xhr&&ce("xhr",Ed),this.options.fetch&&ce("fetch",wd),this.options.history&&ce("history",Td)}}Bt.__initStatic();function bd(n){function e(t){let r,i=typeof n=="object"?n.serializeAttribute:void 0;typeof i=="string"&&(i=[i]);try{r=t.event.target?At(t.event.target,i):At(t.event,i)}catch{r="<unknown>"}r.length!==0&&W().addBreadcrumb({category:`ui.${t.name}`,message:r},{event:t.event,name:t.name,global:t.global})}return e}function vd(n){for(let t=0;t<n.args.length;t++)if(n.args[t]==="ref=Ref<"){n.args[t+1]="viewRef";break}const e={category:"console",data:{arguments:n.args,logger:"console"},level:mu(n.level),message:xi(n.args," ")};if(n.level==="assert")if(n.args[0]===!1)e.message=`Assertion failed: ${xi(n.args.slice(1)," ")||"console.assert"}`,e.data.arguments=n.args.slice(1);else return;W().addBreadcrumb(e,{input:n.args,level:n.level})}function Ed(n){if(n.endTimestamp){if(n.xhr.__sentry_own_request__)return;const{method:e,url:t,status_code:r,body:i}=n.xhr.__sentry_xhr__||{};W().addBreadcrumb({category:"xhr",data:{method:e,url:t,status_code:r},type:"http"},{xhr:n.xhr,input:i});return}}function wd(n){!n.endTimestamp||n.fetchData.url.match(/sentry_key/)&&n.fetchData.method==="POST"||(n.error?W().addBreadcrumb({category:"fetch",data:n.fetchData,level:"error",type:"http"},{data:n.error,input:n.args}):W().addBreadcrumb({category:"fetch",data:{...n.fetchData,status_code:n.response.status},type:"http"},{input:n.args,response:n.response}))}function Td(n){let e=n.from,t=n.to;const r=er(j.location.href);let i=er(e);const s=er(t);i.path||(i=r),r.protocol===s.protocol&&r.host===s.host&&(t=s.relative),r.protocol===i.protocol&&r.host===i.host&&(e=i.relative),W().addBreadcrumb({category:"navigation",data:{from:e,to:t}})}class Sd extends Xe{constructor(e){e._metadata=e._metadata||{},e._metadata.sdk=e._metadata.sdk||{name:"sentry.javascript.browser",packages:[{name:"npm:@sentry/browser",version:Tn}],version:Tn},super(e),e.sendClientReports&&j.document&&j.document.addEventListener("visibilitychange",()=>{j.document.visibilityState==="hidden"&&this._flushOutcomes()})}eventFromException(e,t){return gd(this._options.stackParser,e,t,this._options.attachStacktrace)}eventFromMessage(e,t="info",r){return yd(this._options.stackParser,e,t,r,this._options.attachStacktrace)}sendEvent(e,t){const r=this.getIntegrationById(Zs);r&&r.options&&r.options.sentry&&W().addBreadcrumb({category:`sentry.${e.type==="transaction"?"transaction":"event"}`,event_id:e.event_id,level:e.level,message:He(e)},{event:e}),super.sendEvent(e,t)}_prepareEvent(e,t,r){return e.platform=e.platform||"javascript",super._prepareEvent(e,t,r)}_flushOutcomes(){const e=this._clearOutcomes();if(e.length===0){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&b.log("No outcomes to send");return}if(!this._dsn){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&b.log("No dsn provided, will not send outcomes");return}(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&b.log("Sending outcomes:",e);const t=Ws(this._dsn,this._options),r=ku(e,this._options.tunnel&&jr(this._dsn));try{Object.prototype.toString.call(j&&j.navigator)==="[object Navigator]"&&typeof j.navigator.sendBeacon=="function"&&!this._options.transportOptions?j.navigator.sendBeacon.bind(j.navigator)(t,Ys(r)):this._sendEnvelope(r)}catch(i){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&b.error(i)}}}let wt;function kd(){if(wt)return wt;if(dr(j.fetch))return wt=j.fetch.bind(j);const n=j.document;let e=j.fetch;if(n&&typeof n.createElement=="function")try{const t=n.createElement("iframe");t.hidden=!0,n.head.appendChild(t);const r=t.contentWindow;r&&r.fetch&&(e=r.fetch),n.head.removeChild(t)}catch(t){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&b.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",t)}return wt=e.bind(j)}function Rd(){wt=void 0}function xd(n,e=kd()){function t(r){const i={body:r.body,method:"POST",referrerPolicy:"origin",headers:n.headers,keepalive:r.body.length<=65536,...n.fetchOptions};try{return e(n.url,i).then(s=>({statusCode:s.status,headers:{"x-sentry-rate-limits":s.headers.get("X-Sentry-Rate-Limits"),"retry-after":s.headers.get("Retry-After")}}))}catch(s){return Rd(),wn(s)}}return Ks(n,t)}const Od=4;function Id(n){function e(t){return new re((r,i)=>{const s=new XMLHttpRequest;s.onerror=i,s.onreadystatechange=()=>{s.readyState===Od&&r({statusCode:s.status,headers:{"x-sentry-rate-limits":s.getResponseHeader("X-Sentry-Rate-Limits"),"retry-after":s.getResponseHeader("Retry-After")}})},s.open("POST",n.url);for(const o in n.headers)Object.prototype.hasOwnProperty.call(n.headers,o)&&s.setRequestHeader(o,n.headers[o]);s.send(t.body)})}return Ks(n,e)}const Mn="?",Dd=30,Nd=40,Ad=50;function Fr(n,e,t,r){const i={filename:n,function:e,in_app:!0};return t!==void 0&&(i.lineno=t),r!==void 0&&(i.colno=r),i}const $d=/^\s*at (?:(.*\).*?|.*?) ?\((?:address at )?)?((?:file|https?|blob|chrome-extension|address|native|eval|webpack|<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,jd=/\((\S*)(?::(\d+))(?::(\d+))\)/,Ud=n=>{const e=$d.exec(n);if(e){if(e[2]&&e[2].indexOf("eval")===0){const s=jd.exec(e[2]);s&&(e[2]=s[1],e[3]=s[2],e[4]=s[3])}const[r,i]=eo(e[1]||Mn,e[2]);return Fr(i,r,e[3]?+e[3]:void 0,e[4]?+e[4]:void 0)}},Pd=[Dd,Ud],Bd=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:file|https?|blob|chrome|webpack|resource|moz-extension|safari-extension|safari-web-extension|capacitor)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,Cd=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,Ld=n=>{const e=Bd.exec(n);if(e){if(e[3]&&e[3].indexOf(" > eval")>-1){const s=Cd.exec(e[3]);s&&(e[1]=e[1]||"eval",e[3]=s[1],e[4]=s[2],e[5]="")}let r=e[3],i=e[1]||Mn;return[i,r]=eo(i,r),Fr(r,i,e[4]?+e[4]:void 0,e[5]?+e[5]:void 0)}},Gd=[Ad,Ld],Md=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,Fd=n=>{const e=Md.exec(n);return e?Fr(e[2],e[1]||Mn,+e[3],e[4]?+e[4]:void 0):void 0},Yd=[Nd,Fd],Hd=[Pd,Gd,Yd],zd=Bs(...Hd),eo=(n,e)=>{const t=n.indexOf("safari-extension")!==-1,r=n.indexOf("safari-web-extension")!==-1;return t||r?[n.indexOf("@")!==-1?n.split("@")[0]:Mn,t?`safari-extension:${e}`:`safari-web-extension:${e}`]:[n,e]};class $e{static __initStatic(){this.id="GlobalHandlers"}__init(){this.name=$e.id}__init2(){this._installFunc={onerror:qd,onunhandledrejection:Jd}}constructor(e){$e.prototype.__init.call(this),$e.prototype.__init2.call(this),this._options={onerror:!0,onunhandledrejection:!0,...e}}setupOnce(){Error.stackTraceLimit=50;const e=this._options;for(const t in e){const r=this._installFunc[t];r&&e[t]&&(Kd(t),r(),this._installFunc[t]=void 0)}}}$e.__initStatic();function qd(){ce("error",n=>{const[e,t,r]=ro();if(!e.getIntegration($e))return;const{msg:i,url:s,line:o,column:a,error:c}=n;if(Xs()||c&&c.__sentry_own_request__)return;const l=c===void 0&&ze(i)?Vd(i,s,o,a):to(Mr(t,c||i,void 0,r,!1),s,o,a);l.level="error",no(e,c,l,"onerror")})}function Jd(){ce("unhandledrejection",n=>{const[e,t,r]=ro();if(!e.getIntegration($e))return;let i=n;try{"reason"in n?i=n.reason:"detail"in n&&"reason"in n.detail&&(i=n.detail.reason)}catch{}if(Xs()||i&&i.__sentry_own_request__)return!0;const s=Ds(i)?Wd(i):Mr(t,i,void 0,r,!0);s.level="error",no(e,i,s,"onunhandledrejection")})}function Wd(n){return{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(n)}`}]}}}function Vd(n,e,t,r){const i=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i;let s=Is(n)?n.message:n,o="Error";const a=s.match(i);return a&&(o=a[1],s=a[2]),to({exception:{values:[{type:o,value:s}]}},e,t,r)}function to(n,e,t,r){const i=n.exception=n.exception||{},s=i.values=i.values||[],o=s[0]=s[0]||{},a=o.stacktrace=o.stacktrace||{},c=a.frames=a.frames||[],l=isNaN(parseInt(r,10))?void 0:r,u=isNaN(parseInt(t,10))?void 0:t,d=ze(e)&&e.length>0?e:jl();return c.length===0&&c.push({colno:l,filename:d,function:"?",in_app:!0,lineno:u}),n}function Kd(n){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&b.log(`Global Handler attached: ${n}`)}function no(n,e,t,r){$t(t,{handled:!1,type:r}),n.captureEvent(t,{originalException:e})}function ro(){const n=W(),e=n.getClient(),t=e&&e.getOptions()||{stackParser:()=>[],attachStacktrace:!1};return[n,t.stackParser,t.attachStacktrace]}const Xd=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"];class Ct{static __initStatic(){this.id="TryCatch"}__init(){this.name=Ct.id}constructor(e){Ct.prototype.__init.call(this),this._options={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,...e}}setupOnce(){this._options.setTimeout&&ne(j,"setTimeout",Mi),this._options.setInterval&&ne(j,"setInterval",Mi),this._options.requestAnimationFrame&&ne(j,"requestAnimationFrame",Qd),this._options.XMLHttpRequest&&"XMLHttpRequest"in j&&ne(XMLHttpRequest.prototype,"send",Zd);const e=this._options.eventTarget;e&&(Array.isArray(e)?e:Xd).forEach(ef)}}Ct.__initStatic();function Mi(n){return function(...e){const t=e[0];return e[0]=lt(t,{mechanism:{data:{function:je(n)},handled:!0,type:"instrument"}}),n.apply(this,e)}}function Qd(n){return function(e){return n.apply(this,[lt(e,{mechanism:{data:{function:"requestAnimationFrame",handler:je(n)},handled:!0,type:"instrument"}})])}}function Zd(n){return function(...e){const t=this;return["onload","onerror","onprogress","onreadystatechange"].forEach(i=>{i in t&&typeof t[i]=="function"&&ne(t,i,function(s){const o={mechanism:{data:{function:i,handler:je(s)},handled:!0,type:"instrument"}},a=Pr(s);return a&&(o.mechanism.data.handler=je(a)),lt(s,o)})}),n.apply(this,e)}}function ef(n){const e=j,t=e[n]&&e[n].prototype;!t||!t.hasOwnProperty||!t.hasOwnProperty("addEventListener")||(ne(t,"addEventListener",function(r){return function(i,s,o){try{typeof s.handleEvent=="function"&&(s.handleEvent=lt(s.handleEvent,{mechanism:{data:{function:"handleEvent",handler:je(s),target:n},handled:!0,type:"instrument"}}))}catch{}return r.apply(this,[i,lt(s,{mechanism:{data:{function:"addEventListener",handler:je(s),target:n},handled:!0,type:"instrument"}}),o])}}),ne(t,"removeEventListener",function(r){return function(i,s,o){const a=s;try{const c=a&&a.__sentry_wrapped__;c&&r.call(this,i,c,o)}catch{}return r.call(this,i,a,o)}}))}const tf="cause",nf=5;class tt{static __initStatic(){this.id="LinkedErrors"}__init(){this.name=tt.id}constructor(e={}){tt.prototype.__init.call(this),this._key=e.key||tf,this._limit=e.limit||nf}setupOnce(){const e=W().getClient();!e||Gn((t,r)=>{const i=W().getIntegration(tt);return i?rf(e.getOptions().stackParser,i._key,i._limit,t,r):t})}}tt.__initStatic();function rf(n,e,t,r,i){if(!r.exception||!r.exception.values||!i||!ve(i.originalException,Error))return r;const s=io(n,t,i.originalException,e);return r.exception.values=[...s,...r.exception.values],r}function io(n,e,t,r,i=[]){if(!ve(t[r],Error)||i.length+1>=e)return i;const s=Qs(n,t[r]);return io(n,e,t[r],r,[s,...i])}class nt{constructor(){nt.prototype.__init.call(this)}static __initStatic(){this.id="HttpContext"}__init(){this.name=nt.id}setupOnce(){Gn(e=>{if(W().getIntegration(nt)){if(!j.navigator&&!j.location&&!j.document)return e;const t=e.request&&e.request.url||j.location&&j.location.href,{referrer:r}=j.document||{},{userAgent:i}=j.navigator||{},s={...e.request&&e.request.headers,...r&&{Referer:r},...i&&{"User-Agent":i}},o={...t&&{url:t},headers:s};return{...e,request:o}}return e})}}nt.__initStatic();class rt{constructor(){rt.prototype.__init.call(this)}static __initStatic(){this.id="Dedupe"}__init(){this.name=rt.id}setupOnce(e,t){const r=i=>{const s=t().getIntegration(rt);if(s){try{if(sf(i,s._previousEvent))return(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&b.warn("Event dropped due to being a duplicate of previously captured event."),null}catch{return s._previousEvent=i}return s._previousEvent=i}return i};r.id=this.name,e(r)}}rt.__initStatic();function sf(n,e){return e?!!(of(n,e)||af(n,e)):!1}function of(n,e){const t=n.message,r=e.message;return!(!t&&!r||t&&!r||!t&&r||t!==r||!oo(n,e)||!so(n,e))}function af(n,e){const t=Fi(e),r=Fi(n);return!(!t||!r||t.type!==r.type||t.value!==r.value||!oo(n,e)||!so(n,e))}function so(n,e){let t=Yi(n),r=Yi(e);if(!t&&!r)return!0;if(t&&!r||!t&&r||(t=t,r=r,r.length!==t.length))return!1;for(let i=0;i<r.length;i++){const s=r[i],o=t[i];if(s.filename!==o.filename||s.lineno!==o.lineno||s.colno!==o.colno||s.function!==o.function)return!1}return!0}function oo(n,e){let t=n.fingerprint,r=e.fingerprint;if(!t&&!r)return!0;if(t&&!r||!t&&r)return!1;t=t,r=r;try{return t.join("")===r.join("")}catch{return!1}}function Fi(n){return n.exception&&n.exception.values&&n.exception.values[0]}function Yi(n){const e=n.exception;if(e)try{return e.values[0].stacktrace.frames}catch{return}}const cf=[new et,new Pt,new Ct,new Bt,new $e,new tt,new rt,new nt];function lf(n={}){n.defaultIntegrations===void 0&&(n.defaultIntegrations=cf),n.release===void 0&&j.SENTRY_RELEASE&&j.SENTRY_RELEASE.id&&(n.release=j.SENTRY_RELEASE.id),n.autoSessionTracking===void 0&&(n.autoSessionTracking=!0),n.sendClientReports===void 0&&(n.sendClientReports=!0);const e={...n,stackParser:zl(n.stackParser||zd),integrations:Qu(n),transport:n.transport||(Cs()?xd:Id)};td(Sd,e),n.autoSessionTracking&&uf()}function Hi(n){n.startSession({ignoreDuration:!0}),n.captureSession()}function uf(){if(typeof j.document>"u"){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&b.warn("Session tracking in non-browser environment with @sentry/browser is not supported.");return}const n=W();!n.captureSession||(Hi(n),ce("history",({from:e,to:t})=>{e===void 0||e===t||Hi(W())}))}function df(n){n._metadata=n._metadata||{},n._metadata.sdk={name:"sentry.javascript.svelte",packages:[{name:"npm:@sentry/svelte",version:Tn}],version:Tn},lf(n),ff()}function ff(){let n;const e=t=>(n===void 0&&(n=hf()),n&&(t.modules={svelteKit:"latest",...t.modules}),t);e.id="svelteKitProcessor",Gn(e)}function hf(){return As("div#svelte-announcer")!==null}function Yr(n){const e=W().getClient(),t=n||e&&e.getOptions();return!!t&&("tracesSampleRate"in t||"tracesSampler"in t)}function zt(n){const t=(n||W()).getScope();return t&&t.getTransaction()}function K(n){return n/1e3}function pf(){ce("error",zi),ce("unhandledrejection",zi)}function zi(){const n=zt();if(n){const e="internal_error";(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&b.log(`[Tracing] Transaction: ${e} -> Global error occured`),n.setStatus(e)}}class Fn{__init(){this.spans=[]}constructor(e=1e3){Fn.prototype.__init.call(this),this._maxlen=e}add(e){this.spans.length>this._maxlen?e.spanRecorder=void 0:this.spans.push(e)}}class Re{__init2(){this.traceId=Ne()}__init3(){this.spanId=Ne().substring(16)}__init4(){this.startTimestamp=jt()}__init5(){this.tags={}}__init6(){this.data={}}constructor(e){if(Re.prototype.__init2.call(this),Re.prototype.__init3.call(this),Re.prototype.__init4.call(this),Re.prototype.__init5.call(this),Re.prototype.__init6.call(this),!e)return this;e.traceId&&(this.traceId=e.traceId),e.spanId&&(this.spanId=e.spanId),e.parentSpanId&&(this.parentSpanId=e.parentSpanId),"sampled"in e&&(this.sampled=e.sampled),e.op&&(this.op=e.op),e.description&&(this.description=e.description),e.data&&(this.data=e.data),e.tags&&(this.tags=e.tags),e.status&&(this.status=e.status),e.startTimestamp&&(this.startTimestamp=e.startTimestamp),e.endTimestamp&&(this.endTimestamp=e.endTimestamp)}startChild(e){const t=new Re({...e,parentSpanId:this.spanId,sampled:this.sampled,traceId:this.traceId});if(t.spanRecorder=this.spanRecorder,t.spanRecorder&&t.spanRecorder.add(t),t.transaction=this.transaction,(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&t.transaction){const r=e&&e.op||"< unknown op >",i=t.transaction.name||"< unknown name >",s=t.transaction.spanId,o=`[Tracing] Starting '${r}' span on transaction '${i}' (${s}).`;t.transaction.metadata.spanMetadata[t.spanId]={logMessage:o},b.log(o)}return t}setTag(e,t){return this.tags={...this.tags,[e]:t},this}setData(e,t){return this.data={...this.data,[e]:t},this}setStatus(e){return this.status=e,this}setHttpStatus(e){this.setTag("http.status_code",String(e));const t=_f(e);return t!=="unknown_error"&&this.setStatus(t),this}isSuccess(){return this.status==="ok"}finish(e){if((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&this.transaction&&this.transaction.spanId!==this.spanId){const{logMessage:t}=this.transaction.metadata.spanMetadata[this.spanId];t&&b.log(t.replace("Starting","Finishing"))}this.endTimestamp=typeof e=="number"?e:jt()}toTraceparent(){let e="";return this.sampled!==void 0&&(e=this.sampled?"-1":"-0"),`${this.traceId}-${this.spanId}${e}`}toContext(){return De({data:this.data,description:this.description,endTimestamp:this.endTimestamp,op:this.op,parentSpanId:this.parentSpanId,sampled:this.sampled,spanId:this.spanId,startTimestamp:this.startTimestamp,status:this.status,tags:this.tags,traceId:this.traceId})}updateWithContext(e){return this.data=Me(e.data,()=>({})),this.description=e.description,this.endTimestamp=e.endTimestamp,this.op=e.op,this.parentSpanId=e.parentSpanId,this.sampled=e.sampled,this.spanId=Me(e.spanId,()=>this.spanId),this.startTimestamp=Me(e.startTimestamp,()=>this.startTimestamp),this.status=e.status,this.tags=Me(e.tags,()=>({})),this.traceId=Me(e.traceId,()=>this.traceId),this}getTraceContext(){return De({data:Object.keys(this.data).length>0?this.data:void 0,description:this.description,op:this.op,parent_span_id:this.parentSpanId,span_id:this.spanId,status:this.status,tags:Object.keys(this.tags).length>0?this.tags:void 0,trace_id:this.traceId})}toJSON(){return De({data:Object.keys(this.data).length>0?this.data:void 0,description:this.description,op:this.op,parent_span_id:this.parentSpanId,span_id:this.spanId,start_timestamp:this.startTimestamp,status:this.status,tags:Object.keys(this.tags).length>0?this.tags:void 0,timestamp:this.endTimestamp,trace_id:this.traceId})}}function _f(n){if(n<400&&n>=100)return"ok";if(n>=400&&n<500)switch(n){case 401:return"unauthenticated";case 403:return"permission_denied";case 404:return"not_found";case 409:return"already_exists";case 413:return"failed_precondition";case 429:return"resource_exhausted";default:return"invalid_argument"}if(n>=500&&n<600)switch(n){case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline_exceeded";default:return"internal_error"}return"unknown_error"}class Lt extends Re{__init(){this._measurements={}}__init2(){this._frozenDynamicSamplingContext=void 0}constructor(e,t){super(e),Lt.prototype.__init.call(this),Lt.prototype.__init2.call(this),this._hub=t||W(),this._name=e.name||"",this.metadata={source:"custom",...e.metadata,spanMetadata:{},changes:[],propagations:0},this._trimEnd=e.trimEnd,this.transaction=this;const r=this.metadata.dynamicSamplingContext;r&&(this._frozenDynamicSamplingContext={...r})}get name(){return this._name}set name(e){this.setName(e)}setName(e,t="custom"){(e!==this.name||t!==this.metadata.source)&&this.metadata.changes.push({source:this.metadata.source,timestamp:Cn(),propagations:this.metadata.propagations}),this._name=e,this.metadata.source=t}initSpanRecorder(e=1e3){this.spanRecorder||(this.spanRecorder=new Fn(e)),this.spanRecorder.add(this)}setMeasurement(e,t,r=""){this._measurements[e]={value:t,unit:r}}setMetadata(e){this.metadata={...this.metadata,...e}}finish(e){if(this.endTimestamp!==void 0)return;if(this.name||((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&b.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this.name="<unlabeled transaction>"),super.finish(e),this.sampled!==!0){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&b.log("[Tracing] Discarding transaction because its trace was not chosen to be sampled.");const o=this._hub.getClient();o&&o.recordDroppedEvent("sample_rate","transaction");return}const t=this.spanRecorder?this.spanRecorder.spans.filter(o=>o!==this&&o.endTimestamp):[];this._trimEnd&&t.length>0&&(this.endTimestamp=t.reduce((o,a)=>o.endTimestamp&&a.endTimestamp?o.endTimestamp>a.endTimestamp?o:a:o).endTimestamp);const r=this.metadata,i={contexts:{trace:this.getTraceContext()},spans:t,start_timestamp:this.startTimestamp,tags:this.tags,timestamp:this.endTimestamp,transaction:this.name,type:"transaction",sdkProcessingMetadata:{...r,dynamicSamplingContext:this.getDynamicSamplingContext()},...r.source&&{transaction_info:{source:r.source,changes:r.changes,propagations:r.propagations}}};return Object.keys(this._measurements).length>0&&((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&b.log("[Measurements] Adding measurements to transaction",JSON.stringify(this._measurements,void 0,2)),i.measurements=this._measurements),(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&b.log(`[Tracing] Finishing ${this.op} transaction: ${this.name}.`),this._hub.captureEvent(i)}toContext(){const e=super.toContext();return De({...e,name:this.name,trimEnd:this._trimEnd})}updateWithContext(e){return super.updateWithContext(e),this.name=Me(e.name,()=>""),this._trimEnd=e.trimEnd,this}getDynamicSamplingContext(){if(this._frozenDynamicSamplingContext)return this._frozenDynamicSamplingContext;const e=this._hub||W(),t=e&&e.getClient();if(!t)return{};const{environment:r,release:i}=t.getOptions()||{},{publicKey:s}=t.getDsn()||{},o=this.metadata.sampleRate,a=o!==void 0?o.toString():void 0,c=e.getScope(),{segment:l}=c&&c.getUser()||{},u=this.metadata.source,d=u&&u!=="url"?this.name:void 0;return De({environment:r,release:i,transaction:d,user_segment:l,public_key:s,trace_id:this.traceId,sample_rate:a})}}const ao=1e3,co=3e4,lo=5e3;class mf extends Fn{constructor(e,t,r,i){super(i),this._pushActivity=e,this._popActivity=t,this.transactionSpanId=r}add(e){e.spanId!==this.transactionSpanId&&(e.finish=t=>{e.endTimestamp=typeof t=="number"?t:jt(),this._popActivity(e.spanId)},e.endTimestamp===void 0&&this._pushActivity(e.spanId)),super.add(e)}}class Qe extends Lt{__init(){this.activities={}}__init2(){this._heartbeatCounter=0}__init3(){this._finished=!1}__init4(){this._beforeFinishCallbacks=[]}constructor(e,t,r=ao,i=co,s=lo,o=!1){super(e,t),this._idleHub=t,this._idleTimeout=r,this._finalTimeout=i,this._heartbeatInterval=s,this._onScope=o,Qe.prototype.__init.call(this),Qe.prototype.__init2.call(this),Qe.prototype.__init3.call(this),Qe.prototype.__init4.call(this),o&&(qi(t),(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&b.log(`Setting idle transaction on scope. Span ID: ${this.spanId}`),t.configureScope(a=>a.setSpan(this))),this._startIdleTimeout(),setTimeout(()=>{this._finished||(this.setStatus("deadline_exceeded"),this.finish())},this._finalTimeout)}finish(e=jt()){if(this._finished=!0,this.activities={},this.spanRecorder){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&b.log("[Tracing] finishing IdleTransaction",new Date(e*1e3).toISOString(),this.op);for(const t of this._beforeFinishCallbacks)t(this,e);this.spanRecorder.spans=this.spanRecorder.spans.filter(t=>{if(t.spanId===this.spanId)return!0;t.endTimestamp||(t.endTimestamp=e,t.setStatus("cancelled"),(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&b.log("[Tracing] cancelling span since transaction ended early",JSON.stringify(t,void 0,2)));const r=t.startTimestamp<e;return r||(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&b.log("[Tracing] discarding Span since it happened after Transaction was finished",JSON.stringify(t,void 0,2)),r}),(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&b.log("[Tracing] flushing IdleTransaction")}else(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&b.log("[Tracing] No active IdleTransaction");return this._onScope&&qi(this._idleHub),super.finish(e)}registerBeforeFinishCallback(e){this._beforeFinishCallbacks.push(e)}initSpanRecorder(e){if(!this.spanRecorder){const t=i=>{this._finished||this._pushActivity(i)},r=i=>{this._finished||this._popActivity(i)};this.spanRecorder=new mf(t,r,this.spanId,e),(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&b.log("Starting heartbeat"),this._pingHeartbeat()}this.spanRecorder.add(this)}_cancelIdleTimeout(){this._idleTimeoutID&&(clearTimeout(this._idleTimeoutID),this._idleTimeoutID=void 0)}_startIdleTimeout(e){this._cancelIdleTimeout(),this._idleTimeoutID=setTimeout(()=>{!this._finished&&Object.keys(this.activities).length===0&&this.finish(e)},this._idleTimeout)}_pushActivity(e){this._cancelIdleTimeout(),(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&b.log(`[Tracing] pushActivity: ${e}`),this.activities[e]=!0,(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&b.log("[Tracing] new activities count",Object.keys(this.activities).length)}_popActivity(e){if(this.activities[e]&&((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&b.log(`[Tracing] popActivity ${e}`),delete this.activities[e],(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&b.log("[Tracing] new activities count",Object.keys(this.activities).length)),Object.keys(this.activities).length===0){const t=jt()+this._idleTimeout/1e3;this._startIdleTimeout(t)}}_beat(){if(this._finished)return;const e=Object.keys(this.activities).join("");e===this._prevHeartbeatString?this._heartbeatCounter+=1:this._heartbeatCounter=1,this._prevHeartbeatString=e,this._heartbeatCounter>=3?((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&b.log("[Tracing] Transaction finished because of no change for 3 heart beats"),this.setStatus("deadline_exceeded"),this.finish()):this._pingHeartbeat()}_pingHeartbeat(){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&b.log(`pinging Heartbeat -> current counter: ${this._heartbeatCounter}`),setTimeout(()=>{this._beat()},this._heartbeatInterval)}}function qi(n){const e=n.getScope();e&&e.getTransaction()&&e.setSpan(void 0)}function gf(){const n=this.getScope();if(n){const e=n.getSpan();if(e)return{"sentry-trace":e.toTraceparent()}}return{}}function uo(n,e,t){if(!Yr(e))return n.sampled=!1,n;if(n.sampled!==void 0)return n.setMetadata({sampleRate:Number(n.sampled)}),n;let r;return typeof e.tracesSampler=="function"?(r=e.tracesSampler(t),n.setMetadata({sampleRate:Number(r)})):t.parentSampled!==void 0?r=t.parentSampled:(r=e.tracesSampleRate,n.setMetadata({sampleRate:Number(r)})),yf(r)?r?(n.sampled=Math.random()<r,n.sampled?((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&b.log(`[Tracing] starting ${n.op} transaction - ${n.name}`),n):((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&b.log(`[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ${Number(r)})`),n)):((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&b.log(`[Tracing] Discarding transaction because ${typeof e.tracesSampler=="function"?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0"}`),n.sampled=!1,n):((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&b.warn("[Tracing] Discarding transaction because of invalid sample rate."),n.sampled=!1,n)}function yf(n){return Ns(n)||!(typeof n=="number"||typeof n=="boolean")?((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&b.warn(`[Tracing] Given sample rate is invalid. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(n)} of type ${JSON.stringify(typeof n)}.`),!1):n<0||n>1?((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&b.warn(`[Tracing] Given sample rate is invalid. Sample rate must be between 0 and 1. Got ${n}.`),!1):!0}function bf(n,e){const t=this.getClient(),r=t&&t.getOptions()||{};let i=new Lt(n,this);return i=uo(i,r,{parentSampled:n.parentSampled,transactionContext:n,...e}),i.sampled&&i.initSpanRecorder(r._experiments&&r._experiments.maxSpans),i}function vf(n,e,t,r,i,s,o){const a=n.getClient(),c=a&&a.getOptions()||{};let l=new Qe(e,n,t,r,o,i);return l=uo(l,c,{parentSampled:e.parentSampled,transactionContext:e,...s}),l.sampled&&l.initSpanRecorder(c._experiments&&c._experiments.maxSpans),l}function Ef(){const n=gt();!n.__SENTRY__||(n.__SENTRY__.extensions=n.__SENTRY__.extensions||{},n.__SENTRY__.extensions.startTransaction||(n.__SENTRY__.extensions.startTransaction=bf),n.__SENTRY__.extensions.traceHeaders||(n.__SENTRY__.extensions.traceHeaders=gf))}function wf(){const n=gt();if(!n.__SENTRY__)return;const e={mongodb(){const r=Ie(module,"./integrations/node/mongo");return new r.Mongo},mongoose(){const r=Ie(module,"./integrations/node/mongo");return new r.Mongo({mongoose:!0})},mysql(){const r=Ie(module,"./integrations/node/mysql");return new r.Mysql},pg(){const r=Ie(module,"./integrations/node/postgres");return new r.Postgres}},t=Object.keys(e).filter(r=>!!uu(r)).map(r=>{try{return e[r]()}catch{return}}).filter(r=>r);t.length>0&&(n.__SENTRY__.integrations=[...n.__SENTRY__.integrations||[],...t])}function Tf(){Ef(),Br()&&wf(),pf()}const L=ue;function Sf(){L&&L.document?L.document.addEventListener("visibilitychange",()=>{const n=zt();if(L.document.hidden&&n){const e="cancelled";(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&b.log(`[Tracing] Transaction: ${e} -> since tab moved to the background, op: ${n.op}`),n.status||n.setStatus(e),n.setTag("visibilitychange","document.hidden"),n.finish()}}):(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&b.warn("[Tracing] Could not set up background tab detection due to lack of global document")}const Hr=(n,e,t)=>{let r,i;return s=>{e.value>=0&&(s||t)&&(i=e.value-(r||0),(i||r===void 0)&&(r=e.value,e.delta=i,n(e)))}},kf=()=>`v3-${Date.now()}-${Math.floor(Math.random()*(9e12-1))+1e12}`,Rf=()=>{const n=L.performance.timing,e=L.performance.navigation.type,t={entryType:"navigation",startTime:0,type:e==2?"back_forward":e===1?"reload":"navigate"};for(const r in n)r!=="navigationStart"&&r!=="toJSON"&&(t[r]=Math.max(n[r]-n.navigationStart,0));return t},fo=()=>L.__WEB_VITALS_POLYFILL__?L.performance&&(performance.getEntriesByType&&performance.getEntriesByType("navigation")[0]||Rf()):L.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0],ho=()=>{const n=fo();return n&&n.activationStart||0},zr=(n,e)=>{const t=fo();let r="navigate";return t&&(L.document.prerendering||ho()>0?r="prerender":r=t.type.replace(/_/g,"-")),{name:n,value:typeof e>"u"?-1:e,rating:"good",delta:0,entries:[],id:kf(),navigationType:r}},Yn=(n,e,t)=>{try{if(PerformanceObserver.supportedEntryTypes.includes(n)){const r=new PerformanceObserver(i=>{e(i.getEntries())});return r.observe(Object.assign({type:n,buffered:!0},t||{})),r}}catch{}},Hn=(n,e)=>{const t=r=>{(r.type==="pagehide"||L.document.visibilityState==="hidden")&&(n(r),e&&(removeEventListener("visibilitychange",t,!0),removeEventListener("pagehide",t,!0)))};addEventListener("visibilitychange",t,!0),addEventListener("pagehide",t,!0)},xf=(n,e={})=>{const t=zr("CLS",0);let r,i=0,s=[];const o=c=>{c.forEach(l=>{if(!l.hadRecentInput){const u=s[0],d=s[s.length-1];i&&s.length!==0&&l.startTime-d.startTime<1e3&&l.startTime-u.startTime<5e3?(i+=l.value,s.push(l)):(i=l.value,s=[l]),i>t.value&&(t.value=i,t.entries=s,r&&r())}})},a=Yn("layout-shift",o);a&&(r=Hr(n,t,e.reportAllChanges),Hn(()=>{o(a.takeRecords()),r(!0)}))};let fn=-1;const Of=()=>L.document.visibilityState==="hidden"&&!L.document.prerendering?0:1/0,If=()=>{Hn(({timeStamp:n})=>{fn=n},!0)},qr=()=>(fn<0&&(fn=Of(),If()),{get firstHiddenTime(){return fn}}),Df=(n,e={})=>{const t=qr(),r=zr("FID");let i;const s=c=>{c.startTime<t.firstHiddenTime&&(r.value=c.processingStart-c.startTime,r.entries.push(c),i(!0))},o=c=>{c.forEach(s)},a=Yn("first-input",o);i=Hr(n,r,e.reportAllChanges),a&&Hn(()=>{o(a.takeRecords()),a.disconnect()},!0)},Ji={},Nf=(n,e={})=>{const t=qr(),r=zr("LCP");let i;const s=a=>{const c=a[a.length-1];if(c){const l=Math.max(c.startTime-ho(),0);l<t.firstHiddenTime&&(r.value=l,r.entries=[c],i())}},o=Yn("largest-contentful-paint",s);if(o){i=Hr(n,r,e.reportAllChanges);const a=()=>{Ji[r.id]||(s(o.takeRecords()),o.disconnect(),Ji[r.id]=!0,i(!0))};["keydown","click"].forEach(c=>{addEventListener(c,a,{once:!0,capture:!0})}),Hn(a,!0)}};function rr(n){return typeof n=="number"&&isFinite(n)}function ut(n,{startTimestamp:e,...t}){return e&&n.startTimestamp>e&&(n.startTimestamp=e),n.startChild({startTimestamp:e,...t})}function po(){return L&&L.addEventListener&&L.performance}let Wi=0,J={},ye,xt;function Af(n=!1){const e=po();e&&Ut&&(e.mark&&L.performance.mark("sentry-tracing-init"),jf(),Uf(n),Pf())}function $f(){Yn("longtask",e=>{for(const t of e){const r=zt();if(!r)return;const i=K(Ut+t.startTime),s=K(t.duration);r.startChild({description:"Main UI thread blocked",op:"ui.long-task",startTimestamp:i,endTimestamp:i+s})}})}function jf(){xf(n=>{const e=n.entries.pop();!e||((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&b.log("[Measurements] Adding CLS"),J.cls={value:n.value,unit:""},xt=e)})}function Uf(n){Nf(e=>{const t=e.entries.pop();!t||((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&b.log("[Measurements] Adding LCP"),J.lcp={value:e.value,unit:"millisecond"},ye=t)},{reportAllChanges:n})}function Pf(){Df(n=>{const e=n.entries.pop();if(!e)return;const t=K(Ut),r=K(e.startTime);(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&b.log("[Measurements] Adding FID"),J.fid={value:n.value,unit:"millisecond"},J["mark.fid"]={value:t+r,unit:"second"}})}function Bf(n){const e=po();if(!e||!L.performance.getEntries||!Ut)return;(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&b.log("[Tracing] Adding & adjusting spans using Performance API");const t=K(Ut),r=e.getEntries();let i,s;if(r.slice(Wi).forEach(o=>{const a=K(o.startTime),c=K(o.duration);if(!(n.op==="navigation"&&t+a<n.startTimestamp))switch(o.entryType){case"navigation":{Lf(n,o,t),i=t+K(o.responseStart),s=t+K(o.requestStart);break}case"mark":case"paint":case"measure":{Cf(n,o,a,c,t);const l=qr(),u=o.startTime<l.firstHiddenTime;o.name==="first-paint"&&u&&((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&b.log("[Measurements] Adding FP"),J.fp={value:o.startTime,unit:"millisecond"}),o.name==="first-contentful-paint"&&u&&((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&b.log("[Measurements] Adding FCP"),J.fcp={value:o.startTime,unit:"millisecond"});break}case"resource":{const l=o.name.replace(L.location.origin,"");Mf(n,o,l,a,c,t);break}}}),Wi=Math.max(r.length-1,0),Ff(n),n.op==="pageload"){typeof i=="number"&&((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&b.log("[Measurements] Adding TTFB"),J.ttfb={value:(i-n.startTimestamp)*1e3,unit:"millisecond"},typeof s=="number"&&s<=i&&(J["ttfb.requestTime"]={value:(i-s)*1e3,unit:"millisecond"})),["fcp","fp","lcp"].forEach(a=>{if(!J[a]||t>=n.startTimestamp)return;const c=J[a].value,l=t+K(c),u=Math.abs((l-n.startTimestamp)*1e3),d=u-c;(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&b.log(`[Measurements] Normalized ${a} from ${c} to ${u} (${d})`),J[a].value=u});const o=J["mark.fid"];o&&J.fid&&(ut(n,{description:"first input delay",endTimestamp:o.value+K(J.fid.value),op:"ui.action",startTimestamp:o.value}),delete J["mark.fid"]),"fcp"in J||delete J.cls,Object.keys(J).forEach(a=>{n.setMeasurement(a,J[a].value,J[a].unit)}),Yf(n)}ye=void 0,xt=void 0,J={}}function Cf(n,e,t,r,i){const s=i+t,o=s+r;return ut(n,{description:e.name,endTimestamp:o,op:e.entryType,startTimestamp:s}),s}function Lf(n,e,t){["unloadEvent","redirect","domContentLoadedEvent","loadEvent","connect"].forEach(r=>{rn(n,e,r,t)}),rn(n,e,"secureConnection",t,"TLS/SSL","connectEnd"),rn(n,e,"fetch",t,"cache","domainLookupStart"),rn(n,e,"domainLookup",t,"DNS"),Gf(n,e,t)}function rn(n,e,t,r,i,s){const o=s?e[s]:e[`${t}End`],a=e[`${t}Start`];!a||!o||ut(n,{op:"browser",description:Me(i,()=>t),startTimestamp:r+K(a),endTimestamp:r+K(o)})}function Gf(n,e,t){ut(n,{op:"browser",description:"request",startTimestamp:t+K(e.requestStart),endTimestamp:t+K(e.responseEnd)}),ut(n,{op:"browser",description:"response",startTimestamp:t+K(e.responseStart),endTimestamp:t+K(e.responseEnd)})}function Mf(n,e,t,r,i,s){if(e.initiatorType==="xmlhttprequest"||e.initiatorType==="fetch")return;const o={};"transferSize"in e&&(o["Transfer Size"]=e.transferSize),"encodedBodySize"in e&&(o["Encoded Body Size"]=e.encodedBodySize),"decodedBodySize"in e&&(o["Decoded Body Size"]=e.decodedBodySize);const a=s+r,c=a+i;ut(n,{description:t,endTimestamp:c,op:e.initiatorType?`resource.${e.initiatorType}`:"resource.other",startTimestamp:a,data:o})}function Ff(n){const e=L.navigator;if(!e)return;const t=e.connection;t&&(t.effectiveType&&n.setTag("effectiveConnectionType",t.effectiveType),t.type&&n.setTag("connectionType",t.type),rr(t.rtt)&&(J["connection.rtt"]={value:t.rtt,unit:"millisecond"})),rr(e.deviceMemory)&&n.setTag("deviceMemory",`${e.deviceMemory} GB`),rr(e.hardwareConcurrency)&&n.setTag("hardwareConcurrency",String(e.hardwareConcurrency))}function Yf(n){ye&&((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&b.log("[Measurements] Adding LCP Data"),ye.element&&n.setTag("lcp.element",At(ye.element)),ye.id&&n.setTag("lcp.id",ye.id),ye.url&&n.setTag("lcp.url",ye.url.trim().slice(0,200)),n.setTag("lcp.size",ye.size)),xt&&xt.sources&&((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&b.log("[Measurements] Adding CLS Data"),xt.sources.forEach((e,t)=>n.setTag(`cls.source.${t+1}`,At(e.node))))}const Hf=["localhost",/^\//],kn={traceFetch:!0,traceXHR:!0,tracingOrigins:Hf};function zf(n){const{traceFetch:e,traceXHR:t,tracingOrigins:r,shouldCreateSpanForRequest:i}={...kn,...n},s=typeof i=="function"?i:c=>!0,o=c=>r.some(l=>Pn(c,l)),a={};e&&ce("fetch",c=>{qf(c,s,o,a)}),t&&ce("xhr",c=>{Wf(c,s,o,a)})}function qf(n,e,t,r){if(!Yr()||!(n.fetchData&&e(n.fetchData.url)))return;if(n.endTimestamp){const s=n.fetchData.__span;if(!s)return;const o=r[s];o&&(n.response?o.setHttpStatus(n.response.status):n.error&&o.setStatus("internal_error"),o.finish(),delete r[s]);return}const i=zt();if(i){const s=i.startChild({data:{...n.fetchData,type:"fetch"},description:`${n.fetchData.method} ${n.fetchData.url}`,op:"http.client"});n.fetchData.__span=s.spanId,r[s.spanId]=s;const o=n.args[0];n.args[1]=n.args[1]||{};const a=n.args[1];t(n.fetchData.url)&&(a.headers=Jf(o,i.getDynamicSamplingContext(),s,a),i.metadata.propagations+=1)}}function Jf(n,e,t,r){const i=zs(e),s=t.toTraceparent(),o=typeof Request<"u"&&ve(n,Request)?n.headers:r.headers;if(o)if(typeof Headers<"u"&&ve(o,Headers)){const a=new Headers(o);return a.append("sentry-trace",s),i&&a.append(mr,i),a}else if(Array.isArray(o)){const a=[...o,["sentry-trace",s]];return i&&a.push([mr,i]),a}else{const a="baggage"in o?o.baggage:void 0,c=[];return Array.isArray(a)?c.push(...a):a&&c.push(a),i&&c.push(i),{...o,"sentry-trace":s,baggage:c.length>0?c.join(","):void 0}}else return{"sentry-trace":s,baggage:i}}function Wf(n,e,t,r){if(!Yr()||n.xhr&&n.xhr.__sentry_own_request__||!(n.xhr&&n.xhr.__sentry_xhr__&&e(n.xhr.__sentry_xhr__.url)))return;const i=n.xhr.__sentry_xhr__;if(n.endTimestamp){const o=n.xhr.__sentry_xhr_span_id__;if(!o)return;const a=r[o];a&&(a.setHttpStatus(i.status_code),a.finish(),delete r[o]);return}const s=zt();if(s){const o=s.startChild({data:{...i.data,type:"xhr",method:i.method,url:i.url},description:`${i.method} ${i.url}`,op:"http.client"});if(n.xhr.__sentry_xhr_span_id__=o.spanId,r[n.xhr.__sentry_xhr_span_id__]=o,n.xhr.setRequestHeader&&t(n.xhr.__sentry_xhr__.url))try{n.xhr.setRequestHeader("sentry-trace",o.toTraceparent());const a=s.getDynamicSamplingContext(),c=zs(a);c&&n.xhr.setRequestHeader(mr,c),s.metadata.propagations+=1}catch{}}}function Vf(n,e=!0,t=!0){if(!L||!L.location){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&b.warn("Could not initialize routing instrumentation due to invalid location");return}let r=L.location.href,i;e&&(i=n({name:L.location.pathname,op:"pageload",metadata:{source:"url"}})),t&&ce("history",({to:s,from:o})=>{if(o===void 0&&r&&r.indexOf(s)!==-1){r=void 0;return}o!==s&&(r=void 0,i&&((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&b.log(`[Tracing] Finishing current transaction with op: ${i.op}`),i.finish()),i=n({name:L.location.pathname,op:"navigation",metadata:{source:"url"}}))})}const Kf="BrowserTracing",Xf={idleTimeout:ao,finalTimeout:co,heartbeatInterval:lo,markBackgroundTransactions:!0,routingInstrumentation:Vf,startTransactionOnLocationChange:!0,startTransactionOnPageLoad:!0,_experiments:{enableLongTask:!0},...kn};class Jr{__init(){this.name=Kf}constructor(e){Jr.prototype.__init.call(this);let t=kn.tracingOrigins;e&&(e.tracingOrigins&&Array.isArray(e.tracingOrigins)?t=e.tracingOrigins:(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&(this._emitOptionsWarning=!0)),this.options={...Xf,...e,tracingOrigins:t};const{_metricOptions:r}=this.options;Af(r&&r._reportAllChanges),Yl([this,"access",i=>i.options,"access",i=>i._experiments,"optionalAccess",i=>i.enableLongTask])&&$f()}setupOnce(e,t){this._getCurrentHub=t,this._emitOptionsWarning&&((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&b.warn("[Tracing] You need to define `tracingOrigins` in the options. Set an array of urls or patterns to trace."),(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&b.warn(`[Tracing] We added a reasonable default for you: ${kn.tracingOrigins}`));const{routingInstrumentation:r,startTransactionOnLocationChange:i,startTransactionOnPageLoad:s,markBackgroundTransactions:o,traceFetch:a,traceXHR:c,tracingOrigins:l,shouldCreateSpanForRequest:u}=this.options;r(d=>this._createRouteTransaction(d),s,i),o&&Sf(),zf({traceFetch:a,traceXHR:c,tracingOrigins:l,shouldCreateSpanForRequest:u})}_createRouteTransaction(e){if(!this._getCurrentHub){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&b.warn(`[Tracing] Did not create ${e.op} transaction because _getCurrentHub is invalid.`);return}const{beforeNavigate:t,idleTimeout:r,finalTimeout:i,heartbeatInterval:s}=this.options,o=e.op==="pageload",a=o?Vi("sentry-trace"):null,c=o?Vi("baggage"):null,l=a?vu(a):void 0,u=c?$u(c):void 0,d={...e,...l,metadata:{...e.metadata,dynamicSamplingContext:l&&!u?{}:u},trimEnd:!0},f=typeof t=="function"?t(d):d,_=f===void 0?{...d,sampled:!1}:f;_.metadata=_.name!==d.name?{..._.metadata,source:"custom"}:_.metadata,_.sampled===!1&&(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&b.log(`[Tracing] Will not send ${_.op} transaction because of beforeNavigate.`),(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&b.log(`[Tracing] Starting ${_.op} transaction on scope`);const h=this._getCurrentHub(),{location:m}=L,y=vf(h,_,r,i,!0,{location:m},s);return y.registerBeforeFinishCallback(S=>{Bf(S),S.setTag("sentry_reportAllChanges",Boolean(this.options._metricOptions&&this.options._metricOptions._reportAllChanges))}),y}}function Vi(n){const e=As(`meta[name=${n}]`);return e?e.getAttribute("content"):null}(typeof __SENTRY_TRACING__>"u"||__SENTRY_TRACING__)&&Tf();df({dsn:"https://8d95b82da5804fdcaf8cbbeb7132edeb@glitch.puzzad.com/2",integrations:[new Jr],tracesSampleRate:.01,environment:"production"});new Ol({target:document.getElementById("app")});export{th as A,In as B,ts as C,it as D,To as E,Mu as F,Kr as G,oh as H,is as I,ah as J,Zf as K,Co as L,ih as M,eh as N,Qf as O,Se as P,No as Q,zo as R,Ft as S,ch as T,hi as U,Rn as V,Jc as W,ks as X,X as a,pt as b,N as c,q as d,$ as e,I as f,vn as g,nh as h,Mt as i,tl as j,be as k,he as l,fe as m,z as n,Ue as o,Pe as p,wo as q,Zr as r,ht as s,M as t,rh as u,sh as v,g as w,hn as x,pn as y,D as z};
